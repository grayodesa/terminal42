jQuery(document).ready(function(a){a.fn.init_addon_totals=function(){var b=a(this);a(this).on("click",".reset_variations",function(){a.each(b.find(".product-addon"),function(){var b=a(this).find(".addon");(b.is(":checkbox")||b.is(":radio"))&&b.prop("checked",!1),b.is("select")&&b.prop("selectedIndex",0),(b.is(":text")||b.is("textarea")||b.is('input[type="number"]')||b.is('input[type="file"]'))&&b.val("")}),b.trigger("woocommerce-product-addons-update")}),a(this).on("keyup change",".product-addon input, .product-addon textarea",function(){if(a(this).attr("maxlength")>0){var b=a(this).val(),c=a(this).attr("maxlength")-b.length;a(this).next(".chars_remaining").find("span").text(c)}}),a(this).find(" .addon-custom, .addon-custom-textarea").each(function(){a(this).attr("maxlength")>0&&a(this).after('<small class="chars_remaining"><span>'+a(this).attr("maxlength")+"</span> "+woocommerce_addons_params.i18n_remaining+"</small>")}),a(this).on("change",".product-addon input, .product-addon textarea, .product-addon select, input.qty",function(){a(this).trigger("woocommerce-product-addons-update")}),a(this).on("found_variation",function(b,c){var d=a(this),e=d.find("#product-addons-total");"undefined"!=typeof c.display_price?e.data("price",c.display_price):a(c.price_html).find(".amount:last").length&&(product_price=a(c.price_html).find(".amount:last").text(),product_price=product_price.replace(woocommerce_addons_params.currency_format_symbol,""),product_price=product_price.replace(woocommerce_addons_params.currency_format_thousand_sep,""),product_price=product_price.replace(woocommerce_addons_params.currency_format_decimal_sep,"."),product_price=product_price.replace(/[^0-9\.]/g,""),product_price=parseFloat(product_price),e.data("price",product_price)),d.trigger("woocommerce-product-addons-update")}),a(this).on("woocommerce-product-addons-update",function(){var c=0,d=b.find("#product-addons-total"),e=d.data("price"),f=d.data("type"),g=d.data("product-id"),h=d.data("raw-price"),i=d.data("tax-mode"),j=d.data("tax-display-mode"),k=0;if(("variable"==f||"variable-subscription"==f)&&b.find(".single_variation").after(d),b.find(".addon").each(function(){var b=0,d=0;a(this).is(".addon-custom-price")?b=a(this).val():a(this).is(".addon-input_multiplier")?(isNaN(a(this).val())||""==a(this).val()?(a(this).val(""),a(this).closest("p").find(".addon-alert").show()):(""!=a(this).val()&&a(this).val(Math.ceil(a(this).val())),a(this).closest("p").find(".addon-alert").hide()),b=a(this).data("price")*a(this).val(),d=a(this).data("raw-price")*a(this).val()):a(this).is(".addon-checkbox, .addon-radio")?a(this).is(":checked")&&(b=a(this).data("price"),d=a(this).data("raw-price")):a(this).is(".addon-select")?a(this).val()&&(b=a(this).find("option:selected").data("price"),d=a(this).find("option:selected").data("raw-price")):a(this).val()&&(b=a(this).data("price"),d=a(this).data("raw-price")),b||(b=0),d||(d=0),c=parseFloat(c)+parseFloat(b),k=parseFloat(k)+parseFloat(d)}),d.data("addons-price",c),d.data("addons-raw-price",k),b.find("input.qty").size())var l=parseFloat(b.find("input.qty").val());else var l=1;if(c>0&&l>0){var m,n;c=parseFloat(c*l),k=parseFloat(k*l);var o=accounting.formatMoney(c,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format});if("undefined"!=typeof e){m=parseFloat(e*l);var p=accounting.formatMoney(m+c,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format})}n=parseFloat(h*l);var q=accounting.formatMoney(n+k,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format}),r=!1;a(".entry-summary .subscription-details").length&&(r=a(".entry-summary .subscription-details").clone().wrap("<p>").parent().html()),r&&(o+=r,p&&(p+=r));var s='<dl class="product-addon-totals"><dt>'+woocommerce_addons_params.i18n_addon_total+'</dt><dd><strong><span class="amount">'+o+"</span></strong></dd>";if(p&&"1"==d.data("show-grand-total")){var t="";if(!woocommerce_addons_params.price_display_suffix)return s=s+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+p+"</span></strong></dd></dl>",d.html(s),void b.trigger("updated_addons");if(!1==woocommerce_addons_params.price_display_suffix.indexOf("{price_including_tax}")>-1&&!1==woocommerce_addons_params.price_display_suffix.indexOf("{price_excluding_tax}")>-1)return s=s+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+p+"</span> "+woocommerce_addons_params.price_display_suffix+"</strong></dd></dl>",d.html(s),void b.trigger("updated_addons");if("excl"===i&&"incl"===j)return t='<small class="woocommerce-price-suffix">'+woocommerce_addons_params.price_display_suffix+"</small>",t=t.replace("{price_including_tax}",p),t=t.replace("{price_excluding_tax}",q),s=s+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+p+"</span> "+t+" </strong></dd></dl>",d.html(s),void b.trigger("updated_addons");if("incl"===i&&"excl"===j)return t='<small class="woocommerce-price-suffix">'+woocommerce_addons_params.price_display_suffix+"</small>",t=t.replace("{price_including_tax}",q),t=t.replace("{price_excluding_tax}",p),s=s+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+p+"</span> "+t+" </strong></dd></dl>",d.html(s),void b.trigger("updated_addons");a.ajax({type:"POST",url:woocommerce_addons_params.ajax_url,data:{action:"wc_product_addons_calculate_tax",total:m+c,product_id:g},success:function(c){if(result=a.parseJSON(c),"SUCCESS"==result.result){t='<small class="woocommerce-price-suffix">'+woocommerce_addons_params.price_display_suffix+"</small>";var e=accounting.formatMoney(result.price_including_tax,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format}),f=accounting.formatMoney(result.price_excluding_tax,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format});t=t.replace("{price_including_tax}",e),t=t.replace("{price_excluding_tax}",f),s=s+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+p+"</span> "+t+" </strong></dd></dl>",d.html(s),b.trigger("updated_addons")}else s=s+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+p+"</span></strong></dd></dl>",d.html(s),b.trigger("updated_addons")},error:function(){s=s+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+p+"</span></strong></dd></dl>",d.html(s),b.trigger("updated_addons")}})}else d.empty(),b.trigger("updated_addons")}else d.empty(),b.trigger("updated_addons")}),a(this).find(".addon-custom, .addon-custom-textarea, .product-addon input, .product-addon textarea, .product-addon select, input.qty").change(),a(this).find(".variations select").change()},a("body").on("quick-view-displayed",function(){a(this).find(".cart:not(.cart_group)").each(function(){a(this).init_addon_totals()})}),a("body .component").on("wc-composite-component-loaded",function(){a(this).find(".cart").each(function(){a(this).init_addon_totals()})}),a("body").find(".cart:not(.cart_group)").each(function(){a(this).init_addon_totals()})});
jQuery(document).ready(function(a){a.fn.init_addon_totals=function(){var b=a(this);a(this).on("click",".reset_variations",function(){a.each(b.find(".product-addon"),function(){var c=a(this).find(".addon");if(c.is(":checkbox")||c.is(":radio")){c.prop("checked",false)}if(c.is("select")){c.prop("selectedIndex",0)}if(c.is(":text")||c.is("textarea")||c.is('input[type="number"]')||c.is('input[type="file"]')){c.val("")}});b.trigger("woocommerce-product-addons-update")});a(this).on("keyup change",".product-addon input, .product-addon textarea",function(){if(a(this).attr("maxlength")>0){var d=a(this).val();var c=a(this).attr("maxlength")-d.length;a(this).next(".chars_remaining").find("span").text(c)}});a(this).find(" .addon-custom, .addon-custom-textarea").each(function(){if(a(this).attr("maxlength")>0){a(this).after('<small class="chars_remaining"><span>'+a(this).attr("maxlength")+"</span> "+woocommerce_addons_params.i18n_remaining+"</small>")}});a(this).on("change",".product-addon input, .product-addon textarea, .product-addon select, input.qty",function(){a(this).trigger("woocommerce-product-addons-update")});a(this).on("found_variation",function(e,c){var d=a(this);var f=d.find("#product-addons-total");if(typeof(c.display_price)!=="undefined"){f.data("price",c.display_price)}else{if(a(c.price_html).find(".amount:last").length){product_price=a(c.price_html).find(".amount:last").text();product_price=product_price.replace(woocommerce_addons_params.currency_format_symbol,"");product_price=product_price.replace(woocommerce_addons_params.currency_format_thousand_sep,"");product_price=product_price.replace(woocommerce_addons_params.currency_format_decimal_sep,".");product_price=product_price.replace(/[^0-9\.]/g,"");product_price=parseFloat(product_price);f.data("price",product_price)}}d.trigger("woocommerce-product-addons-update")});a(this).on("woocommerce-product-addons-update",function(){var t=0;var e=b.find("#product-addons-total");var m=e.data("price");var d=e.data("type");var j=e.data("product-id");var o=e.data("raw-price");var k=e.data("tax-mode");var r=e.data("tax-display-mode");var g=0;if(d=="variable"||d=="variable-subscription"){b.find(".single_variation").after(e)}b.find(".addon").each(function(){var u=0;var v=0;if(a(this).is(".addon-custom-price")){u=a(this).val()}else{if(a(this).is(".addon-input_multiplier")){if(isNaN(a(this).val())||a(this).val()==""){a(this).val("");a(this).closest("p").find(".addon-alert").show()}else{if(a(this).val()!=""){a(this).val(Math.ceil(a(this).val()))}a(this).closest("p").find(".addon-alert").hide()}u=a(this).data("price")*a(this).val();v=a(this).data("raw-price")*a(this).val()}else{if(a(this).is(".addon-checkbox, .addon-radio")){if(a(this).is(":checked")){u=a(this).data("price");v=a(this).data("raw-price")}}else{if(a(this).is(".addon-select")){if(a(this).val()){u=a(this).find("option:selected").data("price");v=a(this).find("option:selected").data("raw-price")}}else{if(a(this).val()){u=a(this).data("price");v=a(this).data("raw-price")}}}}}if(!u){u=0}if(!v){v=0}t=parseFloat(t)+parseFloat(u);g=parseFloat(g)+parseFloat(v)});e.data("addons-price",t);e.data("addons-raw-price",g);if(b.find("input.qty").size()){var f=parseFloat(b.find("input.qty").val())}else{var f=1}if(t>0&&f>0){var l,q;t=parseFloat(t*f);g=parseFloat(g*f);var p=accounting.formatMoney(t,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format});if("undefined"!==typeof m){l=parseFloat(m*f);var s=accounting.formatMoney(l+t,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format})}q=parseFloat(o*f);var n=accounting.formatMoney(q+g,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format});var i=false;if(a(".entry-summary .subscription-details").length){i=a(".entry-summary .subscription-details").clone().wrap("<p>").parent().html()}if(i){p+=i;if(s){s+=i}}var h='<dl class="product-addon-totals"><dt>'+woocommerce_addons_params.i18n_addon_total+'</dt><dd><strong><span class="amount">'+p+"</span></strong></dd>";if(s&&"1"==e.data("show-grand-total")){var c="";if(!woocommerce_addons_params.price_display_suffix){h=h+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+s+"</span></strong></dd></dl>";e.html(h);b.trigger("updated_addons");return}if(false===(woocommerce_addons_params.price_display_suffix.indexOf("{price_including_tax}")>-1)&&false===(woocommerce_addons_params.price_display_suffix.indexOf("{price_excluding_tax}")>-1)){h=h+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+s+"</span> "+woocommerce_addons_params.price_display_suffix+"</strong></dd></dl>";e.html(h);b.trigger("updated_addons");return}if("excl"===k&&"incl"===r){c='<small class="woocommerce-price-suffix">'+woocommerce_addons_params.price_display_suffix+"</small>";c=c.replace("{price_including_tax}",s);c=c.replace("{price_excluding_tax}",n);h=h+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+s+"</span> "+c+" </strong></dd></dl>";e.html(h);b.trigger("updated_addons");return}if("incl"===k&&"excl"===r){c='<small class="woocommerce-price-suffix">'+woocommerce_addons_params.price_display_suffix+"</small>";c=c.replace("{price_including_tax}",n);c=c.replace("{price_excluding_tax}",s);h=h+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+s+"</span> "+c+" </strong></dd></dl>";e.html(h);b.trigger("updated_addons");return}a.ajax({type:"POST",url:woocommerce_addons_params.ajax_url,data:{action:"wc_product_addons_calculate_tax",total:l+t,product_id:j},success:function(v){result=a.parseJSON(v);if(result.result=="SUCCESS"){c='<small class="woocommerce-price-suffix">'+woocommerce_addons_params.price_display_suffix+"</small>";var w=accounting.formatMoney(result.price_including_tax,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format});var u=accounting.formatMoney(result.price_excluding_tax,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format});c=c.replace("{price_including_tax}",w);c=c.replace("{price_excluding_tax}",u);h=h+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+s+"</span> "+c+" </strong></dd></dl>";e.html(h);b.trigger("updated_addons")}else{h=h+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+s+"</span></strong></dd></dl>";e.html(h);b.trigger("updated_addons")}},error:function(){h=h+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+s+"</span></strong></dd></dl>";e.html(h);b.trigger("updated_addons")}})}e.html(h);b.trigger("updated_addons")}else{e.empty();b.trigger("updated_addons")}});a(this).find(".addon-custom, .addon-custom-textarea, .product-addon input, .product-addon textarea, .product-addon select, input.qty").change();a(this).find(".variations select").change()};a("body").on("quick-view-displayed",function(){a(this).find(".cart:not(.cart_group)").each(function(){a(this).init_addon_totals()})});a("body .component").on("wc-composite-component-loaded",function(){a(this).find(".cart").each(function(){a(this).init_addon_totals()})});a("body").find(".cart:not(.cart_group)").each(function(){a(this).init_addon_totals()})});