{"version":3,"sources":["lucy/assets/js/script.js"],"names":["require","undefined","define","e","t","n","r","s","o","u","a","i","f","Error","code","l","exports","call","length",1,"module","Lucy","text","href","lucy_config","email_link","./third-party/lucy.js",2,"lucy","site_url","algolia_app_id","algolia_api_key","algolia_index_name","links","contactLink","addEvent","element","event","handler","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","maybeClose","window","type","keyCode","close","clickedElement","target","srcElement","contains","open","isOpen","m","redraw","setAttribute","document","reset","searchQuery","searchResults","nothingFound","listenForInput","this","value","search","showResults","results","parser","createElement","map","path","url","pathname","_highlightResult","title","query","loader","innerText","loadingInterval","setInterval","index","hitsPerPage","error","result","console","log","hits","clearInterval","charAt","substr","algoliasearch","client","initIndex","prop","body","appendChild","view","style","display","onclick","onsubmit","onkeyup","config","el","focus","placeholder","class","trust","mount","mithril",3,"parse","str","match","exec","parseFloat","toLowerCase","y","d","h","_short","ms","Math","round","_long","plural","name","floor","ceil","val","options",4,"AlgoliaSearch","applicationID","apiKey","opts","debug","clone","isArray","usage","errors","AlgoliaSearchError","defaultHosts","hosts","read","write","hostIndex","protocol","timeout","test","concat","prepareHost","requestTimeout","extraHeaders","cache","_cache","_ua","_useCache","_useFallback","useFallback","_setTimeout","host","notImplemented","message","deprecatedMessage","previousUsage","newUsage","githubAnchorLink","replace","exitPromise","fn","deprecate","deprecated","warned","apply","arguments","safeJSONStringify","obj","Array","prototype","toJSON","JSON","stringify","out","buildSearchMethod","MAX_API_KEY_LENGTH","deleteIndex","indexName","callback","_jsonRequest","method","encodeURIComponent","hostType","moveIndex","srcIndexName","dstIndexName","postObj","operation","destination","copyIndex","getLogs","offset","listIndexes","page","params","Index","listUserKeys","getUserKeyACL","key","deleteUserKey","addUserKey","acls","acl","validity","maxQueriesPerIPPerHour","maxHitsPerQuery","indexes","description","queryParameters","_getSearchParams","referers","addUserKeyWithValidity","updateUserKey","putObj","setSecurityTags","tags","Object","toString","strTags","oredTags","j","push","join","securityTags","setUserToken","userToken","startQueriesBatch","_batch","addQueryInBatch","args","clearCache","sendQueriesBatch","setRequestTimeout","milliseconds","parseInt","queries","requests","JSONPParams","request","requestId","fallback","batch","operations","destroy","enableRateLimitForward","disableRateLimitForward","useSecuredAPIKey","disableSecuredAPIKey","generateSecuredApiKey","as","typeAheadArgs","typeAheadValueOption","setExtraHeader","addAlgoliaAgent","algoliaAgent","initialOpts","doRequest","requester","reqOpts","success","httpResponse","status","statusCode","requestDebug","headers","ok","retry","cacheID","responseText","tries","retryRequest","unrecoverableError","_promise","reject","tryFallback","err","stack","Unknown","UnparsableJSON","usingFallback","hasFallback","RequestTimeout","Infinity","resolve","jsonBody","_computeRequestHeaders","_request","then","promise","content","setTimeout","hasOwnProperty","withAPIKey","forEach","requestHeaders","x-algolia-agent","x-algolia-application-id","header","addObject","objectID","indexObj","addObjects","objects","action","getObject","attrs","getObjects","objectIDs","attributesToRetrieve","partialUpdateObject","partialObject","createIfNotExists","partialUpdateObjects","saveObject","object","saveObjects","deleteObject","deleteObjects","deleteByQuery","stopOrDelete","searchContent","nbHits","waitTask","doDeleteByQuery","deleteObjectsContent","taskID","failure","distinct","similarSearch","browse","merge","browseFrom","cursor","browseAll","browseLoop","browser","_stopped","queryString","browseCallback","_error","_result","_end","IndexBrowser","ttAdapter","self","syncCb","asyncCb","cb","retryLoop","loop","delay","baseDelay","maxDelay","successCb","failureCb","clearIndex","getSettings","setSettings","settings","_search","./IndexBrowser","./buildSearchMethod.js","./errors","lodash/collection/forEach","lodash/collection/map","lodash/lang/clone","lodash/lang/isArray","lodash/object/merge",5,"inherits","EventEmitter","stop","_clean","emit","removeAllListeners","events",6,"process","cloneDeep","getDocumentProtocol","ua","AlgoliaSearchBrowser","Promise","inlineHeaders","jsonpRequest","places","env","APP_ENV","enable","version","initPlaces","__algolia","support","hasXMLHttpRequest","hasXDomainRequest","cors","XMLHttpRequest","load","timedOut","clearTimeout","ontimeout","req","getAllResponseHeaders","more","Network","abort","XDomainRequest","setRequestHeader","onprogress","onload","onerror","send","../../AlgoliaSearch","../../errors","../../places.js","../../version.js","../get-document-protocol","../inline-headers","../jsonp-request","_process","es6-promise","lodash/lang/cloneDeep",7,"location",8,"querystring","encode",9,"done","cbCalled","clean","JSONPScriptFail","readystatechange","readyState","script","onreadystatechange","head","removeChild","cbName","JSONPScriptError","JSONPCounter","getElementsByTagName","data","async","defer","src","../errors",10,"queryParam","./errors.js",11,"extraProperties","captureStackTrace","constructor","createCustomError","AlgoliaSearchCustomError","slice","unshift",12,"createPlacesClient","appID",13,14,"useColors","documentElement","firebug","exception","table","navigator","userAgent","RegExp","$1","formatArgs","namespace","humanize","diff","c","color","lastC","splice","Function","save","namespaces","storage","removeItem","localstorage","localStorage","chrome","local","colors","formatters","v","./debug",15,"selectColor","prevColor","disabled","enabled","curr","Date","prevTime","prev","coerce","format","formatter","logFn","bind","split","len","skips","names","disable","algolia-ms",16,"global","lib$es6$promise$utils$$objectOrFunction","x","lib$es6$promise$utils$$isFunction","lib$es6$promise$asap$$setScheduler","scheduleFn","lib$es6$promise$asap$$customSchedulerFn","lib$es6$promise$asap$$setAsap","asapFn","lib$es6$promise$asap$$asap","lib$es6$promise$asap$$useNextTick","nextTick","lib$es6$promise$asap$$flush","lib$es6$promise$asap$$useVertxTimer","lib$es6$promise$asap$$vertxNext","lib$es6$promise$asap$$useMutationObserver","iterations","observer","lib$es6$promise$asap$$BrowserMutationObserver","node","createTextNode","observe","characterData","lib$es6$promise$asap$$useMessageChannel","channel","MessageChannel","port1","onmessage","port2","postMessage","lib$es6$promise$asap$$useSetTimeout","lib$es6$promise$asap$$len","lib$es6$promise$asap$$queue","arg","lib$es6$promise$asap$$attemptVertx","vertx","runOnLoop","runOnContext","lib$es6$promise$then$$then","onFulfillment","onRejection","parent","state","_state","lib$es6$promise$$internal$$FULFILLED","lib$es6$promise$$internal$$REJECTED","child","lib$es6$promise$$internal$$noop","lib$es6$promise$$internal$$invokeCallback","lib$es6$promise$$internal$$subscribe","lib$es6$promise$promise$resolve$$resolve","Constructor","lib$es6$promise$$internal$$resolve","lib$es6$promise$$internal$$selfFulfillment","TypeError","lib$es6$promise$$internal$$cannotReturnOwn","lib$es6$promise$$internal$$getThen","lib$es6$promise$$internal$$GET_THEN_ERROR","lib$es6$promise$$internal$$tryThen","fulfillmentHandler","rejectionHandler","lib$es6$promise$$internal$$handleForeignThenable","thenable","sealed","lib$es6$promise$$internal$$fulfill","reason","lib$es6$promise$$internal$$reject","_label","lib$es6$promise$$internal$$handleOwnThenable","lib$es6$promise$$internal$$handleMaybeThenable","maybeThenable","lib$es6$promise$then$$default","lib$es6$promise$promise$resolve$$default","lib$es6$promise$$internal$$publishRejection","_onerror","lib$es6$promise$$internal$$publish","lib$es6$promise$$internal$$PENDING","_subscribers","subscribers","settled","detail","lib$es6$promise$$internal$$ErrorObject","lib$es6$promise$$internal$$tryCatch","lib$es6$promise$$internal$$TRY_CATCH_ERROR","succeeded","failed","hasCallback","lib$es6$promise$$internal$$initializePromise","resolver","lib$es6$promise$promise$all$$all","entries","lib$es6$promise$enumerator$$default","lib$es6$promise$promise$race$$race","lib$es6$promise$utils$$isArray","lib$es6$promise$promise$reject$$reject","lib$es6$promise$promise$$needsResolver","lib$es6$promise$promise$$needsNew","lib$es6$promise$promise$$Promise","_id","lib$es6$promise$promise$$counter","lib$es6$promise$enumerator$$Enumerator","input","_instanceConstructor","_input","_remaining","_enumerate","_validationError","lib$es6$promise$polyfill$$polyfill","P","cast","lib$es6$promise$promise$$default","lib$es6$promise$utils$$_isArray","lib$es6$promise$asap$$scheduleFlush","lib$es6$promise$asap$$browserWindow","lib$es6$promise$asap$$browserGlobal","MutationObserver","WebKitMutationObserver","lib$es6$promise$asap$$isNode","lib$es6$promise$asap$$isWorker","Uint8ClampedArray","importScripts","lib$es6$promise$promise$all$$default","lib$es6$promise$promise$race$$default","lib$es6$promise$promise$reject$$default","all","race","_setScheduler","_setAsap","_asap","catch","_eachEntry","entry","_settledAt","_willSettleAt","enumerator","lib$es6$promise$polyfill$$default","lib$es6$promise$umd$$ES6Promise","polyfill",17,"_events","_maxListeners","isFunction","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNaN","er","listeners","addListener","listener","newListener","trace","on","once","g","removeListener","fired","list","position","ret","listenerCount","evlistener","emitter",18,"create","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor",19,"last","array",20,"arrayEach","baseEach","createForEach","../internal/arrayEach","../internal/baseEach","../internal/createForEach",21,"collection","iteratee","thisArg","func","arrayMap","baseMap","baseCallback","../internal/arrayMap","../internal/baseCallback","../internal/baseMap","../lang/isArray",22,"restParam","start","FUNC_ERROR_TEXT","nativeMax","rest","otherArgs","max",23,"arrayCopy","source",24,25,26,"arraySome","predicate",27,"baseAssign","baseCopy","keys","../object/keys","./baseCopy",28,"argCount","bindCallback","identity","baseMatches","property","baseMatchesProperty","../utility/identity","../utility/property","./baseMatches","./baseMatchesProperty","./bindCallback",29,"baseClone","isDeep","customizer","stackA","stackB","isArr","initCloneArray","tag","objToString","isFunc","funcTag","objectTag","argsTag","cloneableTags","initCloneByTag","initCloneObject","baseForOwn","subValue","arrayTag","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","weakMapTag","arrayBufferTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","objectProto","../lang/isObject","./arrayCopy","./arrayEach","./baseAssign","./baseForOwn","./initCloneArray","./initCloneByTag","./initCloneObject",30,"props",31,"createBaseEach","./createBaseEach",32,"createBaseFor","baseFor","./createBaseFor",33,"baseForIn","keysIn","../object/keysIn","./baseFor",34,35,"baseGet","pathKey","toObject","./toObject",36,"baseIsEqual","other","isLoose","isObjectLike","baseIsEqualDeep","./baseIsEqualDeep","./isObjectLike",37,"equalFunc","objIsArr","othIsArr","objTag","othTag","isTypedArray","objIsObj","othIsObj","isSameTag","equalByTag","objIsWrapped","othIsWrapped","equalArrays","equalObjects","pop","../lang/isTypedArray","./equalArrays","./equalByTag","./equalObjects",38,"baseIsMatch","matchData","noCustomizer","objValue","srcValue","./baseIsEqual",39,"isArrayLike","./baseEach","./isArrayLike",40,"getMatchData","./baseIsMatch","./getMatchData",41,"isCommon","isKey","isStrictComparable","toPath","baseSlice","../array/last","./baseGet","./baseSlice","./isKey","./isStrictComparable","./toPath",42,"baseMerge","isSrcArr","baseMergeDeep","./baseMergeDeep",43,"mergeFunc","isPlainObject","isArguments","toPlainObject","../lang/isArguments","../lang/isPlainObject","../lang/toPlainObject",44,"baseProperty",45,"basePropertyDeep",46,"end",47,"baseToString",48,"accumulator",49,"bufferClone","buffer","ArrayBuffer","byteLength","Uint8Array","set",50,"createAssigner","assigner","sources","guard","isIterateeCall","../function/restParam","./isIterateeCall",51,"eachFunc","fromRight","getLength","isLength","iterable","./getLength","./isLength",52,"keysFunc",53,"arrayFunc",54,"arrLength","othLength","arrValue","othValue","./arraySome",55,56,"objProps","objLength","othProps","skipCtor","objCtor","othCtor",57,"./baseProperty",58,"pairs","../object/pairs",59,"getNative","isNative","../lang/isNative",60,61,"Ctor","byteOffset","reFlags","lastIndex","./bufferClone",62,63,64,"isIndex","reIsUint","MAX_SAFE_INTEGER",65,"./isIndex",66,"reIsPlainProp","reIsDeepProp",67,68,69,70,"shimKeys","propsLength","allowIndexes",71,72,"rePropName","number","quote","string","reEscapeChar","./baseToString",73,"../internal/baseClone","../internal/bindCallback","../internal/isIterateeCall",74,75,"propertyIsEnumerable","../internal/isArrayLike","../internal/isObjectLike",76,"nativeIsArray","../internal/getNative","../internal/isLength",77,"./isObject",78,"reIsNative","fnToString","reIsHostCtor","./isFunction",79,80,"../internal/baseForIn","./isArguments",81,"typedArrayTags",82,"../internal/baseCopy",83,"nativeKeys","../internal/shimKeys",84,"isProto","skipIndexes","../internal/isIndex",85,"../internal/baseMerge","../internal/createAssigner",86,"../internal/toObject","./keys",87,88,"../internal/baseProperty","../internal/basePropertyDeep","../internal/isKey",89,"factory","amd","isString","noop","initialize","mock","$document","$location","$cancelAnimationFrame","cancelAnimationFrame","$requestAnimationFrame","requestAnimationFrame","parseTagAttrs","cell","classes","id","pair","getVirtualChildren","hasAttrs","children","assignAttrs","classAttr","attrName","hasOwn","parameterize","forKeys","dataToString","injectTextNode","parentElement","first","insertNode","nodeValue","flatten","insertBefore","childNodes","handleKeysDiffer","existing","cached","MOVE","from","nodes","INSERTION","actions","changes","sort","sortChanges","newCached","change","DELETION","clear","dummy","changeElement","maybeChanged","diffKeys","keysDiffer","cachedCell","diffArray","_","parentNode","indexOf","buildArrayKeys","guid","isDifferentEnough","dataAttrKeys","strategy","configContext","retain","maybeRecreateObject","onunload","controllers","controller","preventDefault","getObjectNamespace","xmlns","unloadCachedControllers","views","$old","pendingRequests","scheduleConfigsToBeCalled","configs","isNew","context","buildUpdatedNode","editable","hasKeys","setAttributes","build","contenteditable","intact","handleNonexistentNodes","$trusted","injectHTML","nodeName","voidElements","reattachNodes","parentTag","activeElement","innerHTML","nodeType","trim","handleTextNode","shouldReattach","valueOf","getSubArrayCount","item","buildArray","subArrayCount","shouldMaintainIdentities","cacheCount","makeCache","parentIndex","parentCache","constructNode","is","createElementNS","constructAttrs","constructChildren","reconstructCached","getController","cachedControllers","controllerIndex","updateLists","unloaders","checkView","forcing","subtree","markViews","$original","buildObject","b","copyStyleAttrs","dataAttr","cachedAttr","rule","setSingleAttr","autoredraw","setAttributeNS","shouldUseSetAttribute","trySetAttr","cachedAttrs","dataAttrs","unload","appendTextFragment","createRange","createContextualFragment","insertAdjacentHTML","nextSibling","isElement","startComputation","endFirstComputation","getCellCacheKey","nodeCache","gettersetter","store","component","ctrl","currentArgs","output","checkPrevented","root","isPrevented","roots","currentComponent","topComponent","components","removeRootElement","computePreRedrawHook","render","computePostRedrawHook","lastRedrawId","lastRedrawCallTime","endComputation","normalizeRoute","route","modes","mode","routeByValue","router","routeParams","queryStart","parseQueryString","matcher","values","decodeURIComponent","routeUnobtrusive","ctrlKey","metaKey","shiftKey","which","returnValue","currentTarget","setScroll","hash","scrollTo","buildQueryString","prefix","duplicates","cacheKey","cellCache","propify","initialValue","Deferred","onSuccess","onFailure","finish","REJECTED","next","deferred","RESOLVED","promiseValue","thennable","notThennable","count","fire","REJECTING","RESOLVING","handleJsonp","callbackKey","getTime","random","resp","createXhr","xhr","user","password","serialize","deserialize","maybeXhr","FormData","ajax","dataType","bindData","parameterizeUrl","token","AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR","deps","html","form","width","height","documentNode","replaceChild","forceRecreation","isDocumentRoot","String","FRAME_BUDGET","unloader","redrawing","force","withAttr","withAttrCallback","callbackThis","_this","getAttribute","currentRoute","redirect","isDefaultRoute","arg1","arg2","vdom","base","oldRoute","queryIndex","currentPath","replaceHistory","history","pushState","param","sync","synchronizer","pos","resolved","outstanding","background","extract","isJSONP","jsonp","toUpperCase","ev","response","unwrapSuccess","res","unwrapError",90,"cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","run","Item","fun","argv","versions","off","binding","cwd","chdir","dir","umask",91,"qs","sep","eq","regexp","maxKeys","kstr","vstr","k","idx","xs",92,"stringifyPrimitive","isFinite","objectKeys","ks",93,"decode","./decode","./encode"],"mappings":"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","file":"lucy/assets/js/script.min.js","sourcesContent":["(function () { var require = undefined; var define = undefined; (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar Lucy = require('./third-party/lucy.js');\n\nvar lucy = new Lucy(\n\t'https://mc4wp.com/',\n\t'DA9YFSTRKA',\n\t'ce1c93fad15be2b70e0aa0b1c2e52d8e',\n\t'wpkb_articles',\n\t[\n\t\t{\n\t\t\ttext: \"<span class=\\\"dashicons dashicons-book\\\"></span> Knowledge Base\",\n\t\t\thref: \"https://mc4wp.com/kb/\"\n\t\t},\n\t\t{\n\t\t\ttext: \"<span class=\\\"dashicons dashicons-editor-code\\\"></span> Code Reference\",\n\t\t\thref: \"http://developer.mc4wp.com/\"\n\t\t},\n\t\t{\n\t\t\ttext: \"<span class=\\\"dashicons dashicons-editor-break\\\"></span> Changelog\",\n\t\t\thref: \"http://mc4wp.com/documentation/changelog/\"\n\t\t}\n\n\t],\n\tlucy_config.email_link\n);\n},{\"./third-party/lucy.js\":2}],2:[function(require,module,exports){\n'use strict';\n\nvar lucy = function( site_url, algolia_app_id, algolia_api_key, algolia_index_name, links, contactLink ) {\n\n\t// make sure site url does not have trailing slash\n\tif( site_url.charAt(site_url.length - 1) == \"/\") {\n\t\tsite_url = site_url.substr(0, site_url.length - 1);\n\t}\n\n\tvar m = require('mithril');\n\tvar algoliasearch = require('algoliasearch');\n\tvar client = algoliasearch( algolia_app_id, algolia_api_key );\n\tvar index = client.initIndex( algolia_index_name );\n\n\tvar isOpen = false;\n\tvar loader, loadingInterval = 0;\n\tvar searchResults = m.prop([]);\n\tvar searchQuery = m.prop('');\n\tvar nothingFound = false;\n\n\t// create element\n\tvar element = document.createElement('div');\n\telement.setAttribute('class','lucy closed');\n\tdocument.body.appendChild(element);\n\n\tfunction addEvent(element,event,handler) {\n\t\tif(element.addEventListener){\n\t\t\telement.addEventListener(event,handler,false);\n\t\t} else {\n\t\t\telement.attachEvent('on' + event, handler);\n\t\t}\n\t}\n\n\tfunction removeEvent(element,event,handler){\n\t\tif(element.removeEventListener){\n\t\t\telement.removeEventListener(event,handler);\n\t\t} else {\n\t\t\telement.detachEvent('on' + event, handler);\n\t\t}\n\t}\n\n\tfunction maybeClose(event) {\n\t\tevent = event || window.event;\n\n\t\t// close when pressing ESCAPE\n\t\tif(event.type === 'keyup' && event.keyCode == 27 ) {\n\t\t\tclose();\n\t\t\treturn;\n\t\t}\n\n\t\t// close when clicking ANY element outside of Lucy\n\t\tvar clickedElement = event.target || event.srcElement;\n\t\tif(event.type === 'click' && element.contains && ! element.contains(clickedElement) )  {\n\t\t\tclose();\n\t\t}\n\t}\n\n\tfunction open() {\n\t\tif( isOpen ) return;\n\t\tisOpen = true;\n\t\tm.redraw();\n\n\t\telement.setAttribute('class', 'lucy open' );\n\n\t\taddEvent(document,'keyup',maybeClose);\n\t\taddEvent(document,'click',maybeClose);\n\t}\n\n\tfunction close() {\n\t\tif( ! isOpen ) return;\n\t\tisOpen = false;\n\t\treset();\n\n\t\telement.setAttribute('class', 'lucy closed' );\n\n\t\tremoveEvent(document,'keyup',maybeClose);\n\t\tremoveEvent(document,'click',maybeClose);\n\t}\n\n\tfunction reset() {\n\t\tsearchQuery('');\n\t\tsearchResults([]);\n\t\tnothingFound = false;\n\t\tm.redraw();\n\t}\n\n\tfunction listenForInput(event) {\n\t\tevent = event || window.event;\n\n\t\t// revert back to list of links when empty\n\t\tif( this.value === '' && searchQuery() !== '' ) {\n\t\t\treturn reset();\n\t\t}\n\n\t\tsearchQuery(this.value);\n\n\t\t// perform search on [ENTER]\n\t\tif(event.keyCode == 13 ) {\n\t\t\treturn search(this.value);\n\t\t}\n\t}\n\n\tvar module = {};\n\tmodule.view = function() {\n\t\tvar content;\n\n\t\treturn [\n\t\t\tm('div.lucy--content', { style: { display: isOpen ? 'block' : 'none' } }, [\n\t\t\t\tm('span.close-icon', { onclick: close }, \"\"),\n\t\t\t\tm('div.header', [\n\t\t\t\t\tm('h4', 'Looking for help?'),\n\t\t\t\t\tm('div.search-form', {\n\t\t\t\t\t\tonsubmit: search\n\t\t\t\t\t}, [\n\t\t\t\t\t\tm('input', {\n\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\tvalue: searchQuery(),\n\t\t\t\t\t\t\tonkeyup: listenForInput,\n\t\t\t\t\t\t\tconfig: function(el) { isOpen && el.focus(); },\n\t\t\t\t\t\t\tplaceholder: 'What are you looking for?'\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tm('span', {\n\t\t\t\t\t\t\t\"class\": 'loader',\n\t\t\t\t\t\t\tconfig: function(el) {\n\t\t\t\t\t\t\t\tloader = el;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tm('input', { type: 'submit' })\n\t\t\t\t\t])\n\t\t\t\t]),\n\t\t\t\tm('div.list', [\n\n\t\t\t\t\tm('div.links', { style: { display: searchQuery().length > 0 ? 'none' : 'block' } }, links.map(function(l) {\n\t\t\t\t\t\treturn m('a', { href: l.href }, m.trust(l.text) );\n\t\t\t\t\t})),\n\n\n\t\t\t\t\tm('div.search-results', [\n\t\t\t\t\t\tm(\"em.search-pending\", { style: { display: ( searchQuery().length > 0 && searchResults().length == 0 ) ? 'block' : 'none' } }, ( nothingFound ? \"Nothing found for \" : \"Hit [ENTER] to search for\" ) + \"\\\"\"+ searchQuery() +\"\\\"..\"),\n\t\t\t\t\t\tsearchResults().map(function(l) {\n\t\t\t\t\t\t\treturn m('a', { href: l.href }, m.trust(l.text) );\n\t\t\t\t\t\t})\n\t\t\t\t\t])\n\n\t\t\t\t]),\n\t\t\t\tm('div.footer', [\n\t\t\t\t\tm(\"span\", \"Can't find the answer you're looking for?\"),\n\t\t\t\t\tm(\"a\", { \"class\": 'button button-primary', href: contactLink, target: \"_blank\" }, \"Contact Support\")\n\t\t\t\t])\n\t\t\t]),\n\t\t\tm('span.lucy-button', {\n\t\t\t\tonclick: open,\n\t\t\t\tstyle: { display: isOpen ? 'none' : 'block' }\n\t\t\t}, [\n\t\t\t\tm('span.lucy-button-text',  \"Need help?\")\n\t\t\t])\n\t\t];\n\t};\n\n\tfunction showResults(results) {\n\n\t\tif( results.length ) {\n\t\t\tvar parser = document.createElement('a');\n\t\t\tsearchResults(results.map(function(r) {\n\t\t\t\tparser.href = r.path;\n\t\t\t\tvar url = site_url + parser.pathname + ( parser.search || '' );\n\t\t\t\treturn { href: url, text: r._highlightResult.title.value};\n\t\t\t}));\n\t\t} else {\n\t\t\tnothingFound = true;\n\t\t}\n\n\t\tm.redraw();\n\t}\n\n\n\tfunction search(query) {\n\n\t\t// start loader\n\t\tloader.innerText = '.';\n\t\tloadingInterval = window.setInterval(function() {\n\t\t\tloader.innerText += '.';\n\n\t\t\tif( loader.innerText.length > 3 ) {\n\t\t\t\tloader.innerText = '.';\n\t\t\t}\n\t\t}, 333 );\n\n\t\t// search\n\t\tindex.search( query, { hitsPerPage: 5 }, function( error, result ) {\n\n\t\t\tif( error ) {\n\t\t\t\tconsole.log(error);\n\t\t\t } else {\n\t\t\t\tshowResults(result.hits);\n\t\t\t}\n\n\t\t\t/* clear loader */\n\t\t\tloader.innerText = '';\n\t\t\twindow.clearInterval(loadingInterval);\n\t\t} );\n\n\t}\n\n\tm.mount(element,module);\n};\n\nmodule.exports = lucy;\n},{\"algoliasearch\":6,\"mithril\":89}],3:[function(require,module,exports){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  // long, short were \"future reserved words in js\", YUI compressor fail on them\n  // https://github.com/algolia/algoliasearch-client-js/issues/113#issuecomment-111978606\n  // https://github.com/yui/yuicompressor/issues/47\n  // https://github.com/rauchg/ms.js/pull/40\n  return options['long']\n    ? _long(val)\n    : _short(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = '' + str;\n  if (str.length > 10000) return;\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction _short(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction _long(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nmodule.exports = AlgoliaSearch;\n\nvar errors = require('./errors');\nvar buildSearchMethod = require('./buildSearchMethod.js');\n\n// We will always put the API KEY in the JSON body in case of too long API KEY\nvar MAX_API_KEY_LENGTH = 500;\n\n/*\n * Algolia Search library initialization\n * https://www.algolia.com/\n *\n * @param {string} applicationID - Your applicationID, found in your dashboard\n * @param {string} apiKey - Your API key, found in your dashboard\n * @param {Object} [opts]\n * @param {number} [opts.timeout=2000] - The request timeout set in milliseconds,\n * another request will be issued after this timeout\n * @param {string} [opts.protocol='http:'] - The protocol used to query Algolia Search API.\n *                                        Set to 'https:' to force using https.\n *                                        Default to document.location.protocol in browsers\n * @param {Object|Array} [opts.hosts={\n *           read: [this.applicationID + '-dsn.algolia.net'].concat([\n *             this.applicationID + '-1.algolianet.com',\n *             this.applicationID + '-2.algolianet.com',\n *             this.applicationID + '-3.algolianet.com']\n *           ]),\n *           write: [this.applicationID + '.algolia.net'].concat([\n *             this.applicationID + '-1.algolianet.com',\n *             this.applicationID + '-2.algolianet.com',\n *             this.applicationID + '-3.algolianet.com']\n *           ]) - The hosts to use for Algolia Search API.\n *           If you provide them, you will less benefit from our HA implementation\n */\nfunction AlgoliaSearch(applicationID, apiKey, opts) {\n  var debug = require('debug')('algoliasearch');\n\n  var clone = require('lodash/lang/clone');\n  var isArray = require('lodash/lang/isArray');\n  var map = require('lodash/collection/map');\n\n  var usage = 'Usage: algoliasearch(applicationID, apiKey, opts)';\n\n  if (!applicationID) {\n    throw new errors.AlgoliaSearchError('Please provide an application ID. ' + usage);\n  }\n\n  if (!apiKey) {\n    throw new errors.AlgoliaSearchError('Please provide an API key. ' + usage);\n  }\n\n  this.applicationID = applicationID;\n  this.apiKey = apiKey;\n\n  var defaultHosts = [\n    this.applicationID + '-1.algolianet.com',\n    this.applicationID + '-2.algolianet.com',\n    this.applicationID + '-3.algolianet.com'\n  ];\n  this.hosts = {\n    read: [],\n    write: []\n  };\n\n  this.hostIndex = {\n    read: 0,\n    write: 0\n  };\n\n  opts = opts || {};\n\n  var protocol = opts.protocol || 'https:';\n  var timeout = opts.timeout === undefined ? 2000 : opts.timeout;\n\n  // while we advocate for colon-at-the-end values: 'http:' for `opts.protocol`\n  // we also accept `http` and `https`. It's a common error.\n  if (!/:$/.test(protocol)) {\n    protocol = protocol + ':';\n  }\n\n  if (opts.protocol !== 'http:' && opts.protocol !== 'https:') {\n    throw new errors.AlgoliaSearchError('protocol must be `http:` or `https:` (was `' + opts.protocol + '`)');\n  }\n\n  // no hosts given, add defaults\n  if (!opts.hosts) {\n    this.hosts.read = [this.applicationID + '-dsn.algolia.net'].concat(defaultHosts);\n    this.hosts.write = [this.applicationID + '.algolia.net'].concat(defaultHosts);\n  } else if (isArray(opts.hosts)) {\n    this.hosts.read = clone(opts.hosts);\n    this.hosts.write = clone(opts.hosts);\n  } else {\n    this.hosts.read = clone(opts.hosts.read);\n    this.hosts.write = clone(opts.hosts.write);\n  }\n\n  // add protocol and lowercase hosts\n  this.hosts.read = map(this.hosts.read, prepareHost(protocol));\n  this.hosts.write = map(this.hosts.write, prepareHost(protocol));\n  this.requestTimeout = timeout;\n\n  this.extraHeaders = [];\n\n  // In some situations you might want to warm the cache\n  this.cache = opts._cache || {};\n\n  this._ua = opts._ua;\n  this._useCache = opts._useCache === undefined || opts._cache ? true : opts._useCache;\n  this._useFallback = opts.useFallback === undefined ? true : opts.useFallback;\n\n  this._setTimeout = opts._setTimeout;\n\n  debug('init done, %j', this);\n}\n\nAlgoliaSearch.prototype = {\n  /*\n   * Delete an index\n   *\n   * @param indexName the name of index to delete\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer that contains the task ID\n   */\n  deleteIndex: function(indexName, callback) {\n    return this._jsonRequest({\n      method: 'DELETE',\n      url: '/1/indexes/' + encodeURIComponent(indexName),\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /**\n   * Move an existing index.\n   * @param srcIndexName the name of index to copy.\n   * @param dstIndexName the new index name that will contains a copy of\n   * srcIndexName (destination will be overriten if it already exist).\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer that contains the task ID\n   */\n  moveIndex: function(srcIndexName, dstIndexName, callback) {\n    var postObj = {\n      operation: 'move', destination: dstIndexName\n    };\n    return this._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(srcIndexName) + '/operation',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /**\n   * Copy an existing index.\n   * @param srcIndexName the name of index to copy.\n   * @param dstIndexName the new index name that will contains a copy\n   * of srcIndexName (destination will be overriten if it already exist).\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer that contains the task ID\n   */\n  copyIndex: function(srcIndexName, dstIndexName, callback) {\n    var postObj = {\n      operation: 'copy', destination: dstIndexName\n    };\n    return this._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(srcIndexName) + '/operation',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /**\n   * Return last log entries.\n   * @param offset Specify the first entry to retrieve (0-based, 0 is the most recent log entry).\n   * @param length Specify the maximum number of entries to retrieve starting\n   * at offset. Maximum allowed value: 1000.\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer that contains the task ID\n   */\n  getLogs: function(offset, length, callback) {\n    if (arguments.length === 0 || typeof offset === 'function') {\n      // getLogs([cb])\n      callback = offset;\n      offset = 0;\n      length = 10;\n    } else if (arguments.length === 1 || typeof length === 'function') {\n      // getLogs(1, [cb)]\n      callback = length;\n      length = 10;\n    }\n\n    return this._jsonRequest({\n      method: 'GET',\n      url: '/1/logs?offset=' + offset + '&length=' + length,\n      hostType: 'read',\n      callback: callback\n    });\n  },\n  /*\n   * List all existing indexes (paginated)\n   *\n   * @param page The page to retrieve, starting at 0.\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with index list\n   */\n  listIndexes: function(page, callback) {\n    var params = '';\n\n    if (page === undefined || typeof page === 'function') {\n      callback = page;\n    } else {\n      params = '?page=' + page;\n    }\n\n    return this._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes' + params,\n      hostType: 'read',\n      callback: callback\n    });\n  },\n\n  /*\n   * Get the index object initialized\n   *\n   * @param indexName the name of index\n   * @param callback the result callback with one argument (the Index instance)\n   */\n  initIndex: function(indexName) {\n    return new this.Index(this, indexName);\n  },\n  /*\n   * List all existing user keys with their associated ACLs\n   *\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with user keys list\n   */\n  listUserKeys: function(callback) {\n    return this._jsonRequest({\n      method: 'GET',\n      url: '/1/keys',\n      hostType: 'read',\n      callback: callback\n    });\n  },\n  /*\n   * Get ACL of a user key\n   *\n   * @param key\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with user keys list\n   */\n  getUserKeyACL: function(key, callback) {\n    return this._jsonRequest({\n      method: 'GET',\n      url: '/1/keys/' + key,\n      hostType: 'read',\n      callback: callback\n    });\n  },\n  /*\n   * Delete an existing user key\n   * @param key\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with user keys list\n   */\n  deleteUserKey: function(key, callback) {\n    return this._jsonRequest({\n      method: 'DELETE',\n      url: '/1/keys/' + key,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Add a new global API key\n   *\n   * @param {string[]} acls - The list of ACL for this key. Defined by an array of strings that\n   *   can contains the following values:\n   *     - search: allow to search (https and http)\n   *     - addObject: allows to add/update an object in the index (https only)\n   *     - deleteObject : allows to delete an existing object (https only)\n   *     - deleteIndex : allows to delete index content (https only)\n   *     - settings : allows to get index settings (https only)\n   *     - editSettings : allows to change index settings (https only)\n   * @param {Object} [params] - Optionnal parameters to set for the key\n   * @param {number} params.validity - Number of seconds after which the key will be automatically removed (0 means no time limit for this key)\n   * @param {number} params.maxQueriesPerIPPerHour - Number of API calls allowed from an IP address per hour\n   * @param {number} params.maxHitsPerQuery - Number of hits this API key can retrieve in one call\n   * @param {string[]} params.indexes - Allowed targeted indexes for this key\n   * @param {string} params.description - A description for your key\n   * @param {string[]} params.referers - A list of authorized referers\n   * @param {Object} params.queryParameters - Force the key to use specific query parameters\n   * @param {Function} callback - The result callback called with two arguments\n   *   error: null or Error('message')\n   *   content: the server answer with user keys list\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * client.addUserKey(['search'], {\n   *   validity: 300,\n   *   maxQueriesPerIPPerHour: 2000,\n   *   maxHitsPerQuery: 3,\n   *   indexes: ['fruits'],\n   *   description: 'Eat three fruits',\n   *   referers: ['*.algolia.com'],\n   *   queryParameters: {\n   *     tagFilters: ['public'],\n   *   }\n   * })\n   * @see {@link https://www.algolia.com/doc/rest_api#AddKey|Algolia REST API Documentation}\n   */\n  addUserKey: function(acls, params, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: client.addUserKey(arrayOfAcls[, params, callback])';\n\n    if (!isArray(acls)) {\n      throw new Error(usage);\n    }\n\n    if (arguments.length === 1 || typeof params === 'function') {\n      callback = params;\n      params = null;\n    }\n\n    var postObj = {\n      acl: acls\n    };\n\n    if (params) {\n      postObj.validity = params.validity;\n      postObj.maxQueriesPerIPPerHour = params.maxQueriesPerIPPerHour;\n      postObj.maxHitsPerQuery = params.maxHitsPerQuery;\n      postObj.indexes = params.indexes;\n      postObj.description = params.description;\n\n      if (params.queryParameters) {\n        postObj.queryParameters = this._getSearchParams(params.queryParameters, '');\n      }\n\n      postObj.referers = params.referers;\n    }\n\n    return this._jsonRequest({\n      method: 'POST',\n      url: '/1/keys',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /**\n   * Add a new global API key\n   * @deprecated Please use client.addUserKey()\n   */\n  addUserKeyWithValidity: deprecate(function(acls, params, callback) {\n    return this.addUserKey(acls, params, callback);\n  }, deprecatedMessage('client.addUserKeyWithValidity()', 'client.addUserKey()')),\n\n  /**\n   * Update an existing API key\n   * @param {string} key - The key to update\n   * @param {string[]} acls - The list of ACL for this key. Defined by an array of strings that\n   *   can contains the following values:\n   *     - search: allow to search (https and http)\n   *     - addObject: allows to add/update an object in the index (https only)\n   *     - deleteObject : allows to delete an existing object (https only)\n   *     - deleteIndex : allows to delete index content (https only)\n   *     - settings : allows to get index settings (https only)\n   *     - editSettings : allows to change index settings (https only)\n   * @param {Object} [params] - Optionnal parameters to set for the key\n   * @param {number} params.validity - Number of seconds after which the key will be automatically removed (0 means no time limit for this key)\n   * @param {number} params.maxQueriesPerIPPerHour - Number of API calls allowed from an IP address per hour\n   * @param {number} params.maxHitsPerQuery - Number of hits this API key can retrieve in one call\n   * @param {string[]} params.indexes - Allowed targeted indexes for this key\n   * @param {string} params.description - A description for your key\n   * @param {string[]} params.referers - A list of authorized referers\n   * @param {Object} params.queryParameters - Force the key to use specific query parameters\n   * @param {Function} callback - The result callback called with two arguments\n   *   error: null or Error('message')\n   *   content: the server answer with user keys list\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * client.updateUserKey('APIKEY', ['search'], {\n   *   validity: 300,\n   *   maxQueriesPerIPPerHour: 2000,\n   *   maxHitsPerQuery: 3,\n   *   indexes: ['fruits'],\n   *   description: 'Eat three fruits',\n   *   referers: ['*.algolia.com'],\n   *   queryParameters: {\n   *     tagFilters: ['public'],\n   *   }\n   * })\n   * @see {@link https://www.algolia.com/doc/rest_api#UpdateIndexKey|Algolia REST API Documentation}\n   */\n  updateUserKey: function(key, acls, params, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: client.updateUserKey(key, arrayOfAcls[, params, callback])';\n\n    if (!isArray(acls)) {\n      throw new Error(usage);\n    }\n\n    if (arguments.length === 2 || typeof params === 'function') {\n      callback = params;\n      params = null;\n    }\n\n    var putObj = {\n      acl: acls\n    };\n\n    if (params) {\n      putObj.validity = params.validity;\n      putObj.maxQueriesPerIPPerHour = params.maxQueriesPerIPPerHour;\n      putObj.maxHitsPerQuery = params.maxHitsPerQuery;\n      putObj.indexes = params.indexes;\n      putObj.description = params.description;\n\n      if (params.queryParameters) {\n        putObj.queryParameters = this._getSearchParams(params.queryParameters, '');\n      }\n\n      putObj.referers = params.referers;\n    }\n\n    return this._jsonRequest({\n      method: 'PUT',\n      url: '/1/keys/' + key,\n      body: putObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n\n  /**\n   * Set the extra security tagFilters header\n   * @param {string|array} tags The list of tags defining the current security filters\n   */\n  setSecurityTags: function(tags) {\n    if (Object.prototype.toString.call(tags) === '[object Array]') {\n      var strTags = [];\n      for (var i = 0; i < tags.length; ++i) {\n        if (Object.prototype.toString.call(tags[i]) === '[object Array]') {\n          var oredTags = [];\n          for (var j = 0; j < tags[i].length; ++j) {\n            oredTags.push(tags[i][j]);\n          }\n          strTags.push('(' + oredTags.join(',') + ')');\n        } else {\n          strTags.push(tags[i]);\n        }\n      }\n      tags = strTags.join(',');\n    }\n\n    this.securityTags = tags;\n  },\n\n  /**\n   * Set the extra user token header\n   * @param {string} userToken The token identifying a uniq user (used to apply rate limits)\n   */\n  setUserToken: function(userToken) {\n    this.userToken = userToken;\n  },\n\n  /**\n   * Initialize a new batch of search queries\n   * @deprecated use client.search()\n   */\n  startQueriesBatch: deprecate(function startQueriesBatchDeprecated() {\n    this._batch = [];\n  }, deprecatedMessage('client.startQueriesBatch()', 'client.search()')),\n\n  /**\n   * Add a search query in the batch\n   * @deprecated use client.search()\n   */\n  addQueryInBatch: deprecate(function addQueryInBatchDeprecated(indexName, query, args) {\n    this._batch.push({\n      indexName: indexName,\n      query: query,\n      params: args\n    });\n  }, deprecatedMessage('client.addQueryInBatch()', 'client.search()')),\n\n  /**\n   * Clear all queries in client's cache\n   * @return undefined\n   */\n  clearCache: function() {\n    this.cache = {};\n  },\n\n  /**\n   * Launch the batch of queries using XMLHttpRequest.\n   * @deprecated use client.search()\n   */\n  sendQueriesBatch: deprecate(function sendQueriesBatchDeprecated(callback) {\n    return this.search(this._batch, callback);\n  }, deprecatedMessage('client.sendQueriesBatch()', 'client.search()')),\n\n  /**\n  * Set the number of milliseconds a request can take before automatically being terminated.\n  *\n  * @param {Number} milliseconds\n  */\n  setRequestTimeout: function(milliseconds) {\n    if (milliseconds) {\n      this.requestTimeout = parseInt(milliseconds, 10);\n    }\n  },\n\n  /**\n   * Search through multiple indices at the same time\n   * @param  {Object[]}   queries  An array of queries you want to run.\n   * @param {string} queries[].indexName The index name you want to target\n   * @param {string} [queries[].query] The query to issue on this index. Can also be passed into `params`\n   * @param {Object} queries[].params Any search param like hitsPerPage, ..\n   * @param  {Function} callback Callback to be called\n   * @return {Promise|undefined} Returns a promise if no callback given\n   */\n  search: function(queries, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var map = require('lodash/collection/map');\n\n    var usage = 'Usage: client.search(arrayOfQueries[, callback])';\n\n    if (!isArray(queries)) {\n      throw new Error(usage);\n    }\n\n    var client = this;\n\n    var postObj = {\n      requests: map(queries, function prepareRequest(query) {\n        var params = '';\n\n        // allow query.query\n        // so we are mimicing the index.search(query, params) method\n        // {indexName:, query:, params:}\n        if (query.query !== undefined) {\n          params += 'query=' + encodeURIComponent(query.query);\n        }\n\n        return {\n          indexName: query.indexName,\n          params: client._getSearchParams(query.params, params)\n        };\n      })\n    };\n\n    var JSONPParams = map(postObj.requests, function prepareJSONPParams(request, requestId) {\n      return requestId + '=' +\n        encodeURIComponent(\n          '/1/indexes/' + encodeURIComponent(request.indexName) + '?' +\n          request.params\n        );\n    }).join('&');\n\n    return this._jsonRequest({\n      cache: this.cache,\n      method: 'POST',\n      url: '/1/indexes/*/queries',\n      body: postObj,\n      hostType: 'read',\n      fallback: {\n        method: 'GET',\n        url: '/1/indexes/*',\n        body: {\n          params: JSONPParams\n        }\n      },\n      callback: callback\n    });\n  },\n\n  /**\n   * Perform write operations accross multiple indexes.\n   *\n   * To reduce the amount of time spent on network round trips,\n   * you can create, update, or delete several objects in one call,\n   * using the batch endpoint (all operations are done in the given order).\n   *\n   * Available actions:\n   *   - addObject\n   *   - updateObject\n   *   - partialUpdateObject\n   *   - partialUpdateObjectNoCreate\n   *   - deleteObject\n   *\n   * https://www.algolia.com/doc/rest_api#Indexes\n   * @param  {Object[]} operations An array of operations to perform\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * client.batch([{\n   *   action: 'addObject',\n   *   indexName: 'clients',\n   *   body: {\n   *     name: 'Bill'\n   *   }\n   * }, {\n   *   action: 'udpateObject',\n   *   indexName: 'fruits',\n   *   body: {\n   *     objectID: '29138',\n   *     name: 'banana'\n   *   }\n   * }], cb)\n   */\n  batch: function(operations, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: client.batch(operations[, callback])';\n\n    if (!isArray(operations)) {\n      throw new Error(usage);\n    }\n\n    return this._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/*/batch',\n      body: {\n        requests: operations\n      },\n      hostType: 'write',\n      callback: callback\n    });\n  },\n\n  // environment specific methods\n  destroy: notImplemented,\n  enableRateLimitForward: notImplemented,\n  disableRateLimitForward: notImplemented,\n  useSecuredAPIKey: notImplemented,\n  disableSecuredAPIKey: notImplemented,\n  generateSecuredApiKey: notImplemented,\n  /*\n   * Index class constructor.\n   * You should not use this method directly but use initIndex() function\n   */\n  Index: function(algoliasearch, indexName) {\n    this.indexName = indexName;\n    this.as = algoliasearch;\n    this.typeAheadArgs = null;\n    this.typeAheadValueOption = null;\n\n    // make sure every index instance has it's own cache\n    this.cache = {};\n  },\n  /**\n  * Add an extra field to the HTTP request\n  *\n  * @param name the header field name\n  * @param value the header field value\n  */\n  setExtraHeader: function(name, value) {\n    this.extraHeaders.push({\n      name: name.toLowerCase(), value: value\n    });\n  },\n\n  /**\n  * Augment sent x-algolia-agent with more data, each agent part\n  * is automatically separated from the others by a semicolon;\n  *\n  * @param algoliaAgent the agent to add\n  */\n  addAlgoliaAgent: function(algoliaAgent) {\n    this._ua += ';' + algoliaAgent;\n  },\n\n  /*\n   * Wrapper that try all hosts to maximize the quality of service\n   */\n  _jsonRequest: function(initialOpts) {\n    var requestDebug = require('debug')('algoliasearch:' + initialOpts.url);\n\n    var body;\n    var cache = initialOpts.cache;\n    var client = this;\n    var tries = 0;\n    var usingFallback = false;\n    var hasFallback = client._useFallback && client._request.fallback && initialOpts.fallback;\n    var headers;\n\n    if (this.apiKey.length > MAX_API_KEY_LENGTH && initialOpts.body !== undefined && initialOpts.body.params !== undefined) {\n      initialOpts.body.apiKey = this.apiKey;\n      headers = this._computeRequestHeaders(false);\n    } else {\n      headers = this._computeRequestHeaders();\n    }\n\n    if (initialOpts.body !== undefined) {\n      body = safeJSONStringify(initialOpts.body);\n    }\n\n    requestDebug('request start');\n\n    function doRequest(requester, reqOpts) {\n      var cacheID;\n\n      if (client._useCache) {\n        cacheID = initialOpts.url;\n      }\n\n      // as we sometime use POST requests to pass parameters (like query='aa'),\n      // the cacheID must also include the body to be different between calls\n      if (client._useCache && body) {\n        cacheID += '_body_' + reqOpts.body;\n      }\n\n      // handle cache existence\n      if (client._useCache && cache && cache[cacheID] !== undefined) {\n        requestDebug('serving response from cache');\n        return client._promise.resolve(JSON.parse(cache[cacheID]));\n      }\n\n      // if we reached max tries\n      if (tries >= client.hosts[initialOpts.hostType].length) {\n        if (!hasFallback || usingFallback) {\n          requestDebug('could not get any response');\n          // then stop\n          return client._promise.reject(new errors.AlgoliaSearchError(\n            'Cannot connect to the AlgoliaSearch API.' +\n            ' Send an email to support@algolia.com to report and resolve the issue.' +\n            ' Application id was: ' + client.applicationID\n          ));\n        }\n\n        requestDebug('switching to fallback');\n\n        // let's try the fallback starting from here\n        tries = 0;\n\n        // method, url and body are fallback dependent\n        reqOpts.method = initialOpts.fallback.method;\n        reqOpts.url = initialOpts.fallback.url;\n        reqOpts.jsonBody = initialOpts.fallback.body;\n        if (reqOpts.jsonBody) {\n          reqOpts.body = safeJSONStringify(reqOpts.jsonBody);\n        }\n        // re-compute headers, they could be omitting the API KEY\n        headers = client._computeRequestHeaders();\n\n        reqOpts.timeout = client.requestTimeout * (tries + 1);\n        client.hostIndex[initialOpts.hostType] = 0;\n        usingFallback = true; // the current request is now using fallback\n        return doRequest(client._request.fallback, reqOpts);\n      }\n\n      var url = client.hosts[initialOpts.hostType][client.hostIndex[initialOpts.hostType]] + reqOpts.url;\n      var options = {\n        body: reqOpts.body,\n        jsonBody: reqOpts.jsonBody,\n        method: reqOpts.method,\n        headers: headers,\n        timeout: reqOpts.timeout,\n        debug: requestDebug\n      };\n\n      requestDebug('method: %s, url: %s, headers: %j, timeout: %d',\n        options.method, url, options.headers, options.timeout);\n\n      if (requester === client._request.fallback) {\n        requestDebug('using fallback');\n      }\n\n      // `requester` is any of this._request or this._request.fallback\n      // thus it needs to be called using the client as context\n      return requester.call(client, url, options).then(success, tryFallback);\n\n      function success(httpResponse) {\n        // compute the status of the response,\n        //\n        // When in browser mode, using XDR or JSONP, we have no statusCode available\n        // So we rely on our API response `status` property.\n        // But `waitTask` can set a `status` property which is not the statusCode (it's the task status)\n        // So we check if there's a `message` along `status` and it means it's an error\n        //\n        // That's the only case where we have a response.status that's not the http statusCode\n        var status = httpResponse && httpResponse.body && httpResponse.body.message && httpResponse.body.status ||\n\n          // this is important to check the request statusCode AFTER the body eventual\n          // statusCode because some implementations (jQuery XDomainRequest transport) may\n          // send statusCode 200 while we had an error\n          httpResponse.statusCode ||\n\n          // When in browser mode, using XDR or JSONP\n          // we default to success when no error (no response.status && response.message)\n          // If there was a JSON.parse() error then body is null and it fails\n          httpResponse && httpResponse.body && 200;\n\n        requestDebug('received response: statusCode: %s, computed statusCode: %d, headers: %j',\n          httpResponse.statusCode, status, httpResponse.headers);\n\n        var ok = status === 200 || status === 201;\n        var retry = !ok && Math.floor(status / 100) !== 4 && Math.floor(status / 100) !== 1;\n\n        if (client._useCache && ok && cache) {\n          cache[cacheID] = httpResponse.responseText;\n        }\n\n        if (ok) {\n          return httpResponse.body;\n        }\n\n        if (retry) {\n          tries += 1;\n          return retryRequest();\n        }\n\n        var unrecoverableError = new errors.AlgoliaSearchError(\n          httpResponse.body && httpResponse.body.message\n        );\n\n        return client._promise.reject(unrecoverableError);\n      }\n\n      function tryFallback(err) {\n        // error cases:\n        //  While not in fallback mode:\n        //    - CORS not supported\n        //    - network error\n        //  While in fallback mode:\n        //    - timeout\n        //    - network error\n        //    - badly formatted JSONP (script loaded, did not call our callback)\n        //  In both cases:\n        //    - uncaught exception occurs (TypeError)\n        requestDebug('error: %s, stack: %s', err.message, err.stack);\n\n        if (!(err instanceof errors.AlgoliaSearchError)) {\n          err = new errors.Unknown(err && err.message, err);\n        }\n\n        tries += 1;\n\n        // stop the request implementation when:\n        if (\n          // we did not generate this error,\n          // it comes from a throw in some other piece of code\n          err instanceof errors.Unknown ||\n\n          // server sent unparsable JSON\n          err instanceof errors.UnparsableJSON ||\n\n          // max tries and already using fallback or no fallback\n          tries >= client.hosts[initialOpts.hostType].length &&\n          (usingFallback || !hasFallback)) {\n          // stop request implementation for this command\n          return client._promise.reject(err);\n        }\n\n        client.hostIndex[initialOpts.hostType] = ++client.hostIndex[initialOpts.hostType] % client.hosts[initialOpts.hostType].length;\n\n        if (err instanceof errors.RequestTimeout) {\n          return retryRequest();\n        } else if (!usingFallback) {\n          // next request loop, force using fallback for this request\n          tries = Infinity;\n        }\n\n        return doRequest(requester, reqOpts);\n      }\n\n      function retryRequest() {\n        client.hostIndex[initialOpts.hostType] = ++client.hostIndex[initialOpts.hostType] % client.hosts[initialOpts.hostType].length;\n        reqOpts.timeout = client.requestTimeout * (tries + 1);\n        return doRequest(requester, reqOpts);\n      }\n    }\n\n    var promise = doRequest(\n      client._request, {\n        url: initialOpts.url,\n        method: initialOpts.method,\n        body: body,\n        jsonBody: initialOpts.body,\n        timeout: client.requestTimeout * (tries + 1)\n      }\n    );\n\n    // either we have a callback\n    // either we are using promises\n    if (initialOpts.callback) {\n      promise.then(function okCb(content) {\n        exitPromise(function() {\n          initialOpts.callback(null, content);\n        }, client._setTimeout || setTimeout);\n      }, function nookCb(err) {\n        exitPromise(function() {\n          initialOpts.callback(err);\n        }, client._setTimeout || setTimeout);\n      });\n    } else {\n      return promise;\n    }\n  },\n\n  /*\n  * Transform search param object in query string\n  */\n  _getSearchParams: function(args, params) {\n    if (args === undefined || args === null) {\n      return params;\n    }\n    for (var key in args) {\n      if (key !== null && args[key] !== undefined && args.hasOwnProperty(key)) {\n        params += params === '' ? '' : '&';\n        params += key + '=' + encodeURIComponent(Object.prototype.toString.call(args[key]) === '[object Array]' ? safeJSONStringify(args[key]) : args[key]);\n      }\n    }\n    return params;\n  },\n\n  _computeRequestHeaders: function(withAPIKey) {\n    var forEach = require('lodash/collection/forEach');\n\n    var requestHeaders = {\n      'x-algolia-agent': this._ua,\n      'x-algolia-application-id': this.applicationID\n    };\n\n    // browser will inline headers in the url, node.js will use http headers\n    // but in some situations, the API KEY will be too long (big secured API keys)\n    // so if the request is a POST and the KEY is very long, we will be asked to not put\n    // it into headers but in the JSON body\n    if (withAPIKey !== false) {\n      requestHeaders['x-algolia-api-key'] = this.apiKey;\n    }\n\n    if (this.userToken) {\n      requestHeaders['x-algolia-usertoken'] = this.userToken;\n    }\n\n    if (this.securityTags) {\n      requestHeaders['x-algolia-tagfilters'] = this.securityTags;\n    }\n\n    if (this.extraHeaders) {\n      forEach(this.extraHeaders, function addToRequestHeaders(header) {\n        requestHeaders[header.name] = header.value;\n      });\n    }\n\n    return requestHeaders;\n  }\n};\n\n/*\n * Contains all the functions related to one index\n * You should use AlgoliaSearch.initIndex(indexName) to retrieve this object\n */\nAlgoliaSearch.prototype.Index.prototype = {\n  /*\n   * Clear all queries in cache\n   */\n  clearCache: function() {\n    this.cache = {};\n  },\n  /*\n   * Add an object in this index\n   *\n   * @param content contains the javascript object to add inside the index\n   * @param objectID (optional) an objectID you want to attribute to this object\n   * (if the attribute already exist the old object will be overwrite)\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that contains 3 elements: createAt, taskId and objectID\n   */\n  addObject: function(content, objectID, callback) {\n    var indexObj = this;\n\n    if (arguments.length === 1 || typeof objectID === 'function') {\n      callback = objectID;\n      objectID = undefined;\n    }\n\n    return this.as._jsonRequest({\n      method: objectID !== undefined ?\n        'PUT' : // update or create\n        'POST', // create (API generates an objectID)\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + // create\n        (objectID !== undefined ? '/' + encodeURIComponent(objectID) : ''), // update or create\n      body: content,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Add several objects\n   *\n   * @param objects contains an array of objects to add\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that updateAt and taskID\n   */\n  addObjects: function(objects, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: index.addObjects(arrayOfObjects[, callback])';\n\n    if (!isArray(objects)) {\n      throw new Error(usage);\n    }\n\n    var indexObj = this;\n    var postObj = {\n      requests: []\n    };\n    for (var i = 0; i < objects.length; ++i) {\n      var request = {\n        action: 'addObject',\n        body: objects[i]\n      };\n      postObj.requests.push(request);\n    }\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/batch',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Get an object from this index\n   *\n   * @param objectID the unique identifier of the object to retrieve\n   * @param attrs (optional) if set, contains the array of attribute names to retrieve\n   * @param callback (optional) the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the object to retrieve or the error message if a failure occured\n   */\n  getObject: function(objectID, attrs, callback) {\n    var indexObj = this;\n\n    if (arguments.length === 1 || typeof attrs === 'function') {\n      callback = attrs;\n      attrs = undefined;\n    }\n\n    var params = '';\n    if (attrs !== undefined) {\n      params = '?attributes=';\n      for (var i = 0; i < attrs.length; ++i) {\n        if (i !== 0) {\n          params += ',';\n        }\n        params += attrs[i];\n      }\n    }\n\n    return this.as._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/' + encodeURIComponent(objectID) + params,\n      hostType: 'read',\n      callback: callback\n    });\n  },\n\n  /*\n   * Get several objects from this index\n   *\n   * @param objectIDs the array of unique identifier of objects to retrieve\n   */\n  getObjects: function(objectIDs, attributesToRetrieve, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var map = require('lodash/collection/map');\n\n    var usage = 'Usage: index.getObjects(arrayOfObjectIDs[, callback])';\n\n    if (!isArray(objectIDs)) {\n      throw new Error(usage);\n    }\n\n    var indexObj = this;\n\n    if (arguments.length === 1 || typeof attributesToRetrieve === 'function') {\n      callback = attributesToRetrieve;\n      attributesToRetrieve = undefined;\n    }\n\n    var body = {\n      requests: map(objectIDs, function prepareRequest(objectID) {\n        var request = {\n          indexName: indexObj.indexName,\n          objectID: objectID\n        };\n\n        if (attributesToRetrieve) {\n          request.attributesToRetrieve = attributesToRetrieve.join(',');\n        }\n\n        return request;\n      })\n    };\n\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/*/objects',\n      hostType: 'read',\n      body: body,\n      callback: callback\n    });\n  },\n\n  /*\n   * Update partially an object (only update attributes passed in argument)\n   *\n   * @param partialObject contains the javascript attributes to override, the\n   *  object must contains an objectID attribute\n   * @param createIfNotExists (optional) if false, avoid an automatic creation of the object\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that contains 3 elements: createAt, taskId and objectID\n   */\n  partialUpdateObject: function(partialObject, createIfNotExists, callback) {\n    if (arguments.length === 1 || typeof createIfNotExists === 'function') {\n      callback = createIfNotExists;\n      createIfNotExists = undefined;\n    }\n\n    var indexObj = this;\n    var url = '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/' + encodeURIComponent(partialObject.objectID) + '/partial';\n    if (createIfNotExists === false) {\n      url += '?createIfNotExists=false';\n    }\n\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: url,\n      body: partialObject,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Partially Override the content of several objects\n   *\n   * @param objects contains an array of objects to update (each object must contains a objectID attribute)\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that updateAt and taskID\n   */\n  partialUpdateObjects: function(objects, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: index.partialUpdateObjects(arrayOfObjects[, callback])';\n\n    if (!isArray(objects)) {\n      throw new Error(usage);\n    }\n\n    var indexObj = this;\n    var postObj = {\n      requests: []\n    };\n    for (var i = 0; i < objects.length; ++i) {\n      var request = {\n        action: 'partialUpdateObject',\n        objectID: objects[i].objectID,\n        body: objects[i]\n      };\n      postObj.requests.push(request);\n    }\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/batch',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Override the content of object\n   *\n   * @param object contains the javascript object to save, the object must contains an objectID attribute\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that updateAt and taskID\n   */\n  saveObject: function(object, callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'PUT',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/' + encodeURIComponent(object.objectID),\n      body: object,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Override the content of several objects\n   *\n   * @param objects contains an array of objects to update (each object must contains a objectID attribute)\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that updateAt and taskID\n   */\n  saveObjects: function(objects, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: index.saveObjects(arrayOfObjects[, callback])';\n\n    if (!isArray(objects)) {\n      throw new Error(usage);\n    }\n\n    var indexObj = this;\n    var postObj = {\n      requests: []\n    };\n    for (var i = 0; i < objects.length; ++i) {\n      var request = {\n        action: 'updateObject',\n        objectID: objects[i].objectID,\n        body: objects[i]\n      };\n      postObj.requests.push(request);\n    }\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/batch',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Delete an object from the index\n   *\n   * @param objectID the unique identifier of object to delete\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that contains 3 elements: createAt, taskId and objectID\n   */\n  deleteObject: function(objectID, callback) {\n    if (typeof objectID === 'function' || typeof objectID !== 'string' && typeof objectID !== 'number') {\n      var err = new errors.AlgoliaSearchError('Cannot delete an object without an objectID');\n      callback = objectID;\n      if (typeof callback === 'function') {\n        return callback(err);\n      }\n\n      return this.as._promise.reject(err);\n    }\n\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'DELETE',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/' + encodeURIComponent(objectID),\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Delete several objects from an index\n   *\n   * @param objectIDs contains an array of objectID to delete\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that contains 3 elements: createAt, taskId and objectID\n   */\n  deleteObjects: function(objectIDs, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var map = require('lodash/collection/map');\n\n    var usage = 'Usage: index.deleteObjects(arrayOfObjectIDs[, callback])';\n\n    if (!isArray(objectIDs)) {\n      throw new Error(usage);\n    }\n\n    var indexObj = this;\n    var postObj = {\n      requests: map(objectIDs, function prepareRequest(objectID) {\n        return {\n          action: 'deleteObject',\n          objectID: objectID,\n          body: {\n            objectID: objectID\n          }\n        };\n      })\n    };\n\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/batch',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Delete all objects matching a query\n   *\n   * @param query the query string\n   * @param params the optional query parameters\n   * @param callback (optional) the result callback called with one argument\n   *  error: null or Error('message')\n   */\n  deleteByQuery: function(query, params, callback) {\n    var clone = require('lodash/lang/clone');\n    var map = require('lodash/collection/map');\n\n    var indexObj = this;\n    var client = indexObj.as;\n\n    if (arguments.length === 1 || typeof params === 'function') {\n      callback = params;\n      params = {};\n    } else {\n      params = clone(params);\n    }\n\n    params.attributesToRetrieve = 'objectID';\n    params.hitsPerPage = 1000;\n    params.distinct = false;\n\n    // when deleting, we should never use cache to get the\n    // search results\n    this.clearCache();\n\n    // there's a problem in how we use the promise chain,\n    // see how waitTask is done\n    var promise = this\n      .search(query, params)\n      .then(stopOrDelete);\n\n    function stopOrDelete(searchContent) {\n      // stop here\n      if (searchContent.nbHits === 0) {\n        // return indexObj.as._request.resolve();\n        return searchContent;\n      }\n\n      // continue and do a recursive call\n      var objectIDs = map(searchContent.hits, function getObjectID(object) {\n        return object.objectID;\n      });\n\n      return indexObj\n        .deleteObjects(objectIDs)\n        .then(waitTask)\n        .then(doDeleteByQuery);\n    }\n\n    function waitTask(deleteObjectsContent) {\n      return indexObj.waitTask(deleteObjectsContent.taskID);\n    }\n\n    function doDeleteByQuery() {\n      return indexObj.deleteByQuery(query, params);\n    }\n\n    if (!callback) {\n      return promise;\n    }\n\n    promise.then(success, failure);\n\n    function success() {\n      exitPromise(function exit() {\n        callback(null);\n      }, client._setTimeout || setTimeout);\n    }\n\n    function failure(err) {\n      exitPromise(function exit() {\n        callback(err);\n      }, client._setTimeout || setTimeout);\n    }\n  },\n\n  /*\n   * Search inside the index using XMLHttpRequest request (Using a POST query to\n   * minimize number of OPTIONS queries: Cross-Origin Resource Sharing).\n   *\n   * @param query the full text query\n   * @param args (optional) if set, contains an object with query parameters:\n   * - page: (integer) Pagination parameter used to select the page to retrieve.\n   *                   Page is zero-based and defaults to 0. Thus,\n   *                   to retrieve the 10th page you need to set page=9\n   * - hitsPerPage: (integer) Pagination parameter used to select the number of hits per page. Defaults to 20.\n   * - attributesToRetrieve: a string that contains the list of object attributes\n   * you want to retrieve (let you minimize the answer size).\n   *   Attributes are separated with a comma (for example \"name,address\").\n   *   You can also use an array (for example [\"name\",\"address\"]).\n   *   By default, all attributes are retrieved. You can also use '*' to retrieve all\n   *   values when an attributesToRetrieve setting is specified for your index.\n   * - attributesToHighlight: a string that contains the list of attributes you\n   *   want to highlight according to the query.\n   *   Attributes are separated by a comma. You can also use an array (for example [\"name\",\"address\"]).\n   *   If an attribute has no match for the query, the raw value is returned.\n   *   By default all indexed text attributes are highlighted.\n   *   You can use `*` if you want to highlight all textual attributes.\n   *   Numerical attributes are not highlighted.\n   *   A matchLevel is returned for each highlighted attribute and can contain:\n   *      - full: if all the query terms were found in the attribute,\n   *      - partial: if only some of the query terms were found,\n   *      - none: if none of the query terms were found.\n   * - attributesToSnippet: a string that contains the list of attributes to snippet alongside\n   * the number of words to return (syntax is `attributeName:nbWords`).\n   *    Attributes are separated by a comma (Example: attributesToSnippet=name:10,content:10).\n   *    You can also use an array (Example: attributesToSnippet: ['name:10','content:10']).\n   *    By default no snippet is computed.\n   * - minWordSizefor1Typo: the minimum number of characters in a query word to accept one typo in this word.\n   * Defaults to 3.\n   * - minWordSizefor2Typos: the minimum number of characters in a query word\n   * to accept two typos in this word. Defaults to 7.\n   * - getRankingInfo: if set to 1, the result hits will contain ranking\n   * information in _rankingInfo attribute.\n   * - aroundLatLng: search for entries around a given\n   * latitude/longitude (specified as two floats separated by a comma).\n   *   For example aroundLatLng=47.316669,5.016670).\n   *   You can specify the maximum distance in meters with the aroundRadius parameter (in meters)\n   *   and the precision for ranking with aroundPrecision\n   *   (for example if you set aroundPrecision=100, two objects that are distant of\n   *   less than 100m will be considered as identical for \"geo\" ranking parameter).\n   *   At indexing, you should specify geoloc of an object with the _geoloc attribute\n   *   (in the form {\"_geoloc\":{\"lat\":48.853409, \"lng\":2.348800}})\n   * - insideBoundingBox: search entries inside a given area defined by the two extreme points\n   * of a rectangle (defined by 4 floats: p1Lat,p1Lng,p2Lat,p2Lng).\n   *   For example insideBoundingBox=47.3165,4.9665,47.3424,5.0201).\n   *   At indexing, you should specify geoloc of an object with the _geoloc attribute\n   *   (in the form {\"_geoloc\":{\"lat\":48.853409, \"lng\":2.348800}})\n   * - numericFilters: a string that contains the list of numeric filters you want to\n   * apply separated by a comma.\n   *   The syntax of one filter is `attributeName` followed by `operand` followed by `value`.\n   *   Supported operands are `<`, `<=`, `=`, `>` and `>=`.\n   *   You can have multiple conditions on one attribute like for example numericFilters=price>100,price<1000.\n   *   You can also use an array (for example numericFilters: [\"price>100\",\"price<1000\"]).\n   * - tagFilters: filter the query by a set of tags. You can AND tags by separating them by commas.\n   *   To OR tags, you must add parentheses. For example, tags=tag1,(tag2,tag3) means tag1 AND (tag2 OR tag3).\n   *   You can also use an array, for example tagFilters: [\"tag1\",[\"tag2\",\"tag3\"]]\n   *   means tag1 AND (tag2 OR tag3).\n   *   At indexing, tags should be added in the _tags** attribute\n   *   of objects (for example {\"_tags\":[\"tag1\",\"tag2\"]}).\n   * - facetFilters: filter the query by a list of facets.\n   *   Facets are separated by commas and each facet is encoded as `attributeName:value`.\n   *   For example: `facetFilters=category:Book,author:John%20Doe`.\n   *   You can also use an array (for example `[\"category:Book\",\"author:John%20Doe\"]`).\n   * - facets: List of object attributes that you want to use for faceting.\n   *   Comma separated list: `\"category,author\"` or array `['category','author']`\n   *   Only attributes that have been added in **attributesForFaceting** index setting\n   *   can be used in this parameter.\n   *   You can also use `*` to perform faceting on all attributes specified in **attributesForFaceting**.\n   * - queryType: select how the query words are interpreted, it can be one of the following value:\n   *    - prefixAll: all query words are interpreted as prefixes,\n   *    - prefixLast: only the last word is interpreted as a prefix (default behavior),\n   *    - prefixNone: no query word is interpreted as a prefix. This option is not recommended.\n   * - optionalWords: a string that contains the list of words that should\n   * be considered as optional when found in the query.\n   *   Comma separated and array are accepted.\n   * - distinct: If set to 1, enable the distinct feature (disabled by default)\n   * if the attributeForDistinct index setting is set.\n   *   This feature is similar to the SQL \"distinct\" keyword: when enabled\n   *   in a query with the distinct=1 parameter,\n   *   all hits containing a duplicate value for the attributeForDistinct attribute are removed from results.\n   *   For example, if the chosen attribute is show_name and several hits have\n   *   the same value for show_name, then only the best\n   *   one is kept and others are removed.\n   * - restrictSearchableAttributes: List of attributes you want to use for\n   * textual search (must be a subset of the attributesToIndex index setting)\n   * either comma separated or as an array\n   * @param callback the result callback called with two arguments:\n   *  error: null or Error('message'). If false, the content contains the error.\n   *  content: the server answer that contains the list of results.\n   */\n  search: buildSearchMethod('query'),\n\n  /*\n   * -- BETA --\n   * Search a record similar to the query inside the index using XMLHttpRequest request (Using a POST query to\n   * minimize number of OPTIONS queries: Cross-Origin Resource Sharing).\n   *\n   * @param query the similar query\n   * @param args (optional) if set, contains an object with query parameters.\n   *   All search parameters are supported (see search function), restrictSearchableAttributes and facetFilters\n   *   are the two most useful to restrict the similar results and get more relevant content\n   */\n  similarSearch: buildSearchMethod('similarQuery'),\n\n  /*\n   * Browse index content. The response content will have a `cursor` property that you can use\n   * to browse subsequent pages for this query. Use `index.browseFrom(cursor)` when you want.\n   *\n   * @param {string} query - The full text query\n   * @param {Object} [queryParameters] - Any search query parameter\n   * @param {Function} [callback] - The result callback called with two arguments\n   *   error: null or Error('message')\n   *   content: the server answer with the browse result\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * index.browse('cool songs', {\n   *   tagFilters: 'public,comments',\n   *   hitsPerPage: 500\n   * }, callback);\n   * @see {@link https://www.algolia.com/doc/rest_api#Browse|Algolia REST API Documentation}\n   */\n  // pre 3.5.0 usage, backward compatible\n  // browse: function(page, hitsPerPage, callback) {\n  browse: function(query, queryParameters, callback) {\n    var merge = require('lodash/object/merge');\n\n    var indexObj = this;\n\n    var page;\n    var hitsPerPage;\n\n    // we check variadic calls that are not the one defined\n    // .browse()/.browse(fn)\n    // => page = 0\n    if (arguments.length === 0 || arguments.length === 1 && typeof arguments[0] === 'function') {\n      page = 0;\n      callback = arguments[0];\n      query = undefined;\n    } else if (typeof arguments[0] === 'number') {\n      // .browse(2)/.browse(2, 10)/.browse(2, fn)/.browse(2, 10, fn)\n      page = arguments[0];\n      if (typeof arguments[1] === 'number') {\n        hitsPerPage = arguments[1];\n      } else if (typeof arguments[1] === 'function') {\n        callback = arguments[1];\n        hitsPerPage = undefined;\n      }\n      query = undefined;\n      queryParameters = undefined;\n    } else if (typeof arguments[0] === 'object') {\n      // .browse(queryParameters)/.browse(queryParameters, cb)\n      if (typeof arguments[1] === 'function') {\n        callback = arguments[1];\n      }\n      queryParameters = arguments[0];\n      query = undefined;\n    } else if (typeof arguments[0] === 'string' && typeof arguments[1] === 'function') {\n      // .browse(query, cb)\n      callback = arguments[1];\n      queryParameters = undefined;\n    }\n\n    // otherwise it's a .browse(query)/.browse(query, queryParameters)/.browse(query, queryParameters, cb)\n\n    // get search query parameters combining various possible calls\n    // to .browse();\n    queryParameters = merge({}, queryParameters || {}, {\n      page: page,\n      hitsPerPage: hitsPerPage,\n      query: query\n    });\n\n    var params = this.as._getSearchParams(queryParameters, '');\n\n    return this.as._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/browse?' + params,\n      hostType: 'read',\n      callback: callback\n    });\n  },\n\n  /*\n   * Continue browsing from a previous position (cursor), obtained via a call to `.browse()`.\n   *\n   * @param {string} query - The full text query\n   * @param {Object} [queryParameters] - Any search query parameter\n   * @param {Function} [callback] - The result callback called with two arguments\n   *   error: null or Error('message')\n   *   content: the server answer with the browse result\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * index.browseFrom('14lkfsakl32', callback);\n   * @see {@link https://www.algolia.com/doc/rest_api#Browse|Algolia REST API Documentation}\n   */\n  browseFrom: function(cursor, callback) {\n    return this.as._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes/' + encodeURIComponent(this.indexName) + '/browse?cursor=' + encodeURIComponent(cursor),\n      hostType: 'read',\n      callback: callback\n    });\n  },\n\n  /*\n   * Browse all content from an index using events. Basically this will do\n   * .browse() -> .browseFrom -> .browseFrom -> .. until all the results are returned\n   *\n   * @param {string} query - The full text query\n   * @param {Object} [queryParameters] - Any search query parameter\n   * @return {EventEmitter}\n   * @example\n   * var browser = index.browseAll('cool songs', {\n   *   tagFilters: 'public,comments',\n   *   hitsPerPage: 500\n   * });\n   *\n   * browser.on('result', function resultCallback(content) {\n   *   console.log(content.hits);\n   * });\n   *\n   * // if any error occurs, you get it\n   * browser.on('error', function(err) {\n   *   throw err;\n   * });\n   *\n   * // when you have browsed the whole index, you get this event\n   * browser.on('end', function() {\n   *   console.log('finished');\n   * });\n   *\n   * // at any point if you want to stop the browsing process, you can stop it manually\n   * // otherwise it will go on and on\n   * browser.stop();\n   *\n   * @see {@link https://www.algolia.com/doc/rest_api#Browse|Algolia REST API Documentation}\n   */\n  browseAll: function(query, queryParameters) {\n    if (typeof query === 'object') {\n      queryParameters = query;\n      query = undefined;\n    }\n\n    var merge = require('lodash/object/merge');\n\n    var IndexBrowser = require('./IndexBrowser');\n\n    var browser = new IndexBrowser();\n    var client = this.as;\n    var index = this;\n    var params = client._getSearchParams(\n      merge({}, queryParameters || {}, {\n        query: query\n      }), ''\n    );\n\n    // start browsing\n    browseLoop();\n\n    function browseLoop(cursor) {\n      if (browser._stopped) {\n        return;\n      }\n\n      var queryString;\n\n      if (cursor !== undefined) {\n        queryString = 'cursor=' + encodeURIComponent(cursor);\n      } else {\n        queryString = params;\n      }\n\n      client._jsonRequest({\n        method: 'GET',\n        url: '/1/indexes/' + encodeURIComponent(index.indexName) + '/browse?' + queryString,\n        hostType: 'read',\n        callback: browseCallback\n      });\n    }\n\n    function browseCallback(err, content) {\n      if (browser._stopped) {\n        return;\n      }\n\n      if (err) {\n        browser._error(err);\n        return;\n      }\n\n      browser._result(content);\n\n      // no cursor means we are finished browsing\n      if (content.cursor === undefined) {\n        browser._end();\n        return;\n      }\n\n      browseLoop(content.cursor);\n    }\n\n    return browser;\n  },\n\n  /*\n   * Get a Typeahead.js adapter\n   * @param searchParams contains an object with query parameters (see search for details)\n   */\n  ttAdapter: function(params) {\n    var self = this;\n    return function ttAdapter(query, syncCb, asyncCb) {\n      var cb;\n\n      if (typeof asyncCb === 'function') {\n        // typeahead 0.11\n        cb = asyncCb;\n      } else {\n        // pre typeahead 0.11\n        cb = syncCb;\n      }\n\n      self.search(query, params, function searchDone(err, content) {\n        if (err) {\n          cb(err);\n          return;\n        }\n\n        cb(content.hits);\n      });\n    };\n  },\n\n  /*\n   * Wait the publication of a task on the server.\n   * All server task are asynchronous and you can check with this method that the task is published.\n   *\n   * @param taskID the id of the task returned by server\n   * @param callback the result callback with with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that contains the list of results\n   */\n  waitTask: function(taskID, callback) {\n    // wait minimum 100ms before retrying\n    var baseDelay = 100;\n    // wait maximum 5s before retrying\n    var maxDelay = 5000;\n    var loop = 0;\n\n    // waitTask() must be handled differently from other methods,\n    // it's a recursive method using a timeout\n    var indexObj = this;\n    var client = indexObj.as;\n\n    var promise = retryLoop();\n\n    function retryLoop() {\n      return client._jsonRequest({\n        method: 'GET',\n        hostType: 'read',\n        url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/task/' + taskID\n      }).then(function success(content) {\n        loop++;\n        var delay = baseDelay * loop * loop;\n        if (delay > maxDelay) {\n          delay = maxDelay;\n        }\n\n        if (content.status !== 'published') {\n          return client._promise.delay(delay).then(retryLoop);\n        }\n\n        return content;\n      });\n    }\n\n    if (!callback) {\n      return promise;\n    }\n\n    promise.then(successCb, failureCb);\n\n    function successCb(content) {\n      exitPromise(function exit() {\n        callback(null, content);\n      }, client._setTimeout || setTimeout);\n    }\n\n    function failureCb(err) {\n      exitPromise(function exit() {\n        callback(err);\n      }, client._setTimeout || setTimeout);\n    }\n  },\n\n  /*\n   * This function deletes the index content. Settings and index specific API keys are kept untouched.\n   *\n   * @param callback (optional) the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the settings object or the error message if a failure occured\n   */\n  clearIndex: function(callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/clear',\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Get settings of this index\n   *\n   * @param callback (optional) the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the settings object or the error message if a failure occured\n   */\n  getSettings: function(callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/settings',\n      hostType: 'read',\n      callback: callback\n    });\n  },\n\n  /*\n   * Set settings for this index\n   *\n   * @param settigns the settings object that can contains :\n   * - minWordSizefor1Typo: (integer) the minimum number of characters to accept one typo (default = 3).\n   * - minWordSizefor2Typos: (integer) the minimum number of characters to accept two typos (default = 7).\n   * - hitsPerPage: (integer) the number of hits per page (default = 10).\n   * - attributesToRetrieve: (array of strings) default list of attributes to retrieve in objects.\n   *   If set to null, all attributes are retrieved.\n   * - attributesToHighlight: (array of strings) default list of attributes to highlight.\n   *   If set to null, all indexed attributes are highlighted.\n   * - attributesToSnippet**: (array of strings) default list of attributes to snippet alongside the number\n   * of words to return (syntax is attributeName:nbWords).\n   *   By default no snippet is computed. If set to null, no snippet is computed.\n   * - attributesToIndex: (array of strings) the list of fields you want to index.\n   *   If set to null, all textual and numerical attributes of your objects are indexed,\n   *   but you should update it to get optimal results.\n   *   This parameter has two important uses:\n   *     - Limit the attributes to index: For example if you store a binary image in base64,\n   *     you want to store it and be able to\n   *       retrieve it but you don't want to search in the base64 string.\n   *     - Control part of the ranking*: (see the ranking parameter for full explanation)\n   *     Matches in attributes at the beginning of\n   *       the list will be considered more important than matches in attributes further down the list.\n   *       In one attribute, matching text at the beginning of the attribute will be\n   *       considered more important than text after, you can disable\n   *       this behavior if you add your attribute inside `unordered(AttributeName)`,\n   *       for example attributesToIndex: [\"title\", \"unordered(text)\"].\n   * - attributesForFaceting: (array of strings) The list of fields you want to use for faceting.\n   *   All strings in the attribute selected for faceting are extracted and added as a facet.\n   *   If set to null, no attribute is used for faceting.\n   * - attributeForDistinct: (string) The attribute name used for the Distinct feature.\n   * This feature is similar to the SQL \"distinct\" keyword: when enabled\n   *   in query with the distinct=1 parameter, all hits containing a duplicate\n   *   value for this attribute are removed from results.\n   *   For example, if the chosen attribute is show_name and several hits have\n   *   the same value for show_name, then only the best one is kept and others are removed.\n   * - ranking: (array of strings) controls the way results are sorted.\n   *   We have six available criteria:\n   *    - typo: sort according to number of typos,\n   *    - geo: sort according to decreassing distance when performing a geo-location based search,\n   *    - proximity: sort according to the proximity of query words in hits,\n   *    - attribute: sort according to the order of attributes defined by attributesToIndex,\n   *    - exact:\n   *        - if the user query contains one word: sort objects having an attribute\n   *        that is exactly the query word before others.\n   *          For example if you search for the \"V\" TV show, you want to find it\n   *          with the \"V\" query and avoid to have all popular TV\n   *          show starting by the v letter before it.\n   *        - if the user query contains multiple words: sort according to the\n   *        number of words that matched exactly (and not as a prefix).\n   *    - custom: sort according to a user defined formula set in **customRanking** attribute.\n   *   The standard order is [\"typo\", \"geo\", \"proximity\", \"attribute\", \"exact\", \"custom\"]\n   * - customRanking: (array of strings) lets you specify part of the ranking.\n   *   The syntax of this condition is an array of strings containing attributes\n   *   prefixed by asc (ascending order) or desc (descending order) operator.\n   *   For example `\"customRanking\" => [\"desc(population)\", \"asc(name)\"]`\n   * - queryType: Select how the query words are interpreted, it can be one of the following value:\n   *   - prefixAll: all query words are interpreted as prefixes,\n   *   - prefixLast: only the last word is interpreted as a prefix (default behavior),\n   *   - prefixNone: no query word is interpreted as a prefix. This option is not recommended.\n   * - highlightPreTag: (string) Specify the string that is inserted before\n   * the highlighted parts in the query result (default to \"<em>\").\n   * - highlightPostTag: (string) Specify the string that is inserted after\n   * the highlighted parts in the query result (default to \"</em>\").\n   * - optionalWords: (array of strings) Specify a list of words that should\n   * be considered as optional when found in the query.\n   * @param callback (optional) the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer or the error message if a failure occured\n   */\n  setSettings: function(settings, callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'PUT',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/settings',\n      hostType: 'write',\n      body: settings,\n      callback: callback\n    });\n  },\n  /*\n   * List all existing user keys associated to this index\n   *\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with user keys list\n   */\n  listUserKeys: function(callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/keys',\n      hostType: 'read',\n      callback: callback\n    });\n  },\n  /*\n   * Get ACL of a user key associated to this index\n   *\n   * @param key\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with user keys list\n   */\n  getUserKeyACL: function(key, callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/keys/' + key,\n      hostType: 'read',\n      callback: callback\n    });\n  },\n  /*\n   * Delete an existing user key associated to this index\n   *\n   * @param key\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with user keys list\n   */\n  deleteUserKey: function(key, callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'DELETE',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/keys/' + key,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Add a new API key to this index\n   *\n   * @param {string[]} acls - The list of ACL for this key. Defined by an array of strings that\n   *   can contains the following values:\n   *     - search: allow to search (https and http)\n   *     - addObject: allows to add/update an object in the index (https only)\n   *     - deleteObject : allows to delete an existing object (https only)\n   *     - deleteIndex : allows to delete index content (https only)\n   *     - settings : allows to get index settings (https only)\n   *     - editSettings : allows to change index settings (https only)\n   * @param {Object} [params] - Optionnal parameters to set for the key\n   * @param {number} params.validity - Number of seconds after which the key will\n   * be automatically removed (0 means no time limit for this key)\n   * @param {number} params.maxQueriesPerIPPerHour - Number of API calls allowed from an IP address per hour\n   * @param {number} params.maxHitsPerQuery - Number of hits this API key can retrieve in one call\n   * @param {string} params.description - A description for your key\n   * @param {string[]} params.referers - A list of authorized referers\n   * @param {Object} params.queryParameters - Force the key to use specific query parameters\n   * @param {Function} callback - The result callback called with two arguments\n   *   error: null or Error('message')\n   *   content: the server answer with user keys list\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * index.addUserKey(['search'], {\n   *   validity: 300,\n   *   maxQueriesPerIPPerHour: 2000,\n   *   maxHitsPerQuery: 3,\n   *   description: 'Eat three fruits',\n   *   referers: ['*.algolia.com'],\n   *   queryParameters: {\n   *     tagFilters: ['public'],\n   *   }\n   * })\n   * @see {@link https://www.algolia.com/doc/rest_api#AddIndexKey|Algolia REST API Documentation}\n   */\n  addUserKey: function(acls, params, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: index.addUserKey(arrayOfAcls[, params, callback])';\n\n    if (!isArray(acls)) {\n      throw new Error(usage);\n    }\n\n    if (arguments.length === 1 || typeof params === 'function') {\n      callback = params;\n      params = null;\n    }\n\n    var postObj = {\n      acl: acls\n    };\n\n    if (params) {\n      postObj.validity = params.validity;\n      postObj.maxQueriesPerIPPerHour = params.maxQueriesPerIPPerHour;\n      postObj.maxHitsPerQuery = params.maxHitsPerQuery;\n      postObj.description = params.description;\n\n      if (params.queryParameters) {\n        postObj.queryParameters = this.as._getSearchParams(params.queryParameters, '');\n      }\n\n      postObj.referers = params.referers;\n    }\n\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(this.indexName) + '/keys',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n\n  /**\n   * Add an existing user key associated to this index\n   * @deprecated use index.addUserKey()\n   */\n  addUserKeyWithValidity: deprecate(function deprecatedAddUserKeyWithValidity(acls, params, callback) {\n    return this.addUserKey(acls, params, callback);\n  }, deprecatedMessage('index.addUserKeyWithValidity()', 'index.addUserKey()')),\n\n  /**\n   * Update an existing API key of this index\n   * @param {string} key - The key to update\n   * @param {string[]} acls - The list of ACL for this key. Defined by an array of strings that\n   *   can contains the following values:\n   *     - search: allow to search (https and http)\n   *     - addObject: allows to add/update an object in the index (https only)\n   *     - deleteObject : allows to delete an existing object (https only)\n   *     - deleteIndex : allows to delete index content (https only)\n   *     - settings : allows to get index settings (https only)\n   *     - editSettings : allows to change index settings (https only)\n   * @param {Object} [params] - Optionnal parameters to set for the key\n   * @param {number} params.validity - Number of seconds after which the key will\n   * be automatically removed (0 means no time limit for this key)\n   * @param {number} params.maxQueriesPerIPPerHour - Number of API calls allowed from an IP address per hour\n   * @param {number} params.maxHitsPerQuery - Number of hits this API key can retrieve in one call\n   * @param {string} params.description - A description for your key\n   * @param {string[]} params.referers - A list of authorized referers\n   * @param {Object} params.queryParameters - Force the key to use specific query parameters\n   * @param {Function} callback - The result callback called with two arguments\n   *   error: null or Error('message')\n   *   content: the server answer with user keys list\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * index.updateUserKey('APIKEY', ['search'], {\n   *   validity: 300,\n   *   maxQueriesPerIPPerHour: 2000,\n   *   maxHitsPerQuery: 3,\n   *   description: 'Eat three fruits',\n   *   referers: ['*.algolia.com'],\n   *   queryParameters: {\n   *     tagFilters: ['public'],\n   *   }\n   * })\n   * @see {@link https://www.algolia.com/doc/rest_api#UpdateIndexKey|Algolia REST API Documentation}\n   */\n  updateUserKey: function(key, acls, params, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: index.updateUserKey(key, arrayOfAcls[, params, callback])';\n\n    if (!isArray(acls)) {\n      throw new Error(usage);\n    }\n\n    if (arguments.length === 2 || typeof params === 'function') {\n      callback = params;\n      params = null;\n    }\n\n    var putObj = {\n      acl: acls\n    };\n\n    if (params) {\n      putObj.validity = params.validity;\n      putObj.maxQueriesPerIPPerHour = params.maxQueriesPerIPPerHour;\n      putObj.maxHitsPerQuery = params.maxHitsPerQuery;\n      putObj.description = params.description;\n\n      if (params.queryParameters) {\n        putObj.queryParameters = this.as._getSearchParams(params.queryParameters, '');\n      }\n\n      putObj.referers = params.referers;\n    }\n\n    return this.as._jsonRequest({\n      method: 'PUT',\n      url: '/1/indexes/' + encodeURIComponent(this.indexName) + '/keys/' + key,\n      body: putObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n\n  _search: function(params, url, callback) {\n    return this.as._jsonRequest({\n      cache: this.cache,\n      method: 'POST',\n      url: url || '/1/indexes/' + encodeURIComponent(this.indexName) + '/query',\n      body: {params: params},\n      hostType: 'read',\n      fallback: {\n        method: 'GET',\n        url: '/1/indexes/' + encodeURIComponent(this.indexName),\n        body: {params: params}\n      },\n      callback: callback\n    });\n  },\n\n  as: null,\n  indexName: null,\n  typeAheadArgs: null,\n  typeAheadValueOption: null\n};\n\nfunction prepareHost(protocol) {\n  return function prepare(host) {\n    return protocol + '//' + host.toLowerCase();\n  };\n}\n\nfunction notImplemented() {\n  var message = 'Not implemented in this environment.\\n' +\n    'If you feel this is a mistake, write to support@algolia.com';\n\n  throw new errors.AlgoliaSearchError(message);\n}\n\nfunction deprecatedMessage(previousUsage, newUsage) {\n  var githubAnchorLink = previousUsage.toLowerCase()\n    .replace('.', '')\n    .replace('()', '');\n\n  return 'algoliasearch: `' + previousUsage + '` was replaced by `' + newUsage +\n    '`. Please see https://github.com/algolia/algoliasearch-client-js/wiki/Deprecated#' + githubAnchorLink;\n}\n\n// Parse cloud does not supports setTimeout\n// We do not store a setTimeout reference in the client everytime\n// We only fallback to a fake setTimeout when not available\n// setTimeout cannot be override globally sadly\nfunction exitPromise(fn, _setTimeout) {\n  _setTimeout(fn, 0);\n}\n\nfunction deprecate(fn, message) {\n  var warned = false;\n\n  function deprecated() {\n    if (!warned) {\n      /* eslint no-console:0 */\n      console.log(message);\n      warned = true;\n    }\n\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n// Prototype.js < 1.7, a widely used library, defines a weird\n// Array.prototype.toJSON function that will fail to stringify our content\n// appropriately\n// refs:\n//   - https://groups.google.com/forum/#!topic/prototype-core/E-SAVvV_V9Q\n//   - https://github.com/sstephenson/prototype/commit/038a2985a70593c1a86c230fadbdfe2e4898a48c\n//   - http://stackoverflow.com/a/3148441/147079\nfunction safeJSONStringify(obj) {\n  /* eslint no-extend-native:0 */\n\n  if (Array.prototype.toJSON === undefined) {\n    return JSON.stringify(obj);\n  }\n\n  var toJSON = Array.prototype.toJSON;\n  delete Array.prototype.toJSON;\n  var out = JSON.stringify(obj);\n  Array.prototype.toJSON = toJSON;\n\n  return out;\n}\n\n},{\"./IndexBrowser\":5,\"./buildSearchMethod.js\":10,\"./errors\":11,\"debug\":14,\"lodash/collection/forEach\":20,\"lodash/collection/map\":21,\"lodash/lang/clone\":73,\"lodash/lang/isArray\":76,\"lodash/object/merge\":85}],5:[function(require,module,exports){\n'use strict';\n\n// This is the object returned by the `index.browseAll()` method\n\nmodule.exports = IndexBrowser;\n\nvar inherits = require('inherits');\nvar EventEmitter = require('events').EventEmitter;\n\nfunction IndexBrowser() {\n}\n\ninherits(IndexBrowser, EventEmitter);\n\nIndexBrowser.prototype.stop = function() {\n  this._stopped = true;\n  this._clean();\n};\n\nIndexBrowser.prototype._end = function() {\n  this.emit('end');\n  this._clean();\n};\n\nIndexBrowser.prototype._error = function(err) {\n  this.emit('error', err);\n  this._clean();\n};\n\nIndexBrowser.prototype._result = function(content) {\n  this.emit('result', content);\n};\n\nIndexBrowser.prototype._clean = function() {\n  this.removeAllListeners('stop');\n  this.removeAllListeners('end');\n  this.removeAllListeners('error');\n  this.removeAllListeners('result');\n};\n\n},{\"events\":17,\"inherits\":18}],6:[function(require,module,exports){\n(function (process){\n'use strict';\n\n// This is the standalone browser build entry point\n// Browser implementation of the Algolia Search JavaScript client,\n// using XMLHttpRequest, XDomainRequest and JSONP as fallback\nmodule.exports = algoliasearch;\n\nvar inherits = require('inherits');\nvar Promise = window.Promise || require('es6-promise').Promise;\n\nvar AlgoliaSearch = require('../../AlgoliaSearch');\nvar errors = require('../../errors');\nvar inlineHeaders = require('../inline-headers');\nvar jsonpRequest = require('../jsonp-request');\nvar places = require('../../places.js');\n\nif (process.env.APP_ENV === 'development') {\n  require('debug').enable('algoliasearch*');\n}\n\nfunction algoliasearch(applicationID, apiKey, opts) {\n  var cloneDeep = require('lodash/lang/cloneDeep');\n\n  var getDocumentProtocol = require('../get-document-protocol');\n\n  opts = cloneDeep(opts || {});\n\n  if (opts.protocol === undefined) {\n    opts.protocol = getDocumentProtocol();\n  }\n\n  opts._ua = opts._ua || algoliasearch.ua;\n\n  return new AlgoliaSearchBrowser(applicationID, apiKey, opts);\n}\n\nalgoliasearch.version = require('../../version.js');\nalgoliasearch.ua = 'Algolia for vanilla JavaScript ' + algoliasearch.version;\nalgoliasearch.initPlaces = places(algoliasearch);\n\n// we expose into window no matter how we are used, this will allow\n// us to easily debug any website running algolia\nwindow.__algolia = {\n  debug: require('debug'),\n  algoliasearch: algoliasearch\n};\n\nvar support = {\n  hasXMLHttpRequest: 'XMLHttpRequest' in window,\n  hasXDomainRequest: 'XDomainRequest' in window,\n  cors: 'withCredentials' in new XMLHttpRequest(),\n  timeout: 'timeout' in new XMLHttpRequest()\n};\n\nfunction AlgoliaSearchBrowser() {\n  // call AlgoliaSearch constructor\n  AlgoliaSearch.apply(this, arguments);\n}\n\ninherits(AlgoliaSearchBrowser, AlgoliaSearch);\n\nAlgoliaSearchBrowser.prototype._request = function request(url, opts) {\n  return new Promise(function wrapRequest(resolve, reject) {\n    // no cors or XDomainRequest, no request\n    if (!support.cors && !support.hasXDomainRequest) {\n      // very old browser, not supported\n      reject(new errors.Network('CORS not supported'));\n      return;\n    }\n\n    url = inlineHeaders(url, opts.headers);\n\n    var body = opts.body;\n    var req = support.cors ? new XMLHttpRequest() : new XDomainRequest();\n    var ontimeout;\n    var timedOut;\n\n    // do not rely on default XHR async flag, as some analytics code like hotjar\n    // breaks it and set it to false by default\n    if (req instanceof XMLHttpRequest) {\n      req.open(opts.method, url, true);\n    } else {\n      req.open(opts.method, url);\n    }\n\n    if (support.cors) {\n      if (body) {\n        if (opts.method === 'POST') {\n          // https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Simple_requests\n          req.setRequestHeader('content-type', 'application/x-www-form-urlencoded');\n        } else {\n          req.setRequestHeader('content-type', 'application/json');\n        }\n      }\n      req.setRequestHeader('accept', 'application/json');\n    }\n\n    // we set an empty onprogress listener\n    // so that XDomainRequest on IE9 is not aborted\n    // refs:\n    //  - https://github.com/algolia/algoliasearch-client-js/issues/76\n    //  - https://social.msdn.microsoft.com/Forums/ie/en-US/30ef3add-767c-4436-b8a9-f1ca19b4812e/ie9-rtm-xdomainrequest-issued-requests-may-abort-if-all-event-handlers-not-specified?forum=iewebdevelopment\n    req.onprogress = function noop() {};\n\n    req.onload = load;\n    req.onerror = error;\n\n    if (support.timeout) {\n      // .timeout supported by both XHR and XDR,\n      // we do receive timeout event, tested\n      req.timeout = opts.timeout;\n\n      req.ontimeout = timeout;\n    } else {\n      ontimeout = setTimeout(timeout, opts.timeout);\n    }\n\n    req.send(body);\n\n    // event object not received in IE8, at least\n    // but we do not use it, still important to note\n    function load(/* event */) {\n      // When browser does not supports req.timeout, we can\n      // have both a load and timeout event, since handled by a dumb setTimeout\n      if (timedOut) {\n        return;\n      }\n\n      if (!support.timeout) {\n        clearTimeout(ontimeout);\n      }\n\n      var out;\n\n      try {\n        out = {\n          body: JSON.parse(req.responseText),\n          responseText: req.responseText,\n          statusCode: req.status,\n          // XDomainRequest does not have any response headers\n          headers: req.getAllResponseHeaders && req.getAllResponseHeaders() || {}\n        };\n      } catch (e) {\n        out = new errors.UnparsableJSON({\n          more: req.responseText\n        });\n      }\n\n      if (out instanceof errors.UnparsableJSON) {\n        reject(out);\n      } else {\n        resolve(out);\n      }\n    }\n\n    function error(event) {\n      if (timedOut) {\n        return;\n      }\n\n      if (!support.timeout) {\n        clearTimeout(ontimeout);\n      }\n\n      // error event is trigerred both with XDR/XHR on:\n      //   - DNS error\n      //   - unallowed cross domain request\n      reject(\n        new errors.Network({\n          more: event\n        })\n      );\n    }\n\n    function timeout() {\n      if (!support.timeout) {\n        timedOut = true;\n        req.abort();\n      }\n\n      reject(new errors.RequestTimeout());\n    }\n  });\n};\n\nAlgoliaSearchBrowser.prototype._request.fallback = function requestFallback(url, opts) {\n  url = inlineHeaders(url, opts.headers);\n\n  return new Promise(function wrapJsonpRequest(resolve, reject) {\n    jsonpRequest(url, opts, function jsonpRequestDone(err, content) {\n      if (err) {\n        reject(err);\n        return;\n      }\n\n      resolve(content);\n    });\n  });\n};\n\nAlgoliaSearchBrowser.prototype._promise = {\n  reject: function rejectPromise(val) {\n    return Promise.reject(val);\n  },\n  resolve: function resolvePromise(val) {\n    return Promise.resolve(val);\n  },\n  delay: function delayPromise(ms) {\n    return new Promise(function resolveOnTimeout(resolve/* , reject*/) {\n      setTimeout(resolve, ms);\n    });\n  }\n};\n\n}).call(this,require('_process'))\n},{\"../../AlgoliaSearch\":4,\"../../errors\":11,\"../../places.js\":12,\"../../version.js\":13,\"../get-document-protocol\":7,\"../inline-headers\":8,\"../jsonp-request\":9,\"_process\":90,\"debug\":14,\"es6-promise\":16,\"inherits\":18,\"lodash/lang/cloneDeep\":74}],7:[function(require,module,exports){\n'use strict';\n\nmodule.exports = getDocumentProtocol;\n\nfunction getDocumentProtocol() {\n  var protocol = window.document.location.protocol;\n\n  // when in `file:` mode (local html file), default to `http:`\n  if (protocol !== 'http:' && protocol !== 'https:') {\n    protocol = 'http:';\n  }\n\n  return protocol;\n}\n\n},{}],8:[function(require,module,exports){\n'use strict';\n\nmodule.exports = inlineHeaders;\n\nvar querystring = require('querystring');\n\nfunction inlineHeaders(url, headers) {\n  if (/\\?/.test(url)) {\n    url += '&';\n  } else {\n    url += '?';\n  }\n\n  return url + querystring.encode(headers);\n}\n\n},{\"querystring\":93}],9:[function(require,module,exports){\n'use strict';\n\nmodule.exports = jsonpRequest;\n\nvar errors = require('../errors');\n\nvar JSONPCounter = 0;\n\nfunction jsonpRequest(url, opts, cb) {\n  if (opts.method !== 'GET') {\n    cb(new Error('Method ' + opts.method + ' ' + url + ' is not supported by JSONP.'));\n    return;\n  }\n\n  opts.debug('JSONP: start');\n\n  var cbCalled = false;\n  var timedOut = false;\n\n  JSONPCounter += 1;\n  var head = document.getElementsByTagName('head')[0];\n  var script = document.createElement('script');\n  var cbName = 'algoliaJSONP_' + JSONPCounter;\n  var done = false;\n\n  window[cbName] = function(data) {\n    try {\n      delete window[cbName];\n    } catch (e) {\n      window[cbName] = undefined;\n    }\n\n    if (timedOut) {\n      return;\n    }\n\n    cbCalled = true;\n\n    clean();\n\n    cb(null, {\n      body: data/* ,\n      // We do not send the statusCode, there's no statusCode in JSONP, it will be\n      // computed using data.status && data.message like with XDR\n      statusCode*/\n    });\n  };\n\n  // add callback by hand\n  url += '&callback=' + cbName;\n\n  // add body params manually\n  if (opts.jsonBody && opts.jsonBody.params) {\n    url += '&' + opts.jsonBody.params;\n  }\n\n  var ontimeout = setTimeout(timeout, opts.timeout);\n\n  // script onreadystatechange needed only for\n  // <= IE8\n  // https://github.com/angular/angular.js/issues/4523\n  script.onreadystatechange = readystatechange;\n  script.onload = success;\n  script.onerror = error;\n\n  script.async = true;\n  script.defer = true;\n  script.src = url;\n  head.appendChild(script);\n\n  function success() {\n    opts.debug('JSONP: success');\n\n    if (done || timedOut) {\n      return;\n    }\n\n    done = true;\n\n    // script loaded but did not call the fn => script loading error\n    if (!cbCalled) {\n      opts.debug('JSONP: Fail. Script loaded but did not call the callback');\n      clean();\n      cb(new errors.JSONPScriptFail());\n    }\n  }\n\n  function readystatechange() {\n    if (this.readyState === 'loaded' || this.readyState === 'complete') {\n      success();\n    }\n  }\n\n  function clean() {\n    clearTimeout(ontimeout);\n    script.onload = null;\n    script.onreadystatechange = null;\n    script.onerror = null;\n    head.removeChild(script);\n\n    try {\n      delete window[cbName];\n      delete window[cbName + '_loaded'];\n    } catch (e) {\n      window[cbName] = null;\n      window[cbName + '_loaded'] = null;\n    }\n  }\n\n  function timeout() {\n    opts.debug('JSONP: Script timeout');\n\n    timedOut = true;\n    clean();\n    cb(new errors.RequestTimeout());\n  }\n\n  function error() {\n    opts.debug('JSONP: Script error');\n\n    if (done || timedOut) {\n      return;\n    }\n\n    clean();\n    cb(new errors.JSONPScriptError());\n  }\n}\n\n},{\"../errors\":11}],10:[function(require,module,exports){\nmodule.exports = buildSearchMethod;\n\nvar errors = require('./errors.js');\n\nfunction buildSearchMethod(queryParam, url) {\n  return function search(query, args, callback) {\n    // warn V2 users on how to search\n    if (typeof query === 'function' && typeof args === 'object' ||\n      typeof callback === 'object') {\n      // .search(query, params, cb)\n      // .search(cb, params)\n      throw new errors.AlgoliaSearchError('index.search usage is index.search(query, params, cb)');\n    }\n\n    if (arguments.length === 0 || typeof query === 'function') {\n      // .search(), .search(cb)\n      callback = query;\n      query = '';\n    } else if (arguments.length === 1 || typeof args === 'function') {\n      // .search(query/args), .search(query, cb)\n      callback = args;\n      args = undefined;\n    }\n\n    // .search(args), careful: typeof null === 'object'\n    if (typeof query === 'object' && query !== null) {\n      args = query;\n      query = undefined;\n    } else if (query === undefined || query === null) { // .search(undefined/null)\n      query = '';\n    }\n\n    var params = '';\n\n    if (query !== undefined) {\n      params += queryParam + '=' + encodeURIComponent(query);\n    }\n\n    if (args !== undefined) {\n      // `_getSearchParams` will augment params, do not be fooled by the = versus += from previous if\n      params = this.as._getSearchParams(args, params);\n    }\n\n    return this._search(params, url, callback);\n  };\n}\n\n},{\"./errors.js\":11}],11:[function(require,module,exports){\n'use strict';\n\n// This file hosts our error definitions\n// We use custom error \"types\" so that we can act on them when we need it\n// e.g.: if error instanceof errors.UnparsableJSON then..\n\nvar inherits = require('inherits');\n\nfunction AlgoliaSearchError(message, extraProperties) {\n  var forEach = require('lodash/collection/forEach');\n\n  var error = this;\n\n  // try to get a stacktrace\n  if (typeof Error.captureStackTrace === 'function') {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    error.stack = (new Error()).stack || 'Cannot get a stacktrace, browser is too old';\n  }\n\n  this.name = this.constructor.name;\n  this.message = message || 'Unknown error';\n\n  if (extraProperties) {\n    forEach(extraProperties, function addToErrorObject(value, key) {\n      error[key] = value;\n    });\n  }\n}\n\ninherits(AlgoliaSearchError, Error);\n\nfunction createCustomError(name, message) {\n  function AlgoliaSearchCustomError() {\n    var args = Array.prototype.slice.call(arguments, 0);\n\n    // custom message not set, use default\n    if (typeof args[0] !== 'string') {\n      args.unshift(message);\n    }\n\n    AlgoliaSearchError.apply(this, args);\n    this.name = 'AlgoliaSearch' + name + 'Error';\n  }\n\n  inherits(AlgoliaSearchCustomError, AlgoliaSearchError);\n\n  return AlgoliaSearchCustomError;\n}\n\n// late exports to let various fn defs and inherits take place\nmodule.exports = {\n  AlgoliaSearchError: AlgoliaSearchError,\n  UnparsableJSON: createCustomError(\n    'UnparsableJSON',\n    'Could not parse the incoming response as JSON, see err.more for details'\n  ),\n  RequestTimeout: createCustomError(\n    'RequestTimeout',\n    'Request timedout before getting a response'\n  ),\n  Network: createCustomError(\n    'Network',\n    'Network issue, see err.more for details'\n  ),\n  JSONPScriptFail: createCustomError(\n    'JSONPScriptFail',\n    '<script> was loaded but did not call our provided callback'\n  ),\n  JSONPScriptError: createCustomError(\n    'JSONPScriptError',\n    '<script> unable to load due to an `error` event on it'\n  ),\n  Unknown: createCustomError(\n    'Unknown',\n    'Unknown error occured'\n  )\n};\n\n},{\"inherits\":18,\"lodash/collection/forEach\":20}],12:[function(require,module,exports){\nmodule.exports = createPlacesClient;\n\nvar buildSearchMethod = require('./buildSearchMethod.js');\n\nfunction createPlacesClient(algoliasearch) {\n  return function places(appID, apiKey, opts) {\n    var cloneDeep = require('lodash/lang/cloneDeep');\n\n    opts = opts && cloneDeep(opts) || {};\n    opts.hosts = opts.hosts || [\n      'places-dsn.algolia.net',\n      'places-1.algolianet.com',\n      'places-2.algolianet.com',\n      'places-3.algolianet.com'\n    ];\n\n    var client = algoliasearch(appID, apiKey, opts);\n    var index = client.initIndex('places');\n    index.search = buildSearchMethod('query', '/1/places/query');\n    return index;\n  };\n}\n\n},{\"./buildSearchMethod.js\":10,\"lodash/lang/cloneDeep\":74}],13:[function(require,module,exports){\n'use strict';\n\nmodule.exports = '3.13.0';\n\n},{}],14:[function(require,module,exports){\n\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  return ('WebkitAppearance' in document.documentElement.style) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window.console && (console.firebug || (console.exception && console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  return JSON.stringify(v);\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs() {\n  var args = arguments;\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return args;\n\n  var c = 'color: ' + this.color;\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n  return args;\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage(){\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n\n},{\"./debug\":15}],15:[function(require,module,exports){\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = debug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('algolia-ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lowercased letter, i.e. \"n\".\n */\n\nexports.formatters = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction selectColor() {\n  return exports.colors[prevColor++ % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction debug(namespace) {\n\n  // define the `disabled` version\n  function disabled() {\n  }\n  disabled.enabled = false;\n\n  // define the `enabled` version\n  function enabled() {\n\n    var self = enabled;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // add the `color` if not set\n    if (null == self.useColors) self.useColors = exports.useColors();\n    if (null == self.color && self.useColors) self.color = selectColor();\n\n    var args = Array.prototype.slice.call(arguments);\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %o\n      args = ['%o'].concat(args);\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    if ('function' === typeof exports.formatArgs) {\n      args = exports.formatArgs.apply(self, args);\n    }\n    var logFn = enabled.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n  enabled.enabled = true;\n\n  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n  fn.namespace = namespace;\n\n  return fn;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  var split = (namespaces || '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n},{\"algolia-ms\":3}],16:[function(require,module,exports){\n(function (process,global){\n/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   3.1.2\n */\n\n(function() {\n    \"use strict\";\n    function lib$es6$promise$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function lib$es6$promise$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function lib$es6$promise$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var lib$es6$promise$utils$$_isArray;\n    if (!Array.isArray) {\n      lib$es6$promise$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      lib$es6$promise$utils$$_isArray = Array.isArray;\n    }\n\n    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\n    var lib$es6$promise$asap$$len = 0;\n    var lib$es6$promise$asap$$vertxNext;\n    var lib$es6$promise$asap$$customSchedulerFn;\n\n    var lib$es6$promise$asap$$asap = function asap(callback, arg) {\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\n      lib$es6$promise$asap$$len += 2;\n      if (lib$es6$promise$asap$$len === 2) {\n        // If len is 2, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        if (lib$es6$promise$asap$$customSchedulerFn) {\n          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\n        } else {\n          lib$es6$promise$asap$$scheduleFlush();\n        }\n      }\n    }\n\n    function lib$es6$promise$asap$$setScheduler(scheduleFn) {\n      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\n    }\n\n    function lib$es6$promise$asap$$setAsap(asapFn) {\n      lib$es6$promise$asap$$asap = asapFn;\n    }\n\n    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\n    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\n    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\n    var lib$es6$promise$asap$$isNode = typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n    // test for web worker but not in IE10\n    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function lib$es6$promise$asap$$useNextTick() {\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n      // see https://github.com/cujojs/when/issues/410 for details\n      return function() {\n        process.nextTick(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    // vertx\n    function lib$es6$promise$asap$$useVertxTimer() {\n      return function() {\n        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    function lib$es6$promise$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function lib$es6$promise$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = lib$es6$promise$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function lib$es6$promise$asap$$useSetTimeout() {\n      return function() {\n        setTimeout(lib$es6$promise$asap$$flush, 1);\n      };\n    }\n\n    var lib$es6$promise$asap$$queue = new Array(1000);\n    function lib$es6$promise$asap$$flush() {\n      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {\n        var callback = lib$es6$promise$asap$$queue[i];\n        var arg = lib$es6$promise$asap$$queue[i+1];\n\n        callback(arg);\n\n        lib$es6$promise$asap$$queue[i] = undefined;\n        lib$es6$promise$asap$$queue[i+1] = undefined;\n      }\n\n      lib$es6$promise$asap$$len = 0;\n    }\n\n    function lib$es6$promise$asap$$attemptVertx() {\n      try {\n        var r = require;\n        var vertx = r('vertx');\n        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n        return lib$es6$promise$asap$$useVertxTimer();\n      } catch(e) {\n        return lib$es6$promise$asap$$useSetTimeout();\n      }\n    }\n\n    var lib$es6$promise$asap$$scheduleFlush;\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (lib$es6$promise$asap$$isNode) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\n    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\n    } else if (lib$es6$promise$asap$$isWorker) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\n    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\n    } else {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\n    }\n    function lib$es6$promise$then$$then(onFulfillment, onRejection) {\n      var parent = this;\n      var state = parent._state;\n\n      if (state === lib$es6$promise$$internal$$FULFILLED && !onFulfillment || state === lib$es6$promise$$internal$$REJECTED && !onRejection) {\n        return this;\n      }\n\n      var child = new this.constructor(lib$es6$promise$$internal$$noop);\n      var result = parent._result;\n\n      if (state) {\n        var callback = arguments[state - 1];\n        lib$es6$promise$asap$$asap(function(){\n          lib$es6$promise$$internal$$invokeCallback(state, child, callback, result);\n        });\n      } else {\n        lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n      }\n\n      return child;\n    }\n    var lib$es6$promise$then$$default = lib$es6$promise$then$$then;\n    function lib$es6$promise$promise$resolve$$resolve(object) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$resolve(promise, object);\n      return promise;\n    }\n    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\n\n    function lib$es6$promise$$internal$$noop() {}\n\n    var lib$es6$promise$$internal$$PENDING   = void 0;\n    var lib$es6$promise$$internal$$FULFILLED = 1;\n    var lib$es6$promise$$internal$$REJECTED  = 2;\n\n    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$selfFulfillment() {\n      return new TypeError(\"You cannot resolve a promise with itself\");\n    }\n\n    function lib$es6$promise$$internal$$cannotReturnOwn() {\n      return new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    function lib$es6$promise$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\n        return lib$es6$promise$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\n       lib$es6$promise$asap$$asap(function(promise) {\n        var sealed = false;\n        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            lib$es6$promise$$internal$$resolve(promise, value);\n          } else {\n            lib$es6$promise$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          lib$es6$promise$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          lib$es6$promise$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, thenable._result);\n      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, thenable._result);\n      } else {\n        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable, then) {\n      if (maybeThenable.constructor === promise.constructor &&\n          then === lib$es6$promise$then$$default &&\n          constructor.resolve === lib$es6$promise$promise$resolve$$default) {\n        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        } else if (lib$es6$promise$utils$$isFunction(then)) {\n          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function lib$es6$promise$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\n      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\n        lib$es6$promise$$internal$$handleMaybeThenable(promise, value, lib$es6$promise$$internal$$getThen(value));\n      } else {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publishRejection(promise) {\n      if (promise._onerror) {\n        promise._onerror(promise._result);\n      }\n\n      lib$es6$promise$$internal$$publish(promise);\n    }\n\n    function lib$es6$promise$$internal$$fulfill(promise, value) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = lib$es6$promise$$internal$$FULFILLED;\n\n      if (promise._subscribers.length !== 0) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\n      }\n    }\n\n    function lib$es6$promise$$internal$$reject(promise, reason) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n      promise._state = lib$es6$promise$$internal$$REJECTED;\n      promise._result = reason;\n\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\n    }\n\n    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onerror = null;\n\n      subscribers[length] = child;\n      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function lib$es6$promise$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\n        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = lib$es6$promise$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = lib$es6$promise$$internal$$tryCatch(callback, detail);\n\n        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$es6$promise$$internal$$reject(promise, error);\n      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      } else if (settled === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\n      try {\n        resolver(function resolvePromise(value){\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        lib$es6$promise$$internal$$reject(promise, e);\n      }\n    }\n\n    function lib$es6$promise$promise$all$$all(entries) {\n      return new lib$es6$promise$enumerator$$default(this, entries).promise;\n    }\n    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\n    function lib$es6$promise$promise$race$$race(entries) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (!lib$es6$promise$utils$$isArray(entries)) {\n        lib$es6$promise$$internal$$reject(promise, new TypeError('You must pass an array to race.'));\n        return promise;\n      }\n\n      var length = entries.length;\n\n      function onFulfillment(value) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      }\n\n      function onRejection(reason) {\n        lib$es6$promise$$internal$$reject(promise, reason);\n      }\n\n      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);\n      }\n\n      return promise;\n    }\n    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\n    function lib$es6$promise$promise$reject$$reject(reason) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$reject(promise, reason);\n      return promise;\n    }\n    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\n\n    var lib$es6$promise$promise$$counter = 0;\n\n    function lib$es6$promise$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function lib$es6$promise$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\n    /**\n      Promise objects represent the eventual result of an asynchronous operation. The\n      primary way of interacting with a promise is through its `then` method, which\n      registers callbacks to receive either a promise's eventual value or the reason\n      why the promise cannot be fulfilled.\n\n      Terminology\n      -----------\n\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n      - `thenable` is an object or function that defines a `then` method.\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n      - `exception` is a value that is thrown using the throw statement.\n      - `reason` is a value that indicates why a promise was rejected.\n      - `settled` the final resting state of a promise, fulfilled or rejected.\n\n      A promise can be in one of three states: pending, fulfilled, or rejected.\n\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\n      state.  Promises that are rejected have a rejection reason and are in the\n      rejected state.  A fulfillment value is never a thenable.\n\n      Promises can also be said to *resolve* a value.  If this value is also a\n      promise, then the original promise's settled state will match the value's\n      settled state.  So a promise that *resolves* a promise that rejects will\n      itself reject, and a promise that *resolves* a promise that fulfills will\n      itself fulfill.\n\n\n      Basic Usage:\n      ------------\n\n      ```js\n      var promise = new Promise(function(resolve, reject) {\n        // on success\n        resolve(value);\n\n        // on failure\n        reject(reason);\n      });\n\n      promise.then(function(value) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Advanced Usage:\n      ---------------\n\n      Promises shine when abstracting away asynchronous interactions such as\n      `XMLHttpRequest`s.\n\n      ```js\n      function getJSON(url) {\n        return new Promise(function(resolve, reject){\n          var xhr = new XMLHttpRequest();\n\n          xhr.open('GET', url);\n          xhr.onreadystatechange = handler;\n          xhr.responseType = 'json';\n          xhr.setRequestHeader('Accept', 'application/json');\n          xhr.send();\n\n          function handler() {\n            if (this.readyState === this.DONE) {\n              if (this.status === 200) {\n                resolve(this.response);\n              } else {\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n              }\n            }\n          };\n        });\n      }\n\n      getJSON('/posts.json').then(function(json) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Unlike callbacks, promises are great composable primitives.\n\n      ```js\n      Promise.all([\n        getJSON('/posts'),\n        getJSON('/comments')\n      ]).then(function(values){\n        values[0] // => postsJSON\n        values[1] // => commentsJSON\n\n        return values;\n      });\n      ```\n\n      @class Promise\n      @param {function} resolver\n      Useful for tooling.\n      @constructor\n    */\n    function lib$es6$promise$promise$$Promise(resolver) {\n      this._id = lib$es6$promise$promise$$counter++;\n      this._state = undefined;\n      this._result = undefined;\n      this._subscribers = [];\n\n      if (lib$es6$promise$$internal$$noop !== resolver) {\n        typeof resolver !== 'function' && lib$es6$promise$promise$$needsResolver();\n        this instanceof lib$es6$promise$promise$$Promise ? lib$es6$promise$$internal$$initializePromise(this, resolver) : lib$es6$promise$promise$$needsNew();\n      }\n    }\n\n    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\n    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\n    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\n    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\n    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\n    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\n    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\n\n    lib$es6$promise$promise$$Promise.prototype = {\n      constructor: lib$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: lib$es6$promise$then$$default,\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\n    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\n      this._instanceConstructor = Constructor;\n      this.promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (Array.isArray(input)) {\n        this._input     = input;\n        this.length     = input.length;\n        this._remaining = input.length;\n\n        this._result = new Array(this.length);\n\n        if (this.length === 0) {\n          lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n        } else {\n          this.length = this.length || 0;\n          this._enumerate();\n          if (this._remaining === 0) {\n            lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n          }\n        }\n      } else {\n        lib$es6$promise$$internal$$reject(this.promise, this._validationError());\n      }\n    }\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function() {\n      return new Error('Array Methods must be provided an Array');\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {\n      var length  = this.length;\n      var input   = this._input;\n\n      for (var i = 0; this._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        this._eachEntry(input[i], i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      var c = this._instanceConstructor;\n      var resolve = c.resolve;\n\n      if (resolve === lib$es6$promise$promise$resolve$$default) {\n        var then = lib$es6$promise$$internal$$getThen(entry);\n\n        if (then === lib$es6$promise$then$$default &&\n            entry._state !== lib$es6$promise$$internal$$PENDING) {\n          this._settledAt(entry._state, i, entry._result);\n        } else if (typeof then !== 'function') {\n          this._remaining--;\n          this._result[i] = entry;\n        } else if (c === lib$es6$promise$promise$$default) {\n          var promise = new c(lib$es6$promise$$internal$$noop);\n          lib$es6$promise$$internal$$handleMaybeThenable(promise, entry, then);\n          this._willSettleAt(promise, i);\n        } else {\n          this._willSettleAt(new c(function(resolve) { resolve(entry); }), i);\n        }\n      } else {\n        this._willSettleAt(resolve(entry), i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var promise = this.promise;\n\n      if (promise._state === lib$es6$promise$$internal$$PENDING) {\n        this._remaining--;\n\n        if (state === lib$es6$promise$$internal$$REJECTED) {\n          lib$es6$promise$$internal$$reject(promise, value);\n        } else {\n          this._result[i] = value;\n        }\n      }\n\n      if (this._remaining === 0) {\n        lib$es6$promise$$internal$$fulfill(promise, this._result);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\n      });\n    };\n    function lib$es6$promise$polyfill$$polyfill() {\n      var local;\n\n      if (typeof global !== 'undefined') {\n          local = global;\n      } else if (typeof self !== 'undefined') {\n          local = self;\n      } else {\n          try {\n              local = Function('return this')();\n          } catch (e) {\n              throw new Error('polyfill failed because global object is unavailable in this environment');\n          }\n      }\n\n      var P = local.Promise;\n\n      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\n        return;\n      }\n\n      local.Promise = lib$es6$promise$promise$$default;\n    }\n    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\n\n    var lib$es6$promise$umd$$ES6Promise = {\n      'Promise': lib$es6$promise$promise$$default,\n      'polyfill': lib$es6$promise$polyfill$$default\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define(function() { return lib$es6$promise$umd$$ES6Promise; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = lib$es6$promise$umd$$ES6Promise;\n    } else if (typeof this !== 'undefined') {\n      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\n    }\n\n    lib$es6$promise$polyfill$$default();\n}).call(this);\n\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"_process\":90}],17:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n},{}],18:[function(require,module,exports){\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n},{}],19:[function(require,module,exports){\n/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array ? array.length : 0;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n\n},{}],20:[function(require,module,exports){\nvar arrayEach = require('../internal/arrayEach'),\n    baseEach = require('../internal/baseEach'),\n    createForEach = require('../internal/createForEach');\n\n/**\n * Iterates over elements of `collection` invoking `iteratee` for each element.\n * The `iteratee` is bound to `thisArg` and invoked with three arguments:\n * (value, index|key, collection). Iteratee functions may exit iteration early\n * by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\" property\n * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`\n * may be used for object iteration.\n *\n * @static\n * @memberOf _\n * @alias each\n * @category Collection\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [thisArg] The `this` binding of `iteratee`.\n * @returns {Array|Object|string} Returns `collection`.\n * @example\n *\n * _([1, 2]).forEach(function(n) {\n *   console.log(n);\n * }).value();\n * // => logs each value from left to right and returns the array\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(n, key) {\n *   console.log(n, key);\n * });\n * // => logs each value-key pair and returns the object (iteration order is not guaranteed)\n */\nvar forEach = createForEach(arrayEach, baseEach);\n\nmodule.exports = forEach;\n\n},{\"../internal/arrayEach\":24,\"../internal/baseEach\":31,\"../internal/createForEach\":53}],21:[function(require,module,exports){\nvar arrayMap = require('../internal/arrayMap'),\n    baseCallback = require('../internal/baseCallback'),\n    baseMap = require('../internal/baseMap'),\n    isArray = require('../lang/isArray');\n\n/**\n * Creates an array of values by running each element in `collection` through\n * `iteratee`. The `iteratee` is bound to `thisArg` and invoked with three\n * arguments: (value, index|key, collection).\n *\n * If a property name is provided for `iteratee` the created `_.property`\n * style callback returns the property value of the given element.\n *\n * If a value is also provided for `thisArg` the created `_.matchesProperty`\n * style callback returns `true` for elements that have a matching property\n * value, else `false`.\n *\n * If an object is provided for `iteratee` the created `_.matches` style\n * callback returns `true` for elements that have the properties of the given\n * object, else `false`.\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `callback`, `chunk`, `clone`, `create`, `curry`, `curryRight`,\n * `drop`, `dropRight`, `every`, `fill`, `flatten`, `invert`, `max`, `min`,\n * `parseInt`, `slice`, `sortBy`, `take`, `takeRight`, `template`, `trim`,\n * `trimLeft`, `trimRight`, `trunc`, `random`, `range`, `sample`, `some`,\n * `sum`, `uniq`, and `words`\n *\n * @static\n * @memberOf _\n * @alias collect\n * @category Collection\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n *  per iteration.\n * @param {*} [thisArg] The `this` binding of `iteratee`.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function timesThree(n) {\n *   return n * 3;\n * }\n *\n * _.map([1, 2], timesThree);\n * // => [3, 6]\n *\n * _.map({ 'a': 1, 'b': 2 }, timesThree);\n * // => [3, 6] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // using the `_.property` callback shorthand\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee, thisArg) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  iteratee = baseCallback(iteratee, thisArg, 3);\n  return func(collection, iteratee);\n}\n\nmodule.exports = map;\n\n},{\"../internal/arrayMap\":25,\"../internal/baseCallback\":28,\"../internal/baseMap\":39,\"../lang/isArray\":76}],22:[function(require,module,exports){\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as an array.\n *\n * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/Web/JavaScript/Reference/Functions/rest_parameters).\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.restParam(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction restParam(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        rest = Array(length);\n\n    while (++index < length) {\n      rest[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, args[0], rest);\n      case 2: return func.call(this, args[0], args[1], rest);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = rest;\n    return func.apply(this, otherArgs);\n  };\n}\n\nmodule.exports = restParam;\n\n},{}],23:[function(require,module,exports){\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction arrayCopy(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayCopy;\n\n},{}],24:[function(require,module,exports){\n/**\n * A specialized version of `_.forEach` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n\n},{}],25:[function(require,module,exports){\n/**\n * A specialized version of `_.map` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n\n},{}],26:[function(require,module,exports){\n/**\n * A specialized version of `_.some` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n\n},{}],27:[function(require,module,exports){\nvar baseCopy = require('./baseCopy'),\n    keys = require('../object/keys');\n\n/**\n * The base implementation of `_.assign` without support for argument juggling,\n * multiple sources, and `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return source == null\n    ? object\n    : baseCopy(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n\n},{\"../object/keys\":83,\"./baseCopy\":30}],28:[function(require,module,exports){\nvar baseMatches = require('./baseMatches'),\n    baseMatchesProperty = require('./baseMatchesProperty'),\n    bindCallback = require('./bindCallback'),\n    identity = require('../utility/identity'),\n    property = require('../utility/property');\n\n/**\n * The base implementation of `_.callback` which supports specifying the\n * number of arguments to provide to `func`.\n *\n * @private\n * @param {*} [func=_.identity] The value to convert to a callback.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {number} [argCount] The number of arguments to provide to `func`.\n * @returns {Function} Returns the callback.\n */\nfunction baseCallback(func, thisArg, argCount) {\n  var type = typeof func;\n  if (type == 'function') {\n    return thisArg === undefined\n      ? func\n      : bindCallback(func, thisArg, argCount);\n  }\n  if (func == null) {\n    return identity;\n  }\n  if (type == 'object') {\n    return baseMatches(func);\n  }\n  return thisArg === undefined\n    ? property(func)\n    : baseMatchesProperty(func, thisArg);\n}\n\nmodule.exports = baseCallback;\n\n},{\"../utility/identity\":87,\"../utility/property\":88,\"./baseMatches\":40,\"./baseMatchesProperty\":41,\"./bindCallback\":48}],29:[function(require,module,exports){\nvar arrayCopy = require('./arrayCopy'),\n    arrayEach = require('./arrayEach'),\n    baseAssign = require('./baseAssign'),\n    baseForOwn = require('./baseForOwn'),\n    initCloneArray = require('./initCloneArray'),\n    initCloneByTag = require('./initCloneByTag'),\n    initCloneObject = require('./initCloneObject'),\n    isArray = require('../lang/isArray'),\n    isObject = require('../lang/isObject');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[boolTag] =\ncloneableTags[dateTag] = cloneableTags[float32Tag] =\ncloneableTags[float64Tag] = cloneableTags[int8Tag] =\ncloneableTags[int16Tag] = cloneableTags[int32Tag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[stringTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[mapTag] = cloneableTags[setTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * The base implementation of `_.clone` without support for argument juggling\n * and `this` binding `customizer` functions.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {Function} [customizer] The function to customize cloning values.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The object `value` belongs to.\n * @param {Array} [stackA=[]] Tracks traversed source objects.\n * @param {Array} [stackB=[]] Associates clones with source counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, customizer, key, object, stackA, stackB) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return arrayCopy(value, result);\n    }\n  } else {\n    var tag = objToString.call(value),\n        isFunc = tag == funcTag;\n\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return baseAssign(result, value);\n      }\n    } else {\n      return cloneableTags[tag]\n        ? initCloneByTag(value, tag, isDeep)\n        : (object ? value : {});\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stackA || (stackA = []);\n  stackB || (stackB = []);\n\n  var length = stackA.length;\n  while (length--) {\n    if (stackA[length] == value) {\n      return stackB[length];\n    }\n  }\n  // Add the source value to the stack of traversed objects and associate it with its clone.\n  stackA.push(value);\n  stackB.push(result);\n\n  // Recursively populate clone (susceptible to call stack limits).\n  (isArr ? arrayEach : baseForOwn)(value, function(subValue, key) {\n    result[key] = baseClone(subValue, isDeep, customizer, key, value, stackA, stackB);\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n\n},{\"../lang/isArray\":76,\"../lang/isObject\":79,\"./arrayCopy\":23,\"./arrayEach\":24,\"./baseAssign\":27,\"./baseForOwn\":34,\"./initCloneArray\":60,\"./initCloneByTag\":61,\"./initCloneObject\":62}],30:[function(require,module,exports){\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @returns {Object} Returns `object`.\n */\nfunction baseCopy(source, props, object) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n    object[key] = source[key];\n  }\n  return object;\n}\n\nmodule.exports = baseCopy;\n\n},{}],31:[function(require,module,exports){\nvar baseForOwn = require('./baseForOwn'),\n    createBaseEach = require('./createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object|string} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n\n},{\"./baseForOwn\":34,\"./createBaseEach\":51}],32:[function(require,module,exports){\nvar createBaseFor = require('./createBaseFor');\n\n/**\n * The base implementation of `baseForIn` and `baseForOwn` which iterates\n * over `object` properties returned by `keysFunc` invoking `iteratee` for\n * each property. Iteratee functions may exit iteration early by explicitly\n * returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n\n},{\"./createBaseFor\":52}],33:[function(require,module,exports){\nvar baseFor = require('./baseFor'),\n    keysIn = require('../object/keysIn');\n\n/**\n * The base implementation of `_.forIn` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForIn(object, iteratee) {\n  return baseFor(object, iteratee, keysIn);\n}\n\nmodule.exports = baseForIn;\n\n},{\"../object/keysIn\":84,\"./baseFor\":32}],34:[function(require,module,exports){\nvar baseFor = require('./baseFor'),\n    keys = require('../object/keys');\n\n/**\n * The base implementation of `_.forOwn` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n\n},{\"../object/keys\":83,\"./baseFor\":32}],35:[function(require,module,exports){\nvar toObject = require('./toObject');\n\n/**\n * The base implementation of `get` without support for string paths\n * and default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path of the property to get.\n * @param {string} [pathKey] The key representation of path.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path, pathKey) {\n  if (object == null) {\n    return;\n  }\n  if (pathKey !== undefined && pathKey in toObject(object)) {\n    path = [pathKey];\n  }\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[path[index++]];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n\n},{\"./toObject\":71}],36:[function(require,module,exports){\nvar baseIsEqualDeep = require('./baseIsEqualDeep'),\n    isObject = require('../lang/isObject'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` without support for `this` binding\n * `customizer` functions.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparing values.\n * @param {boolean} [isLoose] Specify performing partial comparisons.\n * @param {Array} [stackA] Tracks traversed `value` objects.\n * @param {Array} [stackB] Tracks traversed `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, customizer, isLoose, stackA, stackB) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, baseIsEqual, customizer, isLoose, stackA, stackB);\n}\n\nmodule.exports = baseIsEqual;\n\n},{\"../lang/isObject\":79,\"./baseIsEqualDeep\":37,\"./isObjectLike\":68}],37:[function(require,module,exports){\nvar equalArrays = require('./equalArrays'),\n    equalByTag = require('./equalByTag'),\n    equalObjects = require('./equalObjects'),\n    isArray = require('../lang/isArray'),\n    isTypedArray = require('../lang/isTypedArray');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparing objects.\n * @param {boolean} [isLoose] Specify performing partial comparisons.\n * @param {Array} [stackA=[]] Tracks traversed `value` objects.\n * @param {Array} [stackB=[]] Tracks traversed `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, equalFunc, customizer, isLoose, stackA, stackB) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = arrayTag,\n      othTag = arrayTag;\n\n  if (!objIsArr) {\n    objTag = objToString.call(object);\n    if (objTag == argsTag) {\n      objTag = objectTag;\n    } else if (objTag != objectTag) {\n      objIsArr = isTypedArray(object);\n    }\n  }\n  if (!othIsArr) {\n    othTag = objToString.call(other);\n    if (othTag == argsTag) {\n      othTag = objectTag;\n    } else if (othTag != objectTag) {\n      othIsArr = isTypedArray(other);\n    }\n  }\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && !(objIsArr || objIsObj)) {\n    return equalByTag(object, other, objTag);\n  }\n  if (!isLoose) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, isLoose, stackA, stackB);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  // For more information on detecting circular references see https://es5.github.io/#JO.\n  stackA || (stackA = []);\n  stackB || (stackB = []);\n\n  var length = stackA.length;\n  while (length--) {\n    if (stackA[length] == object) {\n      return stackB[length] == other;\n    }\n  }\n  // Add `object` and `other` to the stack of traversed objects.\n  stackA.push(object);\n  stackB.push(other);\n\n  var result = (objIsArr ? equalArrays : equalObjects)(object, other, equalFunc, customizer, isLoose, stackA, stackB);\n\n  stackA.pop();\n  stackB.pop();\n\n  return result;\n}\n\nmodule.exports = baseIsEqualDeep;\n\n},{\"../lang/isArray\":76,\"../lang/isTypedArray\":81,\"./equalArrays\":54,\"./equalByTag\":55,\"./equalObjects\":56}],38:[function(require,module,exports){\nvar baseIsEqual = require('./baseIsEqual'),\n    toObject = require('./toObject');\n\n/**\n * The base implementation of `_.isMatch` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Array} matchData The propery names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparing objects.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = toObject(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var result = customizer ? customizer(objValue, srcValue, key) : undefined;\n      if (!(result === undefined ? baseIsEqual(srcValue, objValue, customizer, true) : result)) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n\n},{\"./baseIsEqual\":36,\"./toObject\":71}],39:[function(require,module,exports){\nvar baseEach = require('./baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for callback shorthands\n * and `this` binding.\n *\n * @private\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n\n},{\"./baseEach\":31,\"./isArrayLike\":63}],40:[function(require,module,exports){\nvar baseIsMatch = require('./baseIsMatch'),\n    getMatchData = require('./getMatchData'),\n    toObject = require('./toObject');\n\n/**\n * The base implementation of `_.matches` which does not clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    var key = matchData[0][0],\n        value = matchData[0][1];\n\n    return function(object) {\n      if (object == null) {\n        return false;\n      }\n      return object[key] === value && (value !== undefined || (key in toObject(object)));\n    };\n  }\n  return function(object) {\n    return baseIsMatch(object, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n\n},{\"./baseIsMatch\":38,\"./getMatchData\":58,\"./toObject\":71}],41:[function(require,module,exports){\nvar baseGet = require('./baseGet'),\n    baseIsEqual = require('./baseIsEqual'),\n    baseSlice = require('./baseSlice'),\n    isArray = require('../lang/isArray'),\n    isKey = require('./isKey'),\n    isStrictComparable = require('./isStrictComparable'),\n    last = require('../array/last'),\n    toObject = require('./toObject'),\n    toPath = require('./toPath');\n\n/**\n * The base implementation of `_.matchesProperty` which does not clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to compare.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  var isArr = isArray(path),\n      isCommon = isKey(path) && isStrictComparable(srcValue),\n      pathKey = (path + '');\n\n  path = toPath(path);\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    var key = pathKey;\n    object = toObject(object);\n    if ((isArr || !isCommon) && !(key in object)) {\n      object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));\n      if (object == null) {\n        return false;\n      }\n      key = last(path);\n      object = toObject(object);\n    }\n    return object[key] === srcValue\n      ? (srcValue !== undefined || (key in object))\n      : baseIsEqual(srcValue, object[key], undefined, true);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n\n},{\"../array/last\":19,\"../lang/isArray\":76,\"./baseGet\":35,\"./baseIsEqual\":36,\"./baseSlice\":46,\"./isKey\":66,\"./isStrictComparable\":69,\"./toObject\":71,\"./toPath\":72}],42:[function(require,module,exports){\nvar arrayEach = require('./arrayEach'),\n    baseMergeDeep = require('./baseMergeDeep'),\n    isArray = require('../lang/isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isObject = require('../lang/isObject'),\n    isObjectLike = require('./isObjectLike'),\n    isTypedArray = require('../lang/isTypedArray'),\n    keys = require('../object/keys');\n\n/**\n * The base implementation of `_.merge` without support for argument juggling,\n * multiple sources, and `this` binding `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Array} [stackA=[]] Tracks traversed source objects.\n * @param {Array} [stackB=[]] Associates values with source counterparts.\n * @returns {Object} Returns `object`.\n */\nfunction baseMerge(object, source, customizer, stackA, stackB) {\n  if (!isObject(object)) {\n    return object;\n  }\n  var isSrcArr = isArrayLike(source) && (isArray(source) || isTypedArray(source)),\n      props = isSrcArr ? undefined : keys(source);\n\n  arrayEach(props || source, function(srcValue, key) {\n    if (props) {\n      key = srcValue;\n      srcValue = source[key];\n    }\n    if (isObjectLike(srcValue)) {\n      stackA || (stackA = []);\n      stackB || (stackB = []);\n      baseMergeDeep(object, source, key, baseMerge, customizer, stackA, stackB);\n    }\n    else {\n      var value = object[key],\n          result = customizer ? customizer(value, srcValue, key, object, source) : undefined,\n          isCommon = result === undefined;\n\n      if (isCommon) {\n        result = srcValue;\n      }\n      if ((result !== undefined || (isSrcArr && !(key in object))) &&\n          (isCommon || (result === result ? (result !== value) : (value === value)))) {\n        object[key] = result;\n      }\n    }\n  });\n  return object;\n}\n\nmodule.exports = baseMerge;\n\n},{\"../lang/isArray\":76,\"../lang/isObject\":79,\"../lang/isTypedArray\":81,\"../object/keys\":83,\"./arrayEach\":24,\"./baseMergeDeep\":43,\"./isArrayLike\":63,\"./isObjectLike\":68}],43:[function(require,module,exports){\nvar arrayCopy = require('./arrayCopy'),\n    isArguments = require('../lang/isArguments'),\n    isArray = require('../lang/isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isPlainObject = require('../lang/isPlainObject'),\n    isTypedArray = require('../lang/isTypedArray'),\n    toPlainObject = require('../lang/toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Array} [stackA=[]] Tracks traversed source objects.\n * @param {Array} [stackB=[]] Associates values with source counterparts.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseMergeDeep(object, source, key, mergeFunc, customizer, stackA, stackB) {\n  var length = stackA.length,\n      srcValue = source[key];\n\n  while (length--) {\n    if (stackA[length] == srcValue) {\n      object[key] = stackB[length];\n      return;\n    }\n  }\n  var value = object[key],\n      result = customizer ? customizer(value, srcValue, key, object, source) : undefined,\n      isCommon = result === undefined;\n\n  if (isCommon) {\n    result = srcValue;\n    if (isArrayLike(srcValue) && (isArray(srcValue) || isTypedArray(srcValue))) {\n      result = isArray(value)\n        ? value\n        : (isArrayLike(value) ? arrayCopy(value) : []);\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      result = isArguments(value)\n        ? toPlainObject(value)\n        : (isPlainObject(value) ? value : {});\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  // Add the source value to the stack of traversed objects and associate\n  // it with its merged value.\n  stackA.push(srcValue);\n  stackB.push(result);\n\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    object[key] = mergeFunc(result, srcValue, customizer, stackA, stackB);\n  } else if (result === result ? (result !== value) : (value === value)) {\n    object[key] = result;\n  }\n}\n\nmodule.exports = baseMergeDeep;\n\n},{\"../lang/isArguments\":75,\"../lang/isArray\":76,\"../lang/isPlainObject\":80,\"../lang/isTypedArray\":81,\"../lang/toPlainObject\":82,\"./arrayCopy\":23,\"./isArrayLike\":63}],44:[function(require,module,exports){\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n\n},{}],45:[function(require,module,exports){\nvar baseGet = require('./baseGet'),\n    toPath = require('./toPath');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction basePropertyDeep(path) {\n  var pathKey = (path + '');\n  path = toPath(path);\n  return function(object) {\n    return baseGet(object, path, pathKey);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n\n},{\"./baseGet\":35,\"./toPath\":72}],46:[function(require,module,exports){\n/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  start = start == null ? 0 : (+start || 0);\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = (end === undefined || end > length) ? length : (+end || 0);\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n\n},{}],47:[function(require,module,exports){\n/**\n * Converts `value` to a string if it's not one. An empty string is returned\n * for `null` or `undefined` values.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  return value == null ? '' : (value + '');\n}\n\nmodule.exports = baseToString;\n\n},{}],48:[function(require,module,exports){\nvar identity = require('../utility/identity');\n\n/**\n * A specialized version of `baseCallback` which only supports `this` binding\n * and specifying the number of arguments to provide to `func`.\n *\n * @private\n * @param {Function} func The function to bind.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {number} [argCount] The number of arguments to provide to `func`.\n * @returns {Function} Returns the callback.\n */\nfunction bindCallback(func, thisArg, argCount) {\n  if (typeof func != 'function') {\n    return identity;\n  }\n  if (thisArg === undefined) {\n    return func;\n  }\n  switch (argCount) {\n    case 1: return function(value) {\n      return func.call(thisArg, value);\n    };\n    case 3: return function(value, index, collection) {\n      return func.call(thisArg, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(thisArg, accumulator, value, index, collection);\n    };\n    case 5: return function(value, other, key, object, source) {\n      return func.call(thisArg, value, other, key, object, source);\n    };\n  }\n  return function() {\n    return func.apply(thisArg, arguments);\n  };\n}\n\nmodule.exports = bindCallback;\n\n},{\"../utility/identity\":87}],49:[function(require,module,exports){\n(function (global){\n/** Native method references. */\nvar ArrayBuffer = global.ArrayBuffer,\n    Uint8Array = global.Uint8Array;\n\n/**\n * Creates a clone of the given array buffer.\n *\n * @private\n * @param {ArrayBuffer} buffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction bufferClone(buffer) {\n  var result = new ArrayBuffer(buffer.byteLength),\n      view = new Uint8Array(result);\n\n  view.set(new Uint8Array(buffer));\n  return result;\n}\n\nmodule.exports = bufferClone;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],50:[function(require,module,exports){\nvar bindCallback = require('./bindCallback'),\n    isIterateeCall = require('./isIterateeCall'),\n    restParam = require('../function/restParam');\n\n/**\n * Creates a `_.assign`, `_.defaults`, or `_.merge` function.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return restParam(function(object, sources) {\n    var index = -1,\n        length = object == null ? 0 : sources.length,\n        customizer = length > 2 ? sources[length - 2] : undefined,\n        guard = length > 2 ? sources[2] : undefined,\n        thisArg = length > 1 ? sources[length - 1] : undefined;\n\n    if (typeof customizer == 'function') {\n      customizer = bindCallback(customizer, thisArg, 5);\n      length -= 2;\n    } else {\n      customizer = typeof thisArg == 'function' ? thisArg : undefined;\n      length -= (customizer ? 1 : 0);\n    }\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n\n},{\"../function/restParam\":22,\"./bindCallback\":48,\"./isIterateeCall\":65}],51:[function(require,module,exports){\nvar getLength = require('./getLength'),\n    isLength = require('./isLength'),\n    toObject = require('./toObject');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    var length = collection ? getLength(collection) : 0;\n    if (!isLength(length)) {\n      return eachFunc(collection, iteratee);\n    }\n    var index = fromRight ? length : -1,\n        iterable = toObject(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n\n},{\"./getLength\":57,\"./isLength\":67,\"./toObject\":71}],52:[function(require,module,exports){\nvar toObject = require('./toObject');\n\n/**\n * Creates a base function for `_.forIn` or `_.forInRight`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var iterable = toObject(object),\n        props = keysFunc(object),\n        length = props.length,\n        index = fromRight ? length : -1;\n\n    while ((fromRight ? index-- : ++index < length)) {\n      var key = props[index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n\n},{\"./toObject\":71}],53:[function(require,module,exports){\nvar bindCallback = require('./bindCallback'),\n    isArray = require('../lang/isArray');\n\n/**\n * Creates a function for `_.forEach` or `_.forEachRight`.\n *\n * @private\n * @param {Function} arrayFunc The function to iterate over an array.\n * @param {Function} eachFunc The function to iterate over a collection.\n * @returns {Function} Returns the new each function.\n */\nfunction createForEach(arrayFunc, eachFunc) {\n  return function(collection, iteratee, thisArg) {\n    return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))\n      ? arrayFunc(collection, iteratee)\n      : eachFunc(collection, bindCallback(iteratee, thisArg, 3));\n  };\n}\n\nmodule.exports = createForEach;\n\n},{\"../lang/isArray\":76,\"./bindCallback\":48}],54:[function(require,module,exports){\nvar arraySome = require('./arraySome');\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparing arrays.\n * @param {boolean} [isLoose] Specify performing partial comparisons.\n * @param {Array} [stackA] Tracks traversed `value` objects.\n * @param {Array} [stackB] Tracks traversed `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, equalFunc, customizer, isLoose, stackA, stackB) {\n  var index = -1,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isLoose && othLength > arrLength)) {\n    return false;\n  }\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index],\n        result = customizer ? customizer(isLoose ? othValue : arrValue, isLoose ? arrValue : othValue, index) : undefined;\n\n    if (result !== undefined) {\n      if (result) {\n        continue;\n      }\n      return false;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (isLoose) {\n      if (!arraySome(other, function(othValue) {\n            return arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB);\n          })) {\n        return false;\n      }\n    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB))) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = equalArrays;\n\n},{\"./arraySome\":26}],55:[function(require,module,exports){\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    stringTag = '[object String]';\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag) {\n  switch (tag) {\n    case boolTag:\n    case dateTag:\n      // Coerce dates and booleans to numbers, dates to milliseconds and booleans\n      // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.\n      return +object == +other;\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case numberTag:\n      // Treat `NaN` vs. `NaN` as equal.\n      return (object != +object)\n        ? other != +other\n        : object == +other;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings primitives and string\n      // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.\n      return object == (other + '');\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n\n},{}],56:[function(require,module,exports){\nvar keys = require('../object/keys');\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparing values.\n * @param {boolean} [isLoose] Specify performing partial comparisons.\n * @param {Array} [stackA] Tracks traversed `value` objects.\n * @param {Array} [stackB] Tracks traversed `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, equalFunc, customizer, isLoose, stackA, stackB) {\n  var objProps = keys(object),\n      objLength = objProps.length,\n      othProps = keys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isLoose) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isLoose ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  var skipCtor = isLoose;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key],\n        result = customizer ? customizer(isLoose ? othValue : objValue, isLoose? objValue : othValue, key) : undefined;\n\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(result === undefined ? equalFunc(objValue, othValue, customizer, isLoose, stackA, stackB) : result)) {\n      return false;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (!skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = equalObjects;\n\n},{\"../object/keys\":83}],57:[function(require,module,exports){\nvar baseProperty = require('./baseProperty');\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\nmodule.exports = getLength;\n\n},{\"./baseProperty\":44}],58:[function(require,module,exports){\nvar isStrictComparable = require('./isStrictComparable'),\n    pairs = require('../object/pairs');\n\n/**\n * Gets the propery names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = pairs(object),\n      length = result.length;\n\n  while (length--) {\n    result[length][2] = isStrictComparable(result[length][1]);\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n\n},{\"../object/pairs\":86,\"./isStrictComparable\":69}],59:[function(require,module,exports){\nvar isNative = require('../lang/isNative');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = object == null ? undefined : object[key];\n  return isNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n\n},{\"../lang/isNative\":78}],60:[function(require,module,exports){\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add array properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n\n},{}],61:[function(require,module,exports){\nvar bufferClone = require('./bufferClone');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    stringTag = '[object String]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return bufferClone(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      var buffer = object.buffer;\n      return new Ctor(isDeep ? bufferClone(buffer) : buffer, object.byteOffset, object.length);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      var result = new Ctor(object.source, reFlags.exec(object));\n      result.lastIndex = object.lastIndex;\n  }\n  return result;\n}\n\nmodule.exports = initCloneByTag;\n\n},{\"./bufferClone\":49}],62:[function(require,module,exports){\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  var Ctor = object.constructor;\n  if (!(typeof Ctor == 'function' && Ctor instanceof Ctor)) {\n    Ctor = Object;\n  }\n  return new Ctor;\n}\n\nmodule.exports = initCloneObject;\n\n},{}],63:[function(require,module,exports){\nvar getLength = require('./getLength'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(getLength(value));\n}\n\nmodule.exports = isArrayLike;\n\n},{\"./getLength\":57,\"./isLength\":67}],64:[function(require,module,exports){\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^\\d+$/;\n\n/**\n * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\nmodule.exports = isIndex;\n\n},{}],65:[function(require,module,exports){\nvar isArrayLike = require('./isArrayLike'),\n    isIndex = require('./isIndex'),\n    isObject = require('../lang/isObject');\n\n/**\n * Checks if the provided arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n      ? (isArrayLike(object) && isIndex(index, object.length))\n      : (type == 'string' && index in object)) {\n    var other = object[index];\n    return value === value ? (value === other) : (other !== other);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n\n},{\"../lang/isObject\":79,\"./isArrayLike\":63,\"./isIndex\":64}],66:[function(require,module,exports){\nvar isArray = require('../lang/isArray'),\n    toObject = require('./toObject');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\n\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  var type = typeof value;\n  if ((type == 'string' && reIsPlainProp.test(value)) || type == 'number') {\n    return true;\n  }\n  if (isArray(value)) {\n    return false;\n  }\n  var result = !reIsDeepProp.test(value);\n  return result || (object != null && value in toObject(object));\n}\n\nmodule.exports = isKey;\n\n},{\"../lang/isArray\":76,\"./toObject\":71}],67:[function(require,module,exports){\n/**\n * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n */\nfunction isLength(value) {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n\n},{}],68:[function(require,module,exports){\n/**\n * Checks if `value` is object-like.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n},{}],69:[function(require,module,exports){\nvar isObject = require('../lang/isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n\n},{\"../lang/isObject\":79}],70:[function(require,module,exports){\nvar isArguments = require('../lang/isArguments'),\n    isArray = require('../lang/isArray'),\n    isIndex = require('./isIndex'),\n    isLength = require('./isLength'),\n    keysIn = require('../object/keysIn');\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A fallback implementation of `Object.keys` which creates an array of the\n * own enumerable property names of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction shimKeys(object) {\n  var props = keysIn(object),\n      propsLength = props.length,\n      length = propsLength && object.length;\n\n  var allowIndexes = !!length && isLength(length) &&\n    (isArray(object) || isArguments(object));\n\n  var index = -1,\n      result = [];\n\n  while (++index < propsLength) {\n    var key = props[index];\n    if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = shimKeys;\n\n},{\"../lang/isArguments\":75,\"../lang/isArray\":76,\"../object/keysIn\":84,\"./isIndex\":64,\"./isLength\":67}],71:[function(require,module,exports){\nvar isObject = require('../lang/isObject');\n\n/**\n * Converts `value` to an object if it's not one.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {Object} Returns the object.\n */\nfunction toObject(value) {\n  return isObject(value) ? value : Object(value);\n}\n\nmodule.exports = toObject;\n\n},{\"../lang/isObject\":79}],72:[function(require,module,exports){\nvar baseToString = require('./baseToString'),\n    isArray = require('../lang/isArray');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\n\\\\]|\\\\.)*?)\\2)\\]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `value` to property path array if it's not one.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {Array} Returns the property path array.\n */\nfunction toPath(value) {\n  if (isArray(value)) {\n    return value;\n  }\n  var result = [];\n  baseToString(value).replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n}\n\nmodule.exports = toPath;\n\n},{\"../lang/isArray\":76,\"./baseToString\":47}],73:[function(require,module,exports){\nvar baseClone = require('../internal/baseClone'),\n    bindCallback = require('../internal/bindCallback'),\n    isIterateeCall = require('../internal/isIterateeCall');\n\n/**\n * Creates a clone of `value`. If `isDeep` is `true` nested objects are cloned,\n * otherwise they are assigned by reference. If `customizer` is provided it's\n * invoked to produce the cloned values. If `customizer` returns `undefined`\n * cloning is handled by the method instead. The `customizer` is bound to\n * `thisArg` and invoked with up to three argument; (value [, index|key, object]).\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).\n * The enumerable properties of `arguments` objects and objects created by\n * constructors other than `Object` are cloned to plain `Object` objects. An\n * empty object is returned for uncloneable values such as functions, DOM nodes,\n * Maps, Sets, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {Function} [customizer] The function to customize cloning values.\n * @param {*} [thisArg] The `this` binding of `customizer`.\n * @returns {*} Returns the cloned value.\n * @example\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * var shallow = _.clone(users);\n * shallow[0] === users[0];\n * // => true\n *\n * var deep = _.clone(users, true);\n * deep[0] === users[0];\n * // => false\n *\n * // using a customizer callback\n * var el = _.clone(document.body, function(value) {\n *   if (_.isElement(value)) {\n *     return value.cloneNode(false);\n *   }\n * });\n *\n * el === document.body\n * // => false\n * el.nodeName\n * // => BODY\n * el.childNodes.length;\n * // => 0\n */\nfunction clone(value, isDeep, customizer, thisArg) {\n  if (isDeep && typeof isDeep != 'boolean' && isIterateeCall(value, isDeep, customizer)) {\n    isDeep = false;\n  }\n  else if (typeof isDeep == 'function') {\n    thisArg = customizer;\n    customizer = isDeep;\n    isDeep = false;\n  }\n  return typeof customizer == 'function'\n    ? baseClone(value, isDeep, bindCallback(customizer, thisArg, 3))\n    : baseClone(value, isDeep);\n}\n\nmodule.exports = clone;\n\n},{\"../internal/baseClone\":29,\"../internal/bindCallback\":48,\"../internal/isIterateeCall\":65}],74:[function(require,module,exports){\nvar baseClone = require('../internal/baseClone'),\n    bindCallback = require('../internal/bindCallback');\n\n/**\n * Creates a deep clone of `value`. If `customizer` is provided it's invoked\n * to produce the cloned values. If `customizer` returns `undefined` cloning\n * is handled by the method instead. The `customizer` is bound to `thisArg`\n * and invoked with up to three argument; (value [, index|key, object]).\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).\n * The enumerable properties of `arguments` objects and objects created by\n * constructors other than `Object` are cloned to plain `Object` objects. An\n * empty object is returned for uncloneable values such as functions, DOM nodes,\n * Maps, Sets, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to deep clone.\n * @param {Function} [customizer] The function to customize cloning values.\n * @param {*} [thisArg] The `this` binding of `customizer`.\n * @returns {*} Returns the deep cloned value.\n * @example\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * var deep = _.cloneDeep(users);\n * deep[0] === users[0];\n * // => false\n *\n * // using a customizer callback\n * var el = _.cloneDeep(document.body, function(value) {\n *   if (_.isElement(value)) {\n *     return value.cloneNode(true);\n *   }\n * });\n *\n * el === document.body\n * // => false\n * el.nodeName\n * // => BODY\n * el.childNodes.length;\n * // => 20\n */\nfunction cloneDeep(value, customizer, thisArg) {\n  return typeof customizer == 'function'\n    ? baseClone(value, true, bindCallback(customizer, thisArg, 3))\n    : baseClone(value, true);\n}\n\nmodule.exports = cloneDeep;\n\n},{\"../internal/baseClone\":29,\"../internal/bindCallback\":48}],75:[function(require,module,exports){\nvar isArrayLike = require('../internal/isArrayLike'),\n    isObjectLike = require('../internal/isObjectLike');\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Native method references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is classified as an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  return isObjectLike(value) && isArrayLike(value) &&\n    hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');\n}\n\nmodule.exports = isArguments;\n\n},{\"../internal/isArrayLike\":63,\"../internal/isObjectLike\":68}],76:[function(require,module,exports){\nvar getNative = require('../internal/getNative'),\n    isLength = require('../internal/isLength'),\n    isObjectLike = require('../internal/isObjectLike');\n\n/** `Object#toString` result references. */\nvar arrayTag = '[object Array]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeIsArray = getNative(Array, 'isArray');\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(function() { return arguments; }());\n * // => false\n */\nvar isArray = nativeIsArray || function(value) {\n  return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;\n};\n\nmodule.exports = isArray;\n\n},{\"../internal/getNative\":59,\"../internal/isLength\":67,\"../internal/isObjectLike\":68}],77:[function(require,module,exports){\nvar isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in older versions of Chrome and Safari which return 'function' for regexes\n  // and Safari 8 which returns 'object' for typed array constructors.\n  return isObject(value) && objToString.call(value) == funcTag;\n}\n\nmodule.exports = isFunction;\n\n},{\"./isObject\":79}],78:[function(require,module,exports){\nvar isFunction = require('./isFunction'),\n    isObjectLike = require('../internal/isObjectLike');\n\n/** Used to detect host constructors (Safari > 5). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar fnToString = Function.prototype.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  fnToString.call(hasOwnProperty).replace(/[\\\\^$.*+?()[\\]{}|]/g, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * Checks if `value` is a native function.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n * @example\n *\n * _.isNative(Array.prototype.push);\n * // => true\n *\n * _.isNative(_);\n * // => false\n */\nfunction isNative(value) {\n  if (value == null) {\n    return false;\n  }\n  if (isFunction(value)) {\n    return reIsNative.test(fnToString.call(value));\n  }\n  return isObjectLike(value) && reIsHostCtor.test(value);\n}\n\nmodule.exports = isNative;\n\n},{\"../internal/isObjectLike\":68,\"./isFunction\":77}],79:[function(require,module,exports){\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(1);\n * // => false\n */\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n\n},{}],80:[function(require,module,exports){\nvar baseForIn = require('../internal/baseForIn'),\n    isArguments = require('./isArguments'),\n    isObjectLike = require('../internal/isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * **Note:** This method assumes objects created by the `Object` constructor\n * have no inherited enumerable properties.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  var Ctor;\n\n  // Exit early for non `Object` objects.\n  if (!(isObjectLike(value) && objToString.call(value) == objectTag && !isArguments(value)) ||\n      (!hasOwnProperty.call(value, 'constructor') && (Ctor = value.constructor, typeof Ctor == 'function' && !(Ctor instanceof Ctor)))) {\n    return false;\n  }\n  // IE < 9 iterates inherited properties before own properties. If the first\n  // iterated property is an object's own property then there are no inherited\n  // enumerable properties.\n  var result;\n  // In most environments an object's own properties are iterated before\n  // its inherited properties. If the last iterated property is an object's\n  // own property then there are no inherited enumerable properties.\n  baseForIn(value, function(subValue, key) {\n    result = key;\n  });\n  return result === undefined || hasOwnProperty.call(value, result);\n}\n\nmodule.exports = isPlainObject;\n\n},{\"../internal/baseForIn\":33,\"../internal/isObjectLike\":68,\"./isArguments\":75}],81:[function(require,module,exports){\nvar isLength = require('../internal/isLength'),\n    isObjectLike = require('../internal/isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dateTag] = typedArrayTags[errorTag] =\ntypedArrayTags[funcTag] = typedArrayTags[mapTag] =\ntypedArrayTags[numberTag] = typedArrayTags[objectTag] =\ntypedArrayTags[regexpTag] = typedArrayTags[setTag] =\ntypedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nfunction isTypedArray(value) {\n  return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objToString.call(value)];\n}\n\nmodule.exports = isTypedArray;\n\n},{\"../internal/isLength\":67,\"../internal/isObjectLike\":68}],82:[function(require,module,exports){\nvar baseCopy = require('../internal/baseCopy'),\n    keysIn = require('../object/keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable\n * properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return baseCopy(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n\n},{\"../internal/baseCopy\":30,\"../object/keysIn\":84}],83:[function(require,module,exports){\nvar getNative = require('../internal/getNative'),\n    isArrayLike = require('../internal/isArrayLike'),\n    isObject = require('../lang/isObject'),\n    shimKeys = require('../internal/shimKeys');\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = getNative(Object, 'keys');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nvar keys = !nativeKeys ? shimKeys : function(object) {\n  var Ctor = object == null ? undefined : object.constructor;\n  if ((typeof Ctor == 'function' && Ctor.prototype === object) ||\n      (typeof object != 'function' && isArrayLike(object))) {\n    return shimKeys(object);\n  }\n  return isObject(object) ? nativeKeys(object) : [];\n};\n\nmodule.exports = keys;\n\n},{\"../internal/getNative\":59,\"../internal/isArrayLike\":63,\"../internal/shimKeys\":70,\"../lang/isObject\":79}],84:[function(require,module,exports){\nvar isArguments = require('../lang/isArguments'),\n    isArray = require('../lang/isArray'),\n    isIndex = require('../internal/isIndex'),\n    isLength = require('../internal/isLength'),\n    isObject = require('../lang/isObject');\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  if (object == null) {\n    return [];\n  }\n  if (!isObject(object)) {\n    object = Object(object);\n  }\n  var length = object.length;\n  length = (length && isLength(length) &&\n    (isArray(object) || isArguments(object)) && length) || 0;\n\n  var Ctor = object.constructor,\n      index = -1,\n      isProto = typeof Ctor == 'function' && Ctor.prototype === object,\n      result = Array(length),\n      skipIndexes = length > 0;\n\n  while (++index < length) {\n    result[index] = (index + '');\n  }\n  for (var key in object) {\n    if (!(skipIndexes && isIndex(key, length)) &&\n        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keysIn;\n\n},{\"../internal/isIndex\":64,\"../internal/isLength\":67,\"../lang/isArguments\":75,\"../lang/isArray\":76,\"../lang/isObject\":79}],85:[function(require,module,exports){\nvar baseMerge = require('../internal/baseMerge'),\n    createAssigner = require('../internal/createAssigner');\n\n/**\n * Recursively merges own enumerable properties of the source object(s), that\n * don't resolve to `undefined` into the destination object. Subsequent sources\n * overwrite property assignments of previous sources. If `customizer` is\n * provided it's invoked to produce the merged values of the destination and\n * source properties. If `customizer` returns `undefined` merging is handled\n * by the method instead. The `customizer` is bound to `thisArg` and invoked\n * with five arguments: (objectValue, sourceValue, key, object, source).\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {*} [thisArg] The `this` binding of `customizer`.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var users = {\n *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]\n * };\n *\n * var ages = {\n *   'data': [{ 'age': 36 }, { 'age': 40 }]\n * };\n *\n * _.merge(users, ages);\n * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }\n *\n * // using a customizer callback\n * var object = {\n *   'fruits': ['apple'],\n *   'vegetables': ['beet']\n * };\n *\n * var other = {\n *   'fruits': ['banana'],\n *   'vegetables': ['carrot']\n * };\n *\n * _.merge(object, other, function(a, b) {\n *   if (_.isArray(a)) {\n *     return a.concat(b);\n *   }\n * });\n * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot'] }\n */\nvar merge = createAssigner(baseMerge);\n\nmodule.exports = merge;\n\n},{\"../internal/baseMerge\":42,\"../internal/createAssigner\":50}],86:[function(require,module,exports){\nvar keys = require('./keys'),\n    toObject = require('../internal/toObject');\n\n/**\n * Creates a two dimensional array of the key-value pairs for `object`,\n * e.g. `[[key1, value1], [key2, value2]]`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the new array of key-value pairs.\n * @example\n *\n * _.pairs({ 'barney': 36, 'fred': 40 });\n * // => [['barney', 36], ['fred', 40]] (iteration order is not guaranteed)\n */\nfunction pairs(object) {\n  object = toObject(object);\n\n  var index = -1,\n      props = keys(object),\n      length = props.length,\n      result = Array(length);\n\n  while (++index < length) {\n    var key = props[index];\n    result[index] = [key, object[key]];\n  }\n  return result;\n}\n\nmodule.exports = pairs;\n\n},{\"../internal/toObject\":71,\"./keys\":83}],87:[function(require,module,exports){\n/**\n * This method returns the first argument provided to it.\n *\n * @static\n * @memberOf _\n * @category Utility\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'user': 'fred' };\n *\n * _.identity(object) === object;\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n\n},{}],88:[function(require,module,exports){\nvar baseProperty = require('../internal/baseProperty'),\n    basePropertyDeep = require('../internal/basePropertyDeep'),\n    isKey = require('../internal/isKey');\n\n/**\n * Creates a function that returns the property value at `path` on a\n * given object.\n *\n * @static\n * @memberOf _\n * @category Utility\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': { 'c': 2 } } },\n *   { 'a': { 'b': { 'c': 1 } } }\n * ];\n *\n * _.map(objects, _.property('a.b.c'));\n * // => [2, 1]\n *\n * _.pluck(_.sortBy(objects, _.property(['a', 'b', 'c'])), 'a.b.c');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(path) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n\n},{\"../internal/baseProperty\":44,\"../internal/basePropertyDeep\":45,\"../internal/isKey\":66}],89:[function(require,module,exports){\n;(function (global, factory) { // eslint-disable-line\r\n\t\"use strict\"\r\n\t/* eslint-disable no-undef */\r\n\tvar m = factory(global)\r\n\tif (typeof module === \"object\" && module != null && module.exports) {\r\n\t\tmodule.exports = m\r\n\t} else if (typeof define === \"function\" && define.amd) {\r\n\t\tdefine(function () { return m })\r\n\t} else {\r\n\t\tglobal.m = m\r\n\t}\r\n\t/* eslint-enable no-undef */\r\n})(typeof window !== \"undefined\" ? window : {}, function (global, undefined) { // eslint-disable-line\r\n\t\"use strict\"\r\n\r\n\tm.version = function () {\r\n\t\treturn \"v0.2.3\"\r\n\t}\r\n\r\n\tvar hasOwn = {}.hasOwnProperty\r\n\tvar type = {}.toString\r\n\r\n\tfunction isFunction(object) {\r\n\t\treturn typeof object === \"function\"\r\n\t}\r\n\r\n\tfunction isObject(object) {\r\n\t\treturn type.call(object) === \"[object Object]\"\r\n\t}\r\n\r\n\tfunction isString(object) {\r\n\t\treturn type.call(object) === \"[object String]\"\r\n\t}\r\n\r\n\tvar isArray = Array.isArray || function (object) {\r\n\t\treturn type.call(object) === \"[object Array]\"\r\n\t}\r\n\r\n\tfunction noop() {}\r\n\r\n\tvar voidElements = {\r\n\t\tAREA: 1,\r\n\t\tBASE: 1,\r\n\t\tBR: 1,\r\n\t\tCOL: 1,\r\n\t\tCOMMAND: 1,\r\n\t\tEMBED: 1,\r\n\t\tHR: 1,\r\n\t\tIMG: 1,\r\n\t\tINPUT: 1,\r\n\t\tKEYGEN: 1,\r\n\t\tLINK: 1,\r\n\t\tMETA: 1,\r\n\t\tPARAM: 1,\r\n\t\tSOURCE: 1,\r\n\t\tTRACK: 1,\r\n\t\tWBR: 1\r\n\t}\r\n\r\n\t// caching commonly used variables\r\n\tvar $document, $location, $requestAnimationFrame, $cancelAnimationFrame\r\n\r\n\t// self invoking function needed because of the way mocks work\r\n\tfunction initialize(mock) {\r\n\t\t$document = mock.document\r\n\t\t$location = mock.location\r\n\t\t$cancelAnimationFrame = mock.cancelAnimationFrame || mock.clearTimeout\r\n\t\t$requestAnimationFrame = mock.requestAnimationFrame || mock.setTimeout\r\n\t}\r\n\r\n\t// testing API\r\n\tm.deps = function (mock) {\r\n\t\tinitialize(global = mock || window)\r\n\t\treturn global\r\n\t}\r\n\r\n\tm.deps(global)\r\n\r\n\t/**\r\n\t * @typedef {String} Tag\r\n\t * A string that looks like -> div.classname#id[param=one][param2=two]\r\n\t * Which describes a DOM node\r\n\t */\r\n\r\n\tfunction parseTagAttrs(cell, tag) {\r\n\t\tvar classes = []\r\n\t\tvar parser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[.+?\\])/g\r\n\t\tvar match\r\n\r\n\t\twhile ((match = parser.exec(tag))) {\r\n\t\t\tif (match[1] === \"\" && match[2]) {\r\n\t\t\t\tcell.tag = match[2]\r\n\t\t\t} else if (match[1] === \"#\") {\r\n\t\t\t\tcell.attrs.id = match[2]\r\n\t\t\t} else if (match[1] === \".\") {\r\n\t\t\t\tclasses.push(match[2])\r\n\t\t\t} else if (match[3][0] === \"[\") {\r\n\t\t\t\tvar pair = /\\[(.+?)(?:=(\"|'|)(.*?)\\2)?\\]/.exec(match[3])\r\n\t\t\t\tcell.attrs[pair[1]] = pair[3] || (pair[2] ? \"\" : true)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn classes\r\n\t}\r\n\r\n\tfunction getVirtualChildren(args, hasAttrs) {\r\n\t\tvar children = hasAttrs ? args.slice(1) : args\r\n\r\n\t\tif (children.length === 1 && isArray(children[0])) {\r\n\t\t\treturn children[0]\r\n\t\t} else {\r\n\t\t\treturn children\r\n\t\t}\r\n\t}\r\n\r\n\tfunction assignAttrs(target, attrs, classes) {\r\n\t\tvar classAttr = \"class\" in attrs ? \"class\" : \"className\"\r\n\r\n\t\tfor (var attrName in attrs) {\r\n\t\t\tif (hasOwn.call(attrs, attrName)) {\r\n\t\t\t\tif (attrName === classAttr &&\r\n\t\t\t\t\t\tattrs[attrName] != null &&\r\n\t\t\t\t\t\tattrs[attrName] !== \"\") {\r\n\t\t\t\t\tclasses.push(attrs[attrName])\r\n\t\t\t\t\t// create key in correct iteration order\r\n\t\t\t\t\ttarget[attrName] = \"\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[attrName] = attrs[attrName]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (classes.length) target[classAttr] = classes.join(\" \")\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param {Tag} The DOM node tag\r\n\t * @param {Object=[]} optional key-value pairs to be mapped to DOM attrs\r\n\t * @param {...mNode=[]} Zero or more Mithril child nodes. Can be an array,\r\n\t *                      or splat (optional)\r\n\t */\r\n\tfunction m(tag, pairs) {\r\n\t\tvar args = [].slice.call(arguments, 1)\r\n\r\n\t\tif (isObject(tag)) return parameterize(tag, args)\r\n\r\n\t\tif (!isString(tag)) {\r\n\t\t\tthrow new Error(\"selector in m(selector, attrs, children) should \" +\r\n\t\t\t\t\"be a string\")\r\n\t\t}\r\n\r\n\t\tvar hasAttrs = pairs != null && isObject(pairs) &&\r\n\t\t\t!(\"tag\" in pairs || \"view\" in pairs || \"subtree\" in pairs)\r\n\r\n\t\tvar attrs = hasAttrs ? pairs : {}\r\n\t\tvar cell = {\r\n\t\t\ttag: \"div\",\r\n\t\t\tattrs: {},\r\n\t\t\tchildren: getVirtualChildren(args, hasAttrs)\r\n\t\t}\r\n\r\n\t\tassignAttrs(cell.attrs, attrs, parseTagAttrs(cell, tag))\r\n\t\treturn cell\r\n\t}\r\n\r\n\tfunction forEach(list, f) {\r\n\t\tfor (var i = 0; i < list.length && !f(list[i], i++);) {\r\n\t\t\t// function called in condition\r\n\t\t}\r\n\t}\r\n\r\n\tfunction forKeys(list, f) {\r\n\t\tforEach(list, function (attrs, i) {\r\n\t\t\treturn (attrs = attrs && attrs.attrs) &&\r\n\t\t\t\tattrs.key != null &&\r\n\t\t\t\tf(attrs, i)\r\n\t\t})\r\n\t}\r\n\t// This function was causing deopts in Chrome.\r\n\tfunction dataToString(data) {\r\n\t\t// data.toString() might throw or return null if data is the return\r\n\t\t// value of Console.log in some versions of Firefox (behavior depends on\r\n\t\t// version)\r\n\t\ttry {\r\n\t\t\tif (data != null && data.toString() != null) return data\r\n\t\t} catch (e) {\r\n\t\t\t// silently ignore errors\r\n\t\t}\r\n\t\treturn \"\"\r\n\t}\r\n\r\n\t// This function was causing deopts in Chrome.\r\n\tfunction injectTextNode(parentElement, first, index, data) {\r\n\t\ttry {\r\n\t\t\tinsertNode(parentElement, first, index)\r\n\t\t\tfirst.nodeValue = data\r\n\t\t} catch (e) {\r\n\t\t\t// IE erroneously throws error when appending an empty text node\r\n\t\t\t// after a null\r\n\t\t}\r\n\t}\r\n\r\n\tfunction flatten(list) {\r\n\t\t// recursively flatten array\r\n\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\tif (isArray(list[i])) {\r\n\t\t\t\tlist = list.concat.apply([], list)\r\n\t\t\t\t// check current index again and flatten until there are no more\r\n\t\t\t\t// nested arrays at that index\r\n\t\t\t\ti--\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn list\r\n\t}\r\n\r\n\tfunction insertNode(parentElement, node, index) {\r\n\t\tparentElement.insertBefore(node,\r\n\t\t\tparentElement.childNodes[index] || null)\r\n\t}\r\n\r\n\tvar DELETION = 1\r\n\tvar INSERTION = 2\r\n\tvar MOVE = 3\r\n\r\n\tfunction handleKeysDiffer(data, existing, cached, parentElement) {\r\n\t\tforKeys(data, function (key, i) {\r\n\t\t\texisting[key = key.key] = existing[key] ? {\r\n\t\t\t\taction: MOVE,\r\n\t\t\t\tindex: i,\r\n\t\t\t\tfrom: existing[key].index,\r\n\t\t\t\telement: cached.nodes[existing[key].index] ||\r\n\t\t\t\t\t$document.createElement(\"div\")\r\n\t\t\t} : {action: INSERTION, index: i}\r\n\t\t})\r\n\r\n\t\tvar actions = []\r\n\t\tfor (var prop in existing) if (hasOwn.call(existing, prop)) {\r\n\t\t\tactions.push(existing[prop])\r\n\t\t}\r\n\r\n\t\tvar changes = actions.sort(sortChanges)\r\n\t\tvar newCached = new Array(cached.length)\r\n\r\n\t\tnewCached.nodes = cached.nodes.slice()\r\n\r\n\t\tforEach(changes, function (change) {\r\n\t\t\tvar index = change.index\r\n\t\t\tif (change.action === DELETION) {\r\n\t\t\t\tclear(cached[index].nodes, cached[index])\r\n\t\t\t\tnewCached.splice(index, 1)\r\n\t\t\t}\r\n\t\t\tif (change.action === INSERTION) {\r\n\t\t\t\tvar dummy = $document.createElement(\"div\")\r\n\t\t\t\tdummy.key = data[index].attrs.key\r\n\t\t\t\tinsertNode(parentElement, dummy, index)\r\n\t\t\t\tnewCached.splice(index, 0, {\r\n\t\t\t\t\tattrs: {key: data[index].attrs.key},\r\n\t\t\t\t\tnodes: [dummy]\r\n\t\t\t\t})\r\n\t\t\t\tnewCached.nodes[index] = dummy\r\n\t\t\t}\r\n\r\n\t\t\tif (change.action === MOVE) {\r\n\t\t\t\tvar changeElement = change.element\r\n\t\t\t\tvar maybeChanged = parentElement.childNodes[index]\r\n\t\t\t\tif (maybeChanged !== changeElement && changeElement !== null) {\r\n\t\t\t\t\tparentElement.insertBefore(changeElement,\r\n\t\t\t\t\t\tmaybeChanged || null)\r\n\t\t\t\t}\r\n\t\t\t\tnewCached[index] = cached[change.from]\r\n\t\t\t\tnewCached.nodes[index] = changeElement\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn newCached\r\n\t}\r\n\r\n\tfunction diffKeys(data, cached, existing, parentElement) {\r\n\t\tvar keysDiffer = data.length !== cached.length\r\n\r\n\t\tif (!keysDiffer) {\r\n\t\t\tforKeys(data, function (attrs, i) {\r\n\t\t\t\tvar cachedCell = cached[i]\r\n\t\t\t\treturn keysDiffer = cachedCell &&\r\n\t\t\t\t\tcachedCell.attrs &&\r\n\t\t\t\t\tcachedCell.attrs.key !== attrs.key\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (keysDiffer) {\r\n\t\t\treturn handleKeysDiffer(data, existing, cached, parentElement)\r\n\t\t} else {\r\n\t\t\treturn cached\r\n\t\t}\r\n\t}\r\n\r\n\tfunction diffArray(data, cached, nodes) {\r\n\t\t// diff the array itself\r\n\r\n\t\t// update the list of DOM nodes by collecting the nodes from each item\r\n\t\tforEach(data, function (_, i) {\r\n\t\t\tif (cached[i] != null) nodes.push.apply(nodes, cached[i].nodes)\r\n\t\t})\r\n\t\t// remove items from the end of the array if the new array is shorter\r\n\t\t// than the old one. if errors ever happen here, the issue is most\r\n\t\t// likely a bug in the construction of the `cached` data structure\r\n\t\t// somewhere earlier in the program\r\n\t\tforEach(cached.nodes, function (node, i) {\r\n\t\t\tif (node.parentNode != null && nodes.indexOf(node) < 0) {\r\n\t\t\t\tclear([node], [cached[i]])\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tif (data.length < cached.length) cached.length = data.length\r\n\t\tcached.nodes = nodes\r\n\t}\r\n\r\n\tfunction buildArrayKeys(data) {\r\n\t\tvar guid = 0\r\n\t\tforKeys(data, function () {\r\n\t\t\tforEach(data, function (attrs) {\r\n\t\t\t\tif ((attrs = attrs && attrs.attrs) && attrs.key == null) {\r\n\t\t\t\t\tattrs.key = \"__mithril__\" + guid++\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn 1\r\n\t\t})\r\n\t}\r\n\r\n\tfunction isDifferentEnough(data, cached, dataAttrKeys) {\r\n\t\tif (data.tag !== cached.tag) return true\r\n\r\n\t\tif (dataAttrKeys.sort().join() !==\r\n\t\t\t\tObject.keys(cached.attrs).sort().join()) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (data.attrs.id !== cached.attrs.id) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (data.attrs.key !== cached.attrs.key) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (m.redraw.strategy() === \"all\") {\r\n\t\t\treturn !cached.configContext || cached.configContext.retain !== true\r\n\t\t}\r\n\r\n\t\tif (m.redraw.strategy() === \"diff\") {\r\n\t\t\treturn cached.configContext && cached.configContext.retain === false\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tfunction maybeRecreateObject(data, cached, dataAttrKeys) {\r\n\t\t// if an element is different enough from the one in cache, recreate it\r\n\t\tif (isDifferentEnough(data, cached, dataAttrKeys)) {\r\n\t\t\tif (cached.nodes.length) clear(cached.nodes)\r\n\r\n\t\t\tif (cached.configContext &&\r\n\t\t\t\t\tisFunction(cached.configContext.onunload)) {\r\n\t\t\t\tcached.configContext.onunload()\r\n\t\t\t}\r\n\r\n\t\t\tif (cached.controllers) {\r\n\t\t\t\tforEach(cached.controllers, function (controller) {\r\n\t\t\t\t\tif (controller.onunload) controller.onunload({preventDefault: noop});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getObjectNamespace(data, namespace) {\r\n\t\tif (data.attrs.xmlns) return data.attrs.xmlns\r\n\t\tif (data.tag === \"svg\") return \"http://www.w3.org/2000/svg\"\r\n\t\tif (data.tag === \"math\") return \"http://www.w3.org/1998/Math/MathML\"\r\n\t\treturn namespace\r\n\t}\r\n\r\n\tvar pendingRequests = 0\r\n\tm.startComputation = function () { pendingRequests++ }\r\n\tm.endComputation = function () {\r\n\t\tif (pendingRequests > 1) {\r\n\t\t\tpendingRequests--\r\n\t\t} else {\r\n\t\t\tpendingRequests = 0\r\n\t\t\tm.redraw()\r\n\t\t}\r\n\t}\r\n\r\n\tfunction unloadCachedControllers(cached, views, controllers) {\r\n\t\tif (controllers.length) {\r\n\t\t\tcached.views = views\r\n\t\t\tcached.controllers = controllers\r\n\t\t\tforEach(controllers, function (controller) {\r\n\t\t\t\tif (controller.onunload && controller.onunload.$old) {\r\n\t\t\t\t\tcontroller.onunload = controller.onunload.$old\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (pendingRequests && controller.onunload) {\r\n\t\t\t\t\tvar onunload = controller.onunload\r\n\t\t\t\t\tcontroller.onunload = noop\r\n\t\t\t\t\tcontroller.onunload.$old = onunload\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction scheduleConfigsToBeCalled(configs, data, node, isNew, cached) {\r\n\t\t// schedule configs to be called. They are called after `build` finishes\r\n\t\t// running\r\n\t\tif (isFunction(data.attrs.config)) {\r\n\t\t\tvar context = cached.configContext = cached.configContext || {}\r\n\r\n\t\t\t// bind\r\n\t\t\tconfigs.push(function () {\r\n\t\t\t\treturn data.attrs.config.call(data, node, !isNew, context,\r\n\t\t\t\t\tcached)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction buildUpdatedNode(\r\n\t\tcached,\r\n\t\tdata,\r\n\t\teditable,\r\n\t\thasKeys,\r\n\t\tnamespace,\r\n\t\tviews,\r\n\t\tconfigs,\r\n\t\tcontrollers\r\n\t) {\r\n\t\tvar node = cached.nodes[0]\r\n\r\n\t\tif (hasKeys) {\r\n\t\t\tsetAttributes(node, data.tag, data.attrs, cached.attrs, namespace)\r\n\t\t}\r\n\r\n\t\tcached.children = build(\r\n\t\t\tnode,\r\n\t\t\tdata.tag,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tdata.children,\r\n\t\t\tcached.children,\r\n\t\t\tfalse,\r\n\t\t\t0,\r\n\t\t\tdata.attrs.contenteditable ? node : editable,\r\n\t\t\tnamespace,\r\n\t\t\tconfigs\r\n\t\t)\r\n\r\n\t\tcached.nodes.intact = true\r\n\r\n\t\tif (controllers.length) {\r\n\t\t\tcached.views = views\r\n\t\t\tcached.controllers = controllers\r\n\t\t}\r\n\r\n\t\treturn node\r\n\t}\r\n\r\n\tfunction handleNonexistentNodes(data, parentElement, index) {\r\n\t\tvar nodes\r\n\t\tif (data.$trusted) {\r\n\t\t\tnodes = injectHTML(parentElement, index, data)\r\n\t\t} else {\r\n\t\t\tnodes = [$document.createTextNode(data)]\r\n\t\t\tif (!(parentElement.nodeName in voidElements)) {\r\n\t\t\t\tinsertNode(parentElement, nodes[0], index)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar cached\r\n\r\n\t\tif (typeof data === \"string\" ||\r\n\t\t\t\ttypeof data === \"number\" ||\r\n\t\t\t\ttypeof data === \"boolean\") {\r\n\t\t\tcached = new data.constructor(data)\r\n\t\t} else {\r\n\t\t\tcached = data\r\n\t\t}\r\n\r\n\t\tcached.nodes = nodes\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction reattachNodes(\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tparentElement,\r\n\t\teditable,\r\n\t\tindex,\r\n\t\tparentTag\r\n\t) {\r\n\t\tvar nodes = cached.nodes\r\n\t\tif (!editable || editable !== $document.activeElement) {\r\n\t\t\tif (data.$trusted) {\r\n\t\t\t\tclear(nodes, cached)\r\n\t\t\t\tnodes = injectHTML(parentElement, index, data)\r\n\t\t\t} else if (parentTag === \"textarea\") {\r\n\t\t\t\t// <textarea> uses `value` instead of `nodeValue`.\r\n\t\t\t\tparentElement.value = data\r\n\t\t\t} else if (editable) {\r\n\t\t\t\t// contenteditable nodes use `innerHTML` instead of `nodeValue`.\r\n\t\t\t\teditable.innerHTML = data\r\n\t\t\t} else {\r\n\t\t\t\t// was a trusted string\r\n\t\t\t\tif (nodes[0].nodeType === 1 || nodes.length > 1 ||\r\n\t\t\t\t\t\t(nodes[0].nodeValue.trim &&\r\n\t\t\t\t\t\t\t!nodes[0].nodeValue.trim())) {\r\n\t\t\t\t\tclear(cached.nodes, cached)\r\n\t\t\t\t\tnodes = [$document.createTextNode(data)]\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinjectTextNode(parentElement, nodes[0], index, data)\r\n\t\t\t}\r\n\t\t}\r\n\t\tcached = new data.constructor(data)\r\n\t\tcached.nodes = nodes\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction handleTextNode(\r\n\t\tcached,\r\n\t\tdata,\r\n\t\tindex,\r\n\t\tparentElement,\r\n\t\tshouldReattach,\r\n\t\teditable,\r\n\t\tparentTag\r\n\t) {\r\n\t\tif (!cached.nodes.length) {\r\n\t\t\treturn handleNonexistentNodes(data, parentElement, index)\r\n\t\t} else if (cached.valueOf() !== data.valueOf() || shouldReattach) {\r\n\t\t\treturn reattachNodes(data, cached, parentElement, editable, index,\r\n\t\t\t\tparentTag)\r\n\t\t} else {\r\n\t\t\treturn (cached.nodes.intact = true, cached)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getSubArrayCount(item) {\r\n\t\tif (item.$trusted) {\r\n\t\t\t// fix offset of next element if item was a trusted string w/ more\r\n\t\t\t// than one html element\r\n\t\t\t// the first clause in the regexp matches elements\r\n\t\t\t// the second clause (after the pipe) matches text nodes\r\n\t\t\tvar match = item.match(/<[^\\/]|\\>\\s*[^<]/g)\r\n\t\t\tif (match != null) return match.length\r\n\t\t} else if (isArray(item)) {\r\n\t\t\treturn item.length\r\n\t\t}\r\n\t\treturn 1\r\n\t}\r\n\r\n\tfunction buildArray(\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tparentElement,\r\n\t\tindex,\r\n\t\tparentTag,\r\n\t\tshouldReattach,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tdata = flatten(data)\r\n\t\tvar nodes = []\r\n\t\tvar intact = cached.length === data.length\r\n\t\tvar subArrayCount = 0\r\n\r\n\t\t// keys algorithm: sort elements without recreating them if keys are\r\n\t\t// present\r\n\t\t//\r\n\t\t// 1) create a map of all existing keys, and mark all for deletion\r\n\t\t// 2) add new keys to map and mark them for addition\r\n\t\t// 3) if key exists in new list, change action from deletion to a move\r\n\t\t// 4) for each key, handle its corresponding action as marked in\r\n\t\t//    previous steps\r\n\r\n\t\tvar existing = {}\r\n\t\tvar shouldMaintainIdentities = false\r\n\r\n\t\tforKeys(cached, function (attrs, i) {\r\n\t\t\tshouldMaintainIdentities = true\r\n\t\t\texisting[cached[i].attrs.key] = {action: DELETION, index: i}\r\n\t\t})\r\n\r\n\t\tbuildArrayKeys(data)\r\n\t\tif (shouldMaintainIdentities) {\r\n\t\t\tcached = diffKeys(data, cached, existing, parentElement)\r\n\t\t}\r\n\t\t// end key algorithm\r\n\r\n\t\tvar cacheCount = 0\r\n\t\t// faster explicitly written\r\n\t\tfor (var i = 0, len = data.length; i < len; i++) {\r\n\t\t\t// diff each item in the array\r\n\t\t\tvar item = build(\r\n\t\t\t\tparentElement,\r\n\t\t\t\tparentTag,\r\n\t\t\t\tcached,\r\n\t\t\t\tindex,\r\n\t\t\t\tdata[i],\r\n\t\t\t\tcached[cacheCount],\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\tindex + subArrayCount || subArrayCount,\r\n\t\t\t\teditable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\r\n\t\t\tif (item !== undefined) {\r\n\t\t\t\tintact = intact && item.nodes.intact\r\n\t\t\t\tsubArrayCount += getSubArrayCount(item)\r\n\t\t\t\tcached[cacheCount++] = item\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!intact) diffArray(data, cached, nodes)\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction makeCache(data, cached, index, parentIndex, parentCache) {\r\n\t\tif (cached != null) {\r\n\t\t\tif (type.call(cached) === type.call(data)) return cached\r\n\r\n\t\t\tif (parentCache && parentCache.nodes) {\r\n\t\t\t\tvar offset = index - parentIndex\r\n\t\t\t\tvar end = offset + (isArray(data) ? data : cached.nodes).length\r\n\t\t\t\tclear(\r\n\t\t\t\t\tparentCache.nodes.slice(offset, end),\r\n\t\t\t\t\tparentCache.slice(offset, end))\r\n\t\t\t} else if (cached.nodes) {\r\n\t\t\t\tclear(cached.nodes, cached)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcached = new data.constructor()\r\n\t\t// if constructor creates a virtual dom element, use a blank object as\r\n\t\t// the base cached node instead of copying the virtual el (#277)\r\n\t\tif (cached.tag) cached = {}\r\n\t\tcached.nodes = []\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction constructNode(data, namespace) {\r\n\t\tif (data.attrs.is) {\r\n\t\t\tif (namespace == null) {\r\n\t\t\t\treturn $document.createElement(data.tag, data.attrs.is)\r\n\t\t\t} else {\r\n\t\t\t\treturn $document.createElementNS(namespace, data.tag,\r\n\t\t\t\t\tdata.attrs.is)\r\n\t\t\t}\r\n\t\t} else if (namespace == null) {\r\n\t\t\treturn $document.createElement(data.tag)\r\n\t\t} else {\r\n\t\t\treturn $document.createElementNS(namespace, data.tag)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction constructAttrs(data, node, namespace, hasKeys) {\r\n\t\tif (hasKeys) {\r\n\t\t\treturn setAttributes(node, data.tag, data.attrs, {}, namespace)\r\n\t\t} else {\r\n\t\t\treturn data.attrs\r\n\t\t}\r\n\t}\r\n\r\n\tfunction constructChildren(\r\n\t\tdata,\r\n\t\tnode,\r\n\t\tcached,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tif (data.children != null && data.children.length > 0) {\r\n\t\t\treturn build(\r\n\t\t\t\tnode,\r\n\t\t\t\tdata.tag,\r\n\t\t\t\tundefined,\r\n\t\t\t\tundefined,\r\n\t\t\t\tdata.children,\r\n\t\t\t\tcached.children,\r\n\t\t\t\ttrue,\r\n\t\t\t\t0,\r\n\t\t\t\tdata.attrs.contenteditable ? node : editable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else {\r\n\t\t\treturn data.children\r\n\t\t}\r\n\t}\r\n\r\n\tfunction reconstructCached(\r\n\t\tdata,\r\n\t\tattrs,\r\n\t\tchildren,\r\n\t\tnode,\r\n\t\tnamespace,\r\n\t\tviews,\r\n\t\tcontrollers\r\n\t) {\r\n\t\tvar cached = {\r\n\t\t\ttag: data.tag,\r\n\t\t\tattrs: attrs,\r\n\t\t\tchildren: children,\r\n\t\t\tnodes: [node]\r\n\t\t}\r\n\r\n\t\tunloadCachedControllers(cached, views, controllers)\r\n\r\n\t\tif (cached.children && !cached.children.nodes) {\r\n\t\t\tcached.children.nodes = []\r\n\t\t}\r\n\r\n\t\t// edge case: setting value on <select> doesn't work before children\r\n\t\t// exist, so set it again after children have been created\r\n\t\tif (data.tag === \"select\" && \"value\" in data.attrs) {\r\n\t\t\tsetAttributes(node, data.tag, {value: data.attrs.value}, {},\r\n\t\t\t\tnamespace)\r\n\t\t}\r\n\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction getController(views, view, cachedControllers, controller) {\r\n\t\tvar controllerIndex\r\n\r\n\t\tif (m.redraw.strategy() === \"diff\" && views) {\r\n\t\t\tcontrollerIndex = views.indexOf(view)\r\n\t\t} else {\r\n\t\t\tcontrollerIndex = -1\r\n\t\t}\r\n\r\n\t\tif (controllerIndex > -1) {\r\n\t\t\treturn cachedControllers[controllerIndex]\r\n\t\t} else if (isFunction(controller)) {\r\n\t\t\treturn new controller()\r\n\t\t} else {\r\n\t\t\treturn {}\r\n\t\t}\r\n\t}\r\n\r\n\tvar unloaders = []\r\n\r\n\tfunction updateLists(views, controllers, view, controller) {\r\n\t\tif (controller.onunload != null && unloaders.map(function(u) {return u.handler}).indexOf(controller.onunload) < 0) {\r\n\t\t\tunloaders.push({\r\n\t\t\t\tcontroller: controller,\r\n\t\t\t\thandler: controller.onunload\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tviews.push(view)\r\n\t\tcontrollers.push(controller)\r\n\t}\r\n\r\n\tvar forcing = false\r\n\tfunction checkView(data, view, cached, cachedControllers, controllers, views) {\r\n\t\tvar controller = getController(cached.views, view, cachedControllers, data.controller)\r\n\t\tvar key = data && data.attrs && data.attrs.key\r\n\t\tdata = pendingRequests === 0 || forcing || cachedControllers && cachedControllers.indexOf(controller) > -1 ? data.view(controller) : {tag: \"placeholder\"}\r\n\t\tif (data.subtree === \"retain\") return data;\r\n\t\tdata.attrs = data.attrs || {}\r\n\t\tdata.attrs.key = key\r\n\t\tupdateLists(views, controllers, view, controller)\r\n\t\treturn data\r\n\t}\r\n\r\n\tfunction markViews(data, cached, views, controllers) {\r\n\t\tvar cachedControllers = cached && cached.controllers\r\n\r\n\t\twhile (data.view != null) {\r\n\t\t\tdata = checkView(\r\n\t\t\t\tdata,\r\n\t\t\t\tdata.view.$original || data.view,\r\n\t\t\t\tcached,\r\n\t\t\t\tcachedControllers,\r\n\t\t\t\tcontrollers,\r\n\t\t\t\tviews)\r\n\t\t}\r\n\r\n\t\treturn data\r\n\t}\r\n\r\n\tfunction buildObject( // eslint-disable-line max-statements\r\n\t\tdata,\r\n\t\tcached,\r\n\t\teditable,\r\n\t\tparentElement,\r\n\t\tindex,\r\n\t\tshouldReattach,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tvar views = []\r\n\t\tvar controllers = []\r\n\r\n\t\tdata = markViews(data, cached, views, controllers)\r\n\r\n\t\tif (data.subtree === \"retain\") return cached\r\n\r\n\t\tif (!data.tag && controllers.length) {\r\n\t\t\tthrow new Error(\"Component template must return a virtual \" +\r\n\t\t\t\t\"element, not an array, string, etc.\")\r\n\t\t}\r\n\r\n\t\tdata.attrs = data.attrs || {}\r\n\t\tcached.attrs = cached.attrs || {}\r\n\r\n\t\tvar dataAttrKeys = Object.keys(data.attrs)\r\n\t\tvar hasKeys = dataAttrKeys.length > (\"key\" in data.attrs ? 1 : 0)\r\n\r\n\t\tmaybeRecreateObject(data, cached, dataAttrKeys)\r\n\r\n\t\tif (!isString(data.tag)) return\r\n\r\n\t\tvar isNew = cached.nodes.length === 0\r\n\r\n\t\tnamespace = getObjectNamespace(data, namespace)\r\n\r\n\t\tvar node\r\n\t\tif (isNew) {\r\n\t\t\tnode = constructNode(data, namespace)\r\n\t\t\t// set attributes first, then create children\r\n\t\t\tvar attrs = constructAttrs(data, node, namespace, hasKeys)\r\n\r\n\t\t\tvar children = constructChildren(data, node, cached, editable,\r\n\t\t\t\tnamespace, configs)\r\n\r\n\t\t\tcached = reconstructCached(\r\n\t\t\t\tdata,\r\n\t\t\t\tattrs,\r\n\t\t\t\tchildren,\r\n\t\t\t\tnode,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tviews,\r\n\t\t\t\tcontrollers)\r\n\t\t} else {\r\n\t\t\tnode = buildUpdatedNode(\r\n\t\t\t\tcached,\r\n\t\t\t\tdata,\r\n\t\t\t\teditable,\r\n\t\t\t\thasKeys,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tviews,\r\n\t\t\t\tconfigs,\r\n\t\t\t\tcontrollers)\r\n\t\t}\r\n\r\n\t\tif (isNew || shouldReattach === true && node != null) {\r\n\t\t\tinsertNode(parentElement, node, index)\r\n\t\t}\r\n\r\n\t\t// The configs are called after `build` finishes running\r\n\t\tscheduleConfigsToBeCalled(configs, data, node, isNew, cached)\r\n\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction build(\r\n\t\tparentElement,\r\n\t\tparentTag,\r\n\t\tparentCache,\r\n\t\tparentIndex,\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tshouldReattach,\r\n\t\tindex,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\t/*\r\n\t\t * `build` is a recursive function that manages creation/diffing/removal\r\n\t\t * of DOM elements based on comparison between `data` and `cached` the\r\n\t\t * diff algorithm can be summarized as this:\r\n\t\t *\r\n\t\t * 1 - compare `data` and `cached`\r\n\t\t * 2 - if they are different, copy `data` to `cached` and update the DOM\r\n\t\t *     based on what the difference is\r\n\t\t * 3 - recursively apply this algorithm for every array and for the\r\n\t\t *     children of every virtual element\r\n\t\t *\r\n\t\t * The `cached` data structure is essentially the same as the previous\r\n\t\t * redraw's `data` data structure, with a few additions:\r\n\t\t * - `cached` always has a property called `nodes`, which is a list of\r\n\t\t *    DOM elements that correspond to the data represented by the\r\n\t\t *    respective virtual element\r\n\t\t * - in order to support attaching `nodes` as a property of `cached`,\r\n\t\t *    `cached` is *always* a non-primitive object, i.e. if the data was\r\n\t\t *    a string, then cached is a String instance. If data was `null` or\r\n\t\t *    `undefined`, cached is `new String(\"\")`\r\n\t\t * - `cached also has a `configContext` property, which is the state\r\n\t\t *    storage object exposed by config(element, isInitialized, context)\r\n\t\t * - when `cached` is an Object, it represents a virtual element; when\r\n\t\t *    it's an Array, it represents a list of elements; when it's a\r\n\t\t *    String, Number or Boolean, it represents a text node\r\n\t\t *\r\n\t\t * `parentElement` is a DOM element used for W3C DOM API calls\r\n\t\t * `parentTag` is only used for handling a corner case for textarea\r\n\t\t * values\r\n\t\t * `parentCache` is used to remove nodes in some multi-node cases\r\n\t\t * `parentIndex` and `index` are used to figure out the offset of nodes.\r\n\t\t * They're artifacts from before arrays started being flattened and are\r\n\t\t * likely refactorable\r\n\t\t * `data` and `cached` are, respectively, the new and old nodes being\r\n\t\t * diffed\r\n\t\t * `shouldReattach` is a flag indicating whether a parent node was\r\n\t\t * recreated (if so, and if this node is reused, then this node must\r\n\t\t * reattach itself to the new parent)\r\n\t\t * `editable` is a flag that indicates whether an ancestor is\r\n\t\t * contenteditable\r\n\t\t * `namespace` indicates the closest HTML namespace as it cascades down\r\n\t\t * from an ancestor\r\n\t\t * `configs` is a list of config functions to run after the topmost\r\n\t\t * `build` call finishes running\r\n\t\t *\r\n\t\t * there's logic that relies on the assumption that null and undefined\r\n\t\t * data are equivalent to empty strings\r\n\t\t * - this prevents lifecycle surprises from procedural helpers that mix\r\n\t\t *   implicit and explicit return statements (e.g.\r\n\t\t *   function foo() {if (cond) return m(\"div\")}\r\n\t\t * - it simplifies diffing code\r\n\t\t */\r\n\t\tdata = dataToString(data)\r\n\t\tif (data.subtree === \"retain\") return cached\r\n\t\tcached = makeCache(data, cached, index, parentIndex, parentCache)\r\n\r\n\t\tif (isArray(data)) {\r\n\t\t\treturn buildArray(\r\n\t\t\t\tdata,\r\n\t\t\t\tcached,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tindex,\r\n\t\t\t\tparentTag,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\teditable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else if (data != null && isObject(data)) {\r\n\t\t\treturn buildObject(\r\n\t\t\t\tdata,\r\n\t\t\t\tcached,\r\n\t\t\t\teditable,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tindex,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else if (!isFunction(data)) {\r\n\t\t\treturn handleTextNode(\r\n\t\t\t\tcached,\r\n\t\t\t\tdata,\r\n\t\t\t\tindex,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\teditable,\r\n\t\t\t\tparentTag)\r\n\t\t} else {\r\n\t\t\treturn cached\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sortChanges(a, b) {\r\n\t\treturn a.action - b.action || a.index - b.index\r\n\t}\r\n\r\n\tfunction copyStyleAttrs(node, dataAttr, cachedAttr) {\r\n\t\tfor (var rule in dataAttr) if (hasOwn.call(dataAttr, rule)) {\r\n\t\t\tif (cachedAttr == null || cachedAttr[rule] !== dataAttr[rule]) {\r\n\t\t\t\tnode.style[rule] = dataAttr[rule]\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (rule in cachedAttr) if (hasOwn.call(cachedAttr, rule)) {\r\n\t\t\tif (!hasOwn.call(dataAttr, rule)) node.style[rule] = \"\"\r\n\t\t}\r\n\t}\r\n\r\n\tvar shouldUseSetAttribute = {\r\n\t\tlist: 1,\r\n\t\tstyle: 1,\r\n\t\tform: 1,\r\n\t\ttype: 1,\r\n\t\twidth: 1,\r\n\t\theight: 1\r\n\t}\r\n\r\n\tfunction setSingleAttr(\r\n\t\tnode,\r\n\t\tattrName,\r\n\t\tdataAttr,\r\n\t\tcachedAttr,\r\n\t\ttag,\r\n\t\tnamespace\r\n\t) {\r\n\t\tif (attrName === \"config\" || attrName === \"key\") {\r\n\t\t\t// `config` isn't a real attribute, so ignore it\r\n\t\t\treturn true\r\n\t\t} else if (isFunction(dataAttr) && attrName.slice(0, 2) === \"on\") {\r\n\t\t\t// hook event handlers to the auto-redrawing system\r\n\t\t\tnode[attrName] = autoredraw(dataAttr, node)\r\n\t\t} else if (attrName === \"style\" && dataAttr != null &&\r\n\t\t\t\tisObject(dataAttr)) {\r\n\t\t\t// handle `style: {...}`\r\n\t\t\tcopyStyleAttrs(node, dataAttr, cachedAttr)\r\n\t\t} else if (namespace != null) {\r\n\t\t\t// handle SVG\r\n\t\t\tif (attrName === \"href\") {\r\n\t\t\t\tnode.setAttributeNS(\"http://www.w3.org/1999/xlink\",\r\n\t\t\t\t\t\"href\", dataAttr)\r\n\t\t\t} else {\r\n\t\t\t\tnode.setAttribute(\r\n\t\t\t\t\tattrName === \"className\" ? \"class\" : attrName,\r\n\t\t\t\t\tdataAttr)\r\n\t\t\t}\r\n\t\t} else if (attrName in node && !shouldUseSetAttribute[attrName]) {\r\n\t\t\t// handle cases that are properties (but ignore cases where we\r\n\t\t\t// should use setAttribute instead)\r\n\t\t\t//\r\n\t\t\t// - list and form are typically used as strings, but are DOM\r\n\t\t\t//   element references in js\r\n\t\t\t//\r\n\t\t\t// - when using CSS selectors (e.g. `m(\"[style='']\")`), style is\r\n\t\t\t//   used as a string, but it's an object in js\r\n\t\t\t//\r\n\t\t\t// #348 don't set the value if not needed - otherwise, cursor\r\n\t\t\t// placement breaks in Chrome\r\n\t\t\ttry {\r\n\t\t\t\tif (tag !== \"input\" || node[attrName] !== dataAttr) {\r\n\t\t\t\t\tnode[attrName] = dataAttr\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tnode.setAttribute(attrName, dataAttr)\r\n\t\t\t}\r\n\t\t}\r\n\t\telse node.setAttribute(attrName, dataAttr)\r\n\t}\r\n\r\n\tfunction trySetAttr(\r\n\t\tnode,\r\n\t\tattrName,\r\n\t\tdataAttr,\r\n\t\tcachedAttr,\r\n\t\tcachedAttrs,\r\n\t\ttag,\r\n\t\tnamespace\r\n\t) {\r\n\t\tif (!(attrName in cachedAttrs) || (cachedAttr !== dataAttr)) {\r\n\t\t\tcachedAttrs[attrName] = dataAttr\r\n\t\t\ttry {\r\n\t\t\t\treturn setSingleAttr(\r\n\t\t\t\t\tnode,\r\n\t\t\t\t\tattrName,\r\n\t\t\t\t\tdataAttr,\r\n\t\t\t\t\tcachedAttr,\r\n\t\t\t\t\ttag,\r\n\t\t\t\t\tnamespace)\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// swallow IE's invalid argument errors to mimic HTML's\r\n\t\t\t\t// fallback-to-doing-nothing-on-invalid-attributes behavior\r\n\t\t\t\tif (e.message.indexOf(\"Invalid argument\") < 0) throw e\r\n\t\t\t}\r\n\t\t} else if (attrName === \"value\" && tag === \"input\" &&\r\n\t\t\t\tnode.value !== dataAttr) {\r\n\t\t\t// #348 dataAttr may not be a string, so use loose comparison\r\n\t\t\tnode.value = dataAttr\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setAttributes(node, tag, dataAttrs, cachedAttrs, namespace) {\r\n\t\tfor (var attrName in dataAttrs) if (hasOwn.call(dataAttrs, attrName)) {\r\n\t\t\tif (trySetAttr(\r\n\t\t\t\t\tnode,\r\n\t\t\t\t\tattrName,\r\n\t\t\t\t\tdataAttrs[attrName],\r\n\t\t\t\t\tcachedAttrs[attrName],\r\n\t\t\t\t\tcachedAttrs,\r\n\t\t\t\t\ttag,\r\n\t\t\t\t\tnamespace)) {\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cachedAttrs\r\n\t}\r\n\r\n\tfunction clear(nodes, cached) {\r\n\t\tfor (var i = nodes.length - 1; i > -1; i--) {\r\n\t\t\tif (nodes[i] && nodes[i].parentNode) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tnodes[i].parentNode.removeChild(nodes[i])\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t/* eslint-disable max-len */\r\n\t\t\t\t\t// ignore if this fails due to order of events (see\r\n\t\t\t\t\t// http://stackoverflow.com/questions/21926083/failed-to-execute-removechild-on-node)\r\n\t\t\t\t\t/* eslint-enable max-len */\r\n\t\t\t\t}\r\n\t\t\t\tcached = [].concat(cached)\r\n\t\t\t\tif (cached[i]) unload(cached[i])\r\n\t\t\t}\r\n\t\t}\r\n\t\t// release memory if nodes is an array. This check should fail if nodes\r\n\t\t// is a NodeList (see loop above)\r\n\t\tif (nodes.length) {\r\n\t\t\tnodes.length = 0\r\n\t\t}\r\n\t}\r\n\r\n\tfunction unload(cached) {\r\n\t\tif (cached.configContext && isFunction(cached.configContext.onunload)) {\r\n\t\t\tcached.configContext.onunload()\r\n\t\t\tcached.configContext.onunload = null\r\n\t\t}\r\n\t\tif (cached.controllers) {\r\n\t\t\tforEach(cached.controllers, function (controller) {\r\n\t\t\t\tif (isFunction(controller.onunload)) {\r\n\t\t\t\t\tcontroller.onunload({preventDefault: noop})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (cached.children) {\r\n\t\t\tif (isArray(cached.children)) forEach(cached.children, unload)\r\n\t\t\telse if (cached.children.tag) unload(cached.children)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction appendTextFragment(parentElement, data) {\r\n\t\ttry {\r\n\t\t\tparentElement.appendChild(\r\n\t\t\t\t$document.createRange().createContextualFragment(data))\r\n\t\t} catch (e) {\r\n\t\t\tparentElement.insertAdjacentHTML(\"beforeend\", data)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction injectHTML(parentElement, index, data) {\r\n\t\tvar nextSibling = parentElement.childNodes[index]\r\n\t\tif (nextSibling) {\r\n\t\t\tvar isElement = nextSibling.nodeType !== 1\r\n\t\t\tvar placeholder = $document.createElement(\"span\")\r\n\t\t\tif (isElement) {\r\n\t\t\t\tparentElement.insertBefore(placeholder, nextSibling || null)\r\n\t\t\t\tplaceholder.insertAdjacentHTML(\"beforebegin\", data)\r\n\t\t\t\tparentElement.removeChild(placeholder)\r\n\t\t\t} else {\r\n\t\t\t\tnextSibling.insertAdjacentHTML(\"beforebegin\", data)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tappendTextFragment(parentElement, data)\r\n\t\t}\r\n\r\n\t\tvar nodes = []\r\n\r\n\t\twhile (parentElement.childNodes[index] !== nextSibling) {\r\n\t\t\tnodes.push(parentElement.childNodes[index])\r\n\t\t\tindex++\r\n\t\t}\r\n\r\n\t\treturn nodes\r\n\t}\r\n\r\n\tfunction autoredraw(callback, object) {\r\n\t\treturn function (e) {\r\n\t\t\te = e || event\r\n\t\t\tm.redraw.strategy(\"diff\")\r\n\t\t\tm.startComputation()\r\n\t\t\ttry {\r\n\t\t\t\treturn callback.call(object, e)\r\n\t\t\t} finally {\r\n\t\t\t\tendFirstComputation()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar html\r\n\tvar documentNode = {\r\n\t\tappendChild: function (node) {\r\n\t\t\tif (html === undefined) html = $document.createElement(\"html\")\r\n\t\t\tif ($document.documentElement &&\r\n\t\t\t\t\t$document.documentElement !== node) {\r\n\t\t\t\t$document.replaceChild(node, $document.documentElement)\r\n\t\t\t} else {\r\n\t\t\t\t$document.appendChild(node)\r\n\t\t\t}\r\n\r\n\t\t\tthis.childNodes = $document.childNodes\r\n\t\t},\r\n\r\n\t\tinsertBefore: function (node) {\r\n\t\t\tthis.appendChild(node)\r\n\t\t},\r\n\r\n\t\tchildNodes: []\r\n\t}\r\n\r\n\tvar nodeCache = []\r\n\tvar cellCache = {}\r\n\r\n\tm.render = function (root, cell, forceRecreation) {\r\n\t\tif (!root) {\r\n\t\t\tthrow new Error(\"Ensure the DOM element being passed to \" +\r\n\t\t\t\t\"m.route/m.mount/m.render is not undefined.\")\r\n\t\t}\r\n\t\tvar configs = []\r\n\t\tvar id = getCellCacheKey(root)\r\n\t\tvar isDocumentRoot = root === $document\r\n\t\tvar node\r\n\r\n\t\tif (isDocumentRoot || root === $document.documentElement) {\r\n\t\t\tnode = documentNode\r\n\t\t} else {\r\n\t\t\tnode = root\r\n\t\t}\r\n\r\n\t\tif (isDocumentRoot && cell.tag !== \"html\") {\r\n\t\t\tcell = {tag: \"html\", attrs: {}, children: cell}\r\n\t\t}\r\n\r\n\t\tif (cellCache[id] === undefined) clear(node.childNodes)\r\n\t\tif (forceRecreation === true) reset(root)\r\n\r\n\t\tcellCache[id] = build(\r\n\t\t\tnode,\r\n\t\t\tnull,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tcell,\r\n\t\t\tcellCache[id],\r\n\t\t\tfalse,\r\n\t\t\t0,\r\n\t\t\tnull,\r\n\t\t\tundefined,\r\n\t\t\tconfigs)\r\n\r\n\t\tforEach(configs, function (config) { config() })\r\n\t}\r\n\r\n\tfunction getCellCacheKey(element) {\r\n\t\tvar index = nodeCache.indexOf(element)\r\n\t\treturn index < 0 ? nodeCache.push(element) - 1 : index\r\n\t}\r\n\r\n\tm.trust = function (value) {\r\n\t\tvalue = new String(value) // eslint-disable-line no-new-wrappers\r\n\t\tvalue.$trusted = true\r\n\t\treturn value\r\n\t}\r\n\r\n\tfunction gettersetter(store) {\r\n\t\tfunction prop() {\r\n\t\t\tif (arguments.length) store = arguments[0]\r\n\t\t\treturn store\r\n\t\t}\r\n\r\n\t\tprop.toJSON = function () {\r\n\t\t\treturn store\r\n\t\t}\r\n\r\n\t\treturn prop\r\n\t}\r\n\r\n\tm.prop = function (store) {\r\n\t\tif ((store != null && isObject(store) || isFunction(store)) &&\r\n\t\t\t\tisFunction(store.then)) {\r\n\t\t\treturn propify(store)\r\n\t\t}\r\n\r\n\t\treturn gettersetter(store)\r\n\t}\r\n\r\n\tvar roots = []\r\n\tvar components = []\r\n\tvar controllers = []\r\n\tvar lastRedrawId = null\r\n\tvar lastRedrawCallTime = 0\r\n\tvar computePreRedrawHook = null\r\n\tvar computePostRedrawHook = null\r\n\tvar topComponent\r\n\tvar FRAME_BUDGET = 16 // 60 frames per second = 1 call per 16 ms\r\n\r\n\tfunction parameterize(component, args) {\r\n\t\tfunction controller() {\r\n\t\t\t/* eslint-disable no-invalid-this */\r\n\t\t\treturn (component.controller || noop).apply(this, args) || this\r\n\t\t\t/* eslint-enable no-invalid-this */\r\n\t\t}\r\n\r\n\t\tif (component.controller) {\r\n\t\t\tcontroller.prototype = component.controller.prototype\r\n\t\t}\r\n\r\n\t\tfunction view(ctrl) {\r\n\t\t\tvar currentArgs = [ctrl].concat(args)\r\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\r\n\t\t\t\tcurrentArgs.push(arguments[i])\r\n\t\t\t}\r\n\r\n\t\t\treturn component.view.apply(component, currentArgs)\r\n\t\t}\r\n\r\n\t\tview.$original = component.view\r\n\t\tvar output = {controller: controller, view: view}\r\n\t\tif (args[0] && args[0].key != null) output.attrs = {key: args[0].key}\r\n\t\treturn output\r\n\t}\r\n\r\n\tm.component = function (component) {\r\n\t\tvar args = [].slice.call(arguments, 1)\r\n\r\n\t\treturn parameterize(component, args)\r\n\t}\r\n\r\n\tfunction checkPrevented(component, root, index, isPrevented) {\r\n\t\tif (!isPrevented) {\r\n\t\t\tm.redraw.strategy(\"all\")\r\n\t\t\tm.startComputation()\r\n\t\t\troots[index] = root\r\n\t\t\tvar currentComponent\r\n\r\n\t\t\tif (component) {\r\n\t\t\t\tcurrentComponent = topComponent = component\r\n\t\t\t} else {\r\n\t\t\t\tcurrentComponent = topComponent = component = {controller: noop}\r\n\t\t\t}\r\n\r\n\t\t\tvar controller = new (component.controller || noop)()\r\n\r\n\t\t\t// controllers may call m.mount recursively (via m.route redirects,\r\n\t\t\t// for example)\r\n\t\t\t// this conditional ensures only the last recursive m.mount call is\r\n\t\t\t// applied\r\n\t\t\tif (currentComponent === topComponent) {\r\n\t\t\t\tcontrollers[index] = controller\r\n\t\t\t\tcomponents[index] = component\r\n\t\t\t}\r\n\t\t\tendFirstComputation()\r\n\t\t\tif (component === null) {\r\n\t\t\t\tremoveRootElement(root, index)\r\n\t\t\t}\r\n\t\t\treturn controllers[index]\r\n\t\t} else if (component == null) {\r\n\t\t\tremoveRootElement(root, index)\r\n\t\t}\r\n\t}\r\n\r\n\tm.mount = m.module = function (root, component) {\r\n\t\tif (!root) {\r\n\t\t\tthrow new Error(\"Please ensure the DOM element exists before \" +\r\n\t\t\t\t\"rendering a template into it.\")\r\n\t\t}\r\n\r\n\t\tvar index = roots.indexOf(root)\r\n\t\tif (index < 0) index = roots.length\r\n\r\n\t\tvar isPrevented = false\r\n\t\tvar event = {\r\n\t\t\tpreventDefault: function () {\r\n\t\t\t\tisPrevented = true\r\n\t\t\t\tcomputePreRedrawHook = computePostRedrawHook = null\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tforEach(unloaders, function (unloader) {\r\n\t\t\tunloader.handler.call(unloader.controller, event)\r\n\t\t\tunloader.controller.onunload = null\r\n\t\t})\r\n\r\n\t\tif (isPrevented) {\r\n\t\t\tforEach(unloaders, function (unloader) {\r\n\t\t\t\tunloader.controller.onunload = unloader.handler\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tunloaders = []\r\n\t\t}\r\n\r\n\t\tif (controllers[index] && isFunction(controllers[index].onunload)) {\r\n\t\t\tcontrollers[index].onunload(event)\r\n\t\t}\r\n\r\n\t\treturn checkPrevented(component, root, index, isPrevented)\r\n\t}\r\n\r\n\tfunction removeRootElement(root, index) {\r\n\t\troots.splice(index, 1)\r\n\t\tcontrollers.splice(index, 1)\r\n\t\tcomponents.splice(index, 1)\r\n\t\treset(root)\r\n\t\tnodeCache.splice(getCellCacheKey(root), 1)\r\n\t}\r\n\r\n\tvar redrawing = false\r\n\tm.redraw = function (force) {\r\n\t\tif (redrawing) return\r\n\t\tredrawing = true\r\n\t\tif (force) forcing = true\r\n\r\n\t\ttry {\r\n\t\t\t// lastRedrawId is a positive number if a second redraw is requested\r\n\t\t\t// before the next animation frame\r\n\t\t\t// lastRedrawID is null if it's the first redraw and not an event\r\n\t\t\t// handler\r\n\t\t\tif (lastRedrawId && !force) {\r\n\t\t\t\t// when setTimeout: only reschedule redraw if time between now\r\n\t\t\t\t// and previous redraw is bigger than a frame, otherwise keep\r\n\t\t\t\t// currently scheduled timeout\r\n\t\t\t\t// when rAF: always reschedule redraw\r\n\t\t\t\tif ($requestAnimationFrame === global.requestAnimationFrame ||\r\n\t\t\t\t\t\tnew Date() - lastRedrawCallTime > FRAME_BUDGET) {\r\n\t\t\t\t\tif (lastRedrawId > 0) $cancelAnimationFrame(lastRedrawId)\r\n\t\t\t\t\tlastRedrawId = $requestAnimationFrame(redraw, FRAME_BUDGET)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tredraw()\r\n\t\t\t\tlastRedrawId = $requestAnimationFrame(function () {\r\n\t\t\t\t\tlastRedrawId = null\r\n\t\t\t\t}, FRAME_BUDGET)\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tredrawing = forcing = false\r\n\t\t}\r\n\t}\r\n\r\n\tm.redraw.strategy = m.prop()\r\n\tfunction redraw() {\r\n\t\tif (computePreRedrawHook) {\r\n\t\t\tcomputePreRedrawHook()\r\n\t\t\tcomputePreRedrawHook = null\r\n\t\t}\r\n\t\tforEach(roots, function (root, i) {\r\n\t\t\tvar component = components[i]\r\n\t\t\tif (controllers[i]) {\r\n\t\t\t\tvar args = [controllers[i]]\r\n\t\t\t\tm.render(root,\r\n\t\t\t\t\tcomponent.view ? component.view(controllers[i], args) : \"\")\r\n\t\t\t}\r\n\t\t})\r\n\t\t// after rendering within a routed context, we need to scroll back to\r\n\t\t// the top, and fetch the document title for history.pushState\r\n\t\tif (computePostRedrawHook) {\r\n\t\t\tcomputePostRedrawHook()\r\n\t\t\tcomputePostRedrawHook = null\r\n\t\t}\r\n\t\tlastRedrawId = null\r\n\t\tlastRedrawCallTime = new Date()\r\n\t\tm.redraw.strategy(\"diff\")\r\n\t}\r\n\r\n\tfunction endFirstComputation() {\r\n\t\tif (m.redraw.strategy() === \"none\") {\r\n\t\t\tpendingRequests--\r\n\t\t\tm.redraw.strategy(\"diff\")\r\n\t\t} else {\r\n\t\t\tm.endComputation()\r\n\t\t}\r\n\t}\r\n\r\n\tm.withAttr = function (prop, withAttrCallback, callbackThis) {\r\n\t\treturn function (e) {\r\n\t\t\te = e || event\r\n\t\t\t/* eslint-disable no-invalid-this */\r\n\t\t\tvar currentTarget = e.currentTarget || this\r\n\t\t\tvar _this = callbackThis || this\r\n\t\t\t/* eslint-enable no-invalid-this */\r\n\t\t\tvar target = prop in currentTarget ?\r\n\t\t\t\tcurrentTarget[prop] :\r\n\t\t\t\tcurrentTarget.getAttribute(prop)\r\n\t\t\twithAttrCallback.call(_this, target)\r\n\t\t}\r\n\t}\r\n\r\n\t// routing\r\n\tvar modes = {pathname: \"\", hash: \"#\", search: \"?\"}\r\n\tvar redirect = noop\r\n\tvar isDefaultRoute = false\r\n\tvar routeParams, currentRoute\r\n\r\n\tm.route = function (root, arg1, arg2, vdom) { // eslint-disable-line\r\n\t\t// m.route()\r\n\t\tif (arguments.length === 0) return currentRoute\r\n\t\t// m.route(el, defaultRoute, routes)\r\n\t\tif (arguments.length === 3 && isString(arg1)) {\r\n\t\t\tredirect = function (source) {\r\n\t\t\t\tvar path = currentRoute = normalizeRoute(source)\r\n\t\t\t\tif (!routeByValue(root, arg2, path)) {\r\n\t\t\t\t\tif (isDefaultRoute) {\r\n\t\t\t\t\t\tthrow new Error(\"Ensure the default route matches \" +\r\n\t\t\t\t\t\t\t\"one of the routes defined in m.route\")\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tisDefaultRoute = true\r\n\t\t\t\t\tm.route(arg1, true)\r\n\t\t\t\t\tisDefaultRoute = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar listener = m.route.mode === \"hash\" ?\r\n\t\t\t\t\"onhashchange\" :\r\n\t\t\t\t\"onpopstate\"\r\n\r\n\t\t\tglobal[listener] = function () {\r\n\t\t\t\tvar path = $location[m.route.mode]\r\n\t\t\t\tif (m.route.mode === \"pathname\") path += $location.search\r\n\t\t\t\tif (currentRoute !== normalizeRoute(path)) redirect(path)\r\n\t\t\t}\r\n\r\n\t\t\tcomputePreRedrawHook = setScroll\r\n\t\t\tglobal[listener]()\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// config: m.route\r\n\t\tif (root.addEventListener || root.attachEvent) {\r\n\t\t\tvar base = m.route.mode !== \"pathname\" ? $location.pathname : \"\"\r\n\t\t\troot.href = base + modes[m.route.mode] + vdom.attrs.href\r\n\t\t\tif (root.addEventListener) {\r\n\t\t\t\troot.removeEventListener(\"click\", routeUnobtrusive)\r\n\t\t\t\troot.addEventListener(\"click\", routeUnobtrusive)\r\n\t\t\t} else {\r\n\t\t\t\troot.detachEvent(\"onclick\", routeUnobtrusive)\r\n\t\t\t\troot.attachEvent(\"onclick\", routeUnobtrusive)\r\n\t\t\t}\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// m.route(route, params, shouldReplaceHistoryEntry)\r\n\t\tif (isString(root)) {\r\n\t\t\tvar oldRoute = currentRoute\r\n\t\t\tcurrentRoute = root\r\n\r\n\t\t\tvar args = arg1 || {}\r\n\t\t\tvar queryIndex = currentRoute.indexOf(\"?\")\r\n\t\t\tvar params\r\n\r\n\t\t\tif (queryIndex > -1) {\r\n\t\t\t\tparams = parseQueryString(currentRoute.slice(queryIndex + 1))\r\n\t\t\t} else {\r\n\t\t\t\tparams = {}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i in args) if (hasOwn.call(args, i)) {\r\n\t\t\t\tparams[i] = args[i]\r\n\t\t\t}\r\n\r\n\t\t\tvar querystring = buildQueryString(params)\r\n\t\t\tvar currentPath\r\n\r\n\t\t\tif (queryIndex > -1) {\r\n\t\t\t\tcurrentPath = currentRoute.slice(0, queryIndex)\r\n\t\t\t} else {\r\n\t\t\t\tcurrentPath = currentRoute\r\n\t\t\t}\r\n\r\n\t\t\tif (querystring) {\r\n\t\t\t\tcurrentRoute = currentPath +\r\n\t\t\t\t\t(currentPath.indexOf(\"?\") === -1 ? \"?\" : \"&\") +\r\n\t\t\t\t\tquerystring\r\n\t\t\t}\r\n\r\n\t\t\tvar replaceHistory =\r\n\t\t\t\t(arguments.length === 3 ? arg2 : arg1) === true ||\r\n\t\t\t\toldRoute === root\r\n\r\n\t\t\tif (global.history.pushState) {\r\n\t\t\t\tvar method = replaceHistory ? \"replaceState\" : \"pushState\"\r\n\t\t\t\tcomputePreRedrawHook = setScroll\r\n\t\t\t\tcomputePostRedrawHook = function () {\r\n\t\t\t\t\tglobal.history[method](null, $document.title,\r\n\t\t\t\t\t\tmodes[m.route.mode] + currentRoute)\r\n\t\t\t\t}\r\n\t\t\t\tredirect(modes[m.route.mode] + currentRoute)\r\n\t\t\t} else {\r\n\t\t\t\t$location[m.route.mode] = currentRoute\r\n\t\t\t\tredirect(modes[m.route.mode] + currentRoute)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tm.route.param = function (key) {\r\n\t\tif (!routeParams) {\r\n\t\t\tthrow new Error(\"You must call m.route(element, defaultRoute, \" +\r\n\t\t\t\t\"routes) before calling m.route.param()\")\r\n\t\t}\r\n\r\n\t\tif (!key) {\r\n\t\t\treturn routeParams\r\n\t\t}\r\n\r\n\t\treturn routeParams[key]\r\n\t}\r\n\r\n\tm.route.mode = \"search\"\r\n\r\n\tfunction normalizeRoute(route) {\r\n\t\treturn route.slice(modes[m.route.mode].length)\r\n\t}\r\n\r\n\tfunction routeByValue(root, router, path) {\r\n\t\trouteParams = {}\r\n\r\n\t\tvar queryStart = path.indexOf(\"?\")\r\n\t\tif (queryStart !== -1) {\r\n\t\t\trouteParams = parseQueryString(\r\n\t\t\t\tpath.substr(queryStart + 1, path.length))\r\n\t\t\tpath = path.substr(0, queryStart)\r\n\t\t}\r\n\r\n\t\t// Get all routes and check if there's\r\n\t\t// an exact match for the current path\r\n\t\tvar keys = Object.keys(router)\r\n\t\tvar index = keys.indexOf(path)\r\n\r\n\t\tif (index !== -1){\r\n\t\t\tm.mount(root, router[keys [index]])\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tfor (var route in router) if (hasOwn.call(router, route)) {\r\n\t\t\tif (route === path) {\r\n\t\t\t\tm.mount(root, router[route])\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\r\n\t\t\tvar matcher = new RegExp(\"^\" + route\r\n\t\t\t\t.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\")\r\n\t\t\t\t.replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\")\r\n\r\n\t\t\tif (matcher.test(path)) {\r\n\t\t\t\t/* eslint-disable no-loop-func */\r\n\t\t\t\tpath.replace(matcher, function () {\r\n\t\t\t\t\tvar keys = route.match(/:[^\\/]+/g) || []\r\n\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2)\r\n\t\t\t\t\tforEach(keys, function (key, i) {\r\n\t\t\t\t\t\trouteParams[key.replace(/:|\\./g, \"\")] =\r\n\t\t\t\t\t\t\tdecodeURIComponent(values[i])\r\n\t\t\t\t\t})\r\n\t\t\t\t\tm.mount(root, router[route])\r\n\t\t\t\t})\r\n\t\t\t\t/* eslint-enable no-loop-func */\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction routeUnobtrusive(e) {\r\n\t\te = e || event\r\n\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\r\n\r\n\t\tif (e.preventDefault) {\r\n\t\t\te.preventDefault()\r\n\t\t} else {\r\n\t\t\te.returnValue = false\r\n\t\t}\r\n\r\n\t\tvar currentTarget = e.currentTarget || e.srcElement\r\n\t\tvar args\r\n\r\n\t\tif (m.route.mode === \"pathname\" && currentTarget.search) {\r\n\t\t\targs = parseQueryString(currentTarget.search.slice(1))\r\n\t\t} else {\r\n\t\t\targs = {}\r\n\t\t}\r\n\r\n\t\twhile (currentTarget && !/a/i.test(currentTarget.nodeName)) {\r\n\t\t\tcurrentTarget = currentTarget.parentNode\r\n\t\t}\r\n\r\n\t\t// clear pendingRequests because we want an immediate route change\r\n\t\tpendingRequests = 0\r\n\t\tm.route(currentTarget[m.route.mode]\r\n\t\t\t.slice(modes[m.route.mode].length), args)\r\n\t}\r\n\r\n\tfunction setScroll() {\r\n\t\tif (m.route.mode !== \"hash\" && $location.hash) {\r\n\t\t\t$location.hash = $location.hash\r\n\t\t} else {\r\n\t\t\tglobal.scrollTo(0, 0)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction buildQueryString(object, prefix) {\r\n\t\tvar duplicates = {}\r\n\t\tvar str = []\r\n\r\n\t\tfor (var prop in object) if (hasOwn.call(object, prop)) {\r\n\t\t\tvar key = prefix ? prefix + \"[\" + prop + \"]\" : prop\r\n\t\t\tvar value = object[prop]\r\n\r\n\t\t\tif (value === null) {\r\n\t\t\t\tstr.push(encodeURIComponent(key))\r\n\t\t\t} else if (isObject(value)) {\r\n\t\t\t\tstr.push(buildQueryString(value, key))\r\n\t\t\t} else if (isArray(value)) {\r\n\t\t\t\tvar keys = []\r\n\t\t\t\tduplicates[key] = duplicates[key] || {}\r\n\t\t\t\t/* eslint-disable no-loop-func */\r\n\t\t\t\tforEach(value, function (item) {\r\n\t\t\t\t\t/* eslint-enable no-loop-func */\r\n\t\t\t\t\tif (!duplicates[key][item]) {\r\n\t\t\t\t\t\tduplicates[key][item] = true\r\n\t\t\t\t\t\tkeys.push(encodeURIComponent(key) + \"=\" +\r\n\t\t\t\t\t\t\tencodeURIComponent(item))\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tstr.push(keys.join(\"&\"))\r\n\t\t\t} else if (value !== undefined) {\r\n\t\t\t\tstr.push(encodeURIComponent(key) + \"=\" +\r\n\t\t\t\t\tencodeURIComponent(value))\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn str.join(\"&\")\r\n\t}\r\n\r\n\tfunction parseQueryString(str) {\r\n\t\tif (str === \"\" || str == null) return {}\r\n\t\tif (str.charAt(0) === \"?\") str = str.slice(1)\r\n\r\n\t\tvar pairs = str.split(\"&\")\r\n\t\tvar params = {}\r\n\r\n\t\tforEach(pairs, function (string) {\r\n\t\t\tvar pair = string.split(\"=\")\r\n\t\t\tvar key = decodeURIComponent(pair[0])\r\n\t\t\tvar value = pair.length === 2 ? decodeURIComponent(pair[1]) : null\r\n\t\t\tif (params[key] != null) {\r\n\t\t\t\tif (!isArray(params[key])) params[key] = [params[key]]\r\n\t\t\t\tparams[key].push(value)\r\n\t\t\t}\r\n\t\t\telse params[key] = value\r\n\t\t})\r\n\r\n\t\treturn params\r\n\t}\r\n\r\n\tm.route.buildQueryString = buildQueryString\r\n\tm.route.parseQueryString = parseQueryString\r\n\r\n\tfunction reset(root) {\r\n\t\tvar cacheKey = getCellCacheKey(root)\r\n\t\tclear(root.childNodes, cellCache[cacheKey])\r\n\t\tcellCache[cacheKey] = undefined\r\n\t}\r\n\r\n\tm.deferred = function () {\r\n\t\tvar deferred = new Deferred()\r\n\t\tdeferred.promise = propify(deferred.promise)\r\n\t\treturn deferred\r\n\t}\r\n\r\n\tfunction propify(promise, initialValue) {\r\n\t\tvar prop = m.prop(initialValue)\r\n\t\tpromise.then(prop)\r\n\t\tprop.then = function (resolve, reject) {\r\n\t\t\treturn propify(promise.then(resolve, reject), initialValue)\r\n\t\t}\r\n\r\n\t\tprop.catch = prop.then.bind(null, null)\r\n\t\treturn prop\r\n\t}\r\n\t// Promiz.mithril.js | Zolmeister | MIT\r\n\t// a modified version of Promiz.js, which does not conform to Promises/A+\r\n\t// for two reasons:\r\n\t//\r\n\t// 1) `then` callbacks are called synchronously (because setTimeout is too\r\n\t//    slow, and the setImmediate polyfill is too big\r\n\t//\r\n\t// 2) throwing subclasses of Error cause the error to be bubbled up instead\r\n\t//    of triggering rejection (because the spec does not account for the\r\n\t//    important use case of default browser error handling, i.e. message w/\r\n\t//    line number)\r\n\r\n\tvar RESOLVING = 1\r\n\tvar REJECTING = 2\r\n\tvar RESOLVED = 3\r\n\tvar REJECTED = 4\r\n\r\n\tfunction Deferred(onSuccess, onFailure) {\r\n\t\tvar self = this\r\n\t\tvar state = 0\r\n\t\tvar promiseValue = 0\r\n\t\tvar next = []\r\n\r\n\t\tself.promise = {}\r\n\r\n\t\tself.resolve = function (value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value\r\n\t\t\t\tstate = RESOLVING\r\n\r\n\t\t\t\tfire()\r\n\t\t\t}\r\n\r\n\t\t\treturn self\r\n\t\t}\r\n\r\n\t\tself.reject = function (value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value\r\n\t\t\t\tstate = REJECTING\r\n\r\n\t\t\t\tfire()\r\n\t\t\t}\r\n\r\n\t\t\treturn self\r\n\t\t}\r\n\r\n\t\tself.promise.then = function (onSuccess, onFailure) {\r\n\t\t\tvar deferred = new Deferred(onSuccess, onFailure)\r\n\r\n\t\t\tif (state === RESOLVED) {\r\n\t\t\t\tdeferred.resolve(promiseValue)\r\n\t\t\t} else if (state === REJECTED) {\r\n\t\t\t\tdeferred.reject(promiseValue)\r\n\t\t\t} else {\r\n\t\t\t\tnext.push(deferred)\r\n\t\t\t}\r\n\r\n\t\t\treturn deferred.promise\r\n\t\t}\r\n\r\n\t\tfunction finish(type) {\r\n\t\t\tstate = type || REJECTED\r\n\t\t\tnext.map(function (deferred) {\r\n\t\t\t\tif (state === RESOLVED) {\r\n\t\t\t\t\tdeferred.resolve(promiseValue)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdeferred.reject(promiseValue)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tfunction thennable(then, success, failure, notThennable) {\r\n\t\t\tif (((promiseValue != null && isObject(promiseValue)) ||\r\n\t\t\t\t\tisFunction(promiseValue)) && isFunction(then)) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// count protects against abuse calls from spec checker\r\n\t\t\t\t\tvar count = 0\r\n\t\t\t\t\tthen.call(promiseValue, function (value) {\r\n\t\t\t\t\t\tif (count++) return\r\n\t\t\t\t\t\tpromiseValue = value\r\n\t\t\t\t\t\tsuccess()\r\n\t\t\t\t\t}, function (value) {\r\n\t\t\t\t\t\tif (count++) return\r\n\t\t\t\t\t\tpromiseValue = value\r\n\t\t\t\t\t\tfailure()\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\t\tpromiseValue = e\r\n\t\t\t\t\tfailure()\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnotThennable()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction fire() {\r\n\t\t\t// check if it's a thenable\r\n\t\t\tvar then\r\n\t\t\ttry {\r\n\t\t\t\tthen = promiseValue && promiseValue.then\r\n\t\t\t} catch (e) {\r\n\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\tpromiseValue = e\r\n\t\t\t\tstate = REJECTING\r\n\t\t\t\treturn fire()\r\n\t\t\t}\r\n\r\n\t\t\tif (state === REJECTING) {\r\n\t\t\t\tm.deferred.onerror(promiseValue)\r\n\t\t\t}\r\n\r\n\t\t\tthennable(then, function () {\r\n\t\t\t\tstate = RESOLVING\r\n\t\t\t\tfire()\r\n\t\t\t}, function () {\r\n\t\t\t\tstate = REJECTING\r\n\t\t\t\tfire()\r\n\t\t\t}, function () {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (state === RESOLVING && isFunction(onSuccess)) {\r\n\t\t\t\t\t\tpromiseValue = onSuccess(promiseValue)\r\n\t\t\t\t\t} else if (state === REJECTING && isFunction(onFailure)) {\r\n\t\t\t\t\t\tpromiseValue = onFailure(promiseValue)\r\n\t\t\t\t\t\tstate = RESOLVING\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\t\tpromiseValue = e\r\n\t\t\t\t\treturn finish()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (promiseValue === self) {\r\n\t\t\t\t\tpromiseValue = TypeError()\r\n\t\t\t\t\tfinish()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthennable(then, function () {\r\n\t\t\t\t\t\tfinish(RESOLVED)\r\n\t\t\t\t\t}, finish, function () {\r\n\t\t\t\t\t\tfinish(state === RESOLVING && RESOLVED)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tm.deferred.onerror = function (e) {\r\n\t\tif (type.call(e) === \"[object Error]\" &&\r\n\t\t\t\t!/ Error/.test(e.constructor.toString())) {\r\n\t\t\tpendingRequests = 0\r\n\t\t\tthrow e\r\n\t\t}\r\n\t}\r\n\r\n\tm.sync = function (args) {\r\n\t\tvar deferred = m.deferred()\r\n\t\tvar outstanding = args.length\r\n\t\tvar results = new Array(outstanding)\r\n\t\tvar method = \"resolve\"\r\n\r\n\t\tfunction synchronizer(pos, resolved) {\r\n\t\t\treturn function (value) {\r\n\t\t\t\tresults[pos] = value\r\n\t\t\t\tif (!resolved) method = \"reject\"\r\n\t\t\t\tif (--outstanding === 0) {\r\n\t\t\t\t\tdeferred.promise(results)\r\n\t\t\t\t\tdeferred[method](results)\r\n\t\t\t\t}\r\n\t\t\t\treturn value\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (args.length > 0) {\r\n\t\t\tforEach(args, function (arg, i) {\r\n\t\t\t\targ.then(synchronizer(i, true), synchronizer(i, false))\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tdeferred.resolve([])\r\n\t\t}\r\n\r\n\t\treturn deferred.promise\r\n\t}\r\n\r\n\tfunction identity(value) { return value }\r\n\r\n\tfunction handleJsonp(options) {\r\n\t\tvar callbackKey = \"mithril_callback_\" +\r\n\t\t\tnew Date().getTime() + \"_\" +\r\n\t\t\t(Math.round(Math.random() * 1e16)).toString(36)\r\n\r\n\t\tvar script = $document.createElement(\"script\")\r\n\r\n\t\tglobal[callbackKey] = function (resp) {\r\n\t\t\tscript.parentNode.removeChild(script)\r\n\t\t\toptions.onload({\r\n\t\t\t\ttype: \"load\",\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tresponseText: resp\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tglobal[callbackKey] = undefined\r\n\t\t}\r\n\r\n\t\tscript.onerror = function () {\r\n\t\t\tscript.parentNode.removeChild(script)\r\n\r\n\t\t\toptions.onerror({\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tstatus: 500,\r\n\t\t\t\t\tresponseText: JSON.stringify({\r\n\t\t\t\t\t\terror: \"Error making jsonp request\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tglobal[callbackKey] = undefined\r\n\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tscript.onload = function () {\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tscript.src = options.url +\r\n\t\t\t(options.url.indexOf(\"?\") > 0 ? \"&\" : \"?\") +\r\n\t\t\t(options.callbackKey ? options.callbackKey : \"callback\") +\r\n\t\t\t\"=\" + callbackKey +\r\n\t\t\t\"&\" + buildQueryString(options.data || {})\r\n\r\n\t\t$document.body.appendChild(script)\r\n\t}\r\n\r\n\tfunction createXhr(options) {\r\n\t\tvar xhr = new global.XMLHttpRequest()\r\n\t\txhr.open(options.method, options.url, true, options.user,\r\n\t\t\toptions.password)\r\n\r\n\t\txhr.onreadystatechange = function () {\r\n\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\tif (xhr.status >= 200 && xhr.status < 300) {\r\n\t\t\t\t\toptions.onload({type: \"load\", target: xhr})\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptions.onerror({type: \"error\", target: xhr})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (options.serialize === JSON.stringify &&\r\n\t\t\t\toptions.data &&\r\n\t\t\t\toptions.method !== \"GET\") {\r\n\t\t\txhr.setRequestHeader(\"Content-Type\",\r\n\t\t\t\t\"application/json; charset=utf-8\")\r\n\t\t}\r\n\r\n\t\tif (options.deserialize === JSON.parse) {\r\n\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\r\n\t\t}\r\n\r\n\t\tif (isFunction(options.config)) {\r\n\t\t\tvar maybeXhr = options.config(xhr, options)\r\n\t\t\tif (maybeXhr != null) xhr = maybeXhr\r\n\t\t}\r\n\r\n\t\tvar data = options.method === \"GET\" || !options.data ? \"\" : options.data\r\n\r\n\t\tif (data && !isString(data) && data.constructor !== global.FormData) {\r\n\t\t\tthrow new Error(\"Request data should be either be a string or \" +\r\n\t\t\t\t\"FormData. Check the `serialize` option in `m.request`\")\r\n\t\t}\r\n\r\n\t\txhr.send(data)\r\n\t\treturn xhr\r\n\t}\r\n\r\n\tfunction ajax(options) {\r\n\t\tif (options.dataType && options.dataType.toLowerCase() === \"jsonp\") {\r\n\t\t\treturn handleJsonp(options)\r\n\t\t} else {\r\n\t\t\treturn createXhr(options)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction bindData(options, data, serialize) {\r\n\t\tif (options.method === \"GET\" && options.dataType !== \"jsonp\") {\r\n\t\t\tvar prefix = options.url.indexOf(\"?\") < 0 ? \"?\" : \"&\"\r\n\t\t\tvar querystring = buildQueryString(data)\r\n\t\t\toptions.url += (querystring ? prefix + querystring : \"\")\r\n\t\t} else {\r\n\t\t\toptions.data = serialize(data)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parameterizeUrl(url, data) {\r\n\t\tif (data) {\r\n\t\t\turl = url.replace(/:[a-z]\\w+/gi, function(token){\r\n\t\t\t\tvar key = token.slice(1)\r\n\t\t\t\tvar value = data[key]\r\n\t\t\t\tdelete data[key]\r\n\t\t\t\treturn value\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn url\r\n\t}\r\n\r\n\tm.request = function (options) {\r\n\t\tif (options.background !== true) m.startComputation()\r\n\t\tvar deferred = new Deferred()\r\n\t\tvar isJSONP = options.dataType &&\r\n\t\t\toptions.dataType.toLowerCase() === \"jsonp\"\r\n\r\n\t\tvar serialize, deserialize, extract\r\n\r\n\t\tif (isJSONP) {\r\n\t\t\tserialize = options.serialize =\r\n\t\t\tdeserialize = options.deserialize = identity\r\n\r\n\t\t\textract = function (jsonp) { return jsonp.responseText }\r\n\t\t} else {\r\n\t\t\tserialize = options.serialize = options.serialize || JSON.stringify\r\n\r\n\t\t\tdeserialize = options.deserialize =\r\n\t\t\t\toptions.deserialize || JSON.parse\r\n\t\t\textract = options.extract || function (xhr) {\r\n\t\t\t\tif (xhr.responseText.length || deserialize !== JSON.parse) {\r\n\t\t\t\t\treturn xhr.responseText\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\toptions.method = (options.method || \"GET\").toUpperCase()\r\n\t\toptions.url = parameterizeUrl(options.url, options.data)\r\n\t\tbindData(options, options.data, serialize)\r\n\t\toptions.onload = options.onerror = function (ev) {\r\n\t\t\ttry {\r\n\t\t\t\tev = ev || event\r\n\t\t\t\tvar response = deserialize(extract(ev.target, options))\r\n\t\t\t\tif (ev.type === \"load\") {\r\n\t\t\t\t\tif (options.unwrapSuccess) {\r\n\t\t\t\t\t\tresponse = options.unwrapSuccess(response, ev.target)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (isArray(response) && options.type) {\r\n\t\t\t\t\t\tforEach(response, function (res, i) {\r\n\t\t\t\t\t\t\tresponse[i] = new options.type(res)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (options.type) {\r\n\t\t\t\t\t\tresponse = new options.type(response)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeferred.resolve(response)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (options.unwrapError) {\r\n\t\t\t\t\t\tresponse = options.unwrapError(response, ev.target)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeferred.reject(response)\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tdeferred.reject(e)\r\n\t\t\t} finally {\r\n\t\t\t\tif (options.background !== true) m.endComputation()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tajax(options)\r\n\t\tdeferred.promise = propify(deferred.promise, options.initialValue)\r\n\t\treturn deferred.promise\r\n\t}\r\n\r\n\treturn m\r\n})\r\n\n},{}],90:[function(require,module,exports){\n// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],91:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\n},{}],92:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n\n},{}],93:[function(require,module,exports){\n'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n\n},{\"./decode\":91,\"./encode\":92}]},{},[1]);\n })();"],"sourceRoot":"/source/"}