{"version":3,"sources":["lucy/assets/js/script.js"],"names":["require","undefined","define","e","t","n","r","s","o","u","a","i","f","Error","code","l","exports","call","length",1,"module","Lucy","text","href","lucy_config","email_link","./third-party/lucy.js",2,"lucy","site_url","algolia_app_id","algolia_api_key","algolia_index_name","links","contactLink","addEvent","element","event","handler","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","maybeClose","window","type","keyCode","close","clickedElement","target","srcElement","contains","open","isOpen","m","redraw","setAttribute","document","reset","searchQuery","searchResults","nothingFound","listenForInput","this","value","search","showResults","results","parser","createElement","map","path","url","pathname","_highlightResult","title","query","loader","innerText","loadingInterval","setInterval","index","hitsPerPage","error","result","console","log","hits","clearInterval","charAt","substr","algoliasearch","client","initIndex","prop","body","appendChild","view","style","display","onclick","onsubmit","onkeyup","config","el","focus","placeholder","class","trust","mount","mithril",3,"parse","str","match","exec","parseFloat","toLowerCase","y","d","h","_short","ms","Math","round","_long","plural","name","floor","ceil","val","options",4,"last","array",5,"arrayEach","baseEach","createForEach","forEach","../internal/arrayEach","../internal/baseEach","../internal/createForEach",6,"collection","iteratee","thisArg","func","isArray","arrayMap","baseMap","baseCallback","../internal/arrayMap","../internal/baseCallback","../internal/baseMap","../lang/isArray",7,"restParam","start","TypeError","FUNC_ERROR_TEXT","nativeMax","args","arguments","rest","Array","otherArgs","apply","max",8,"arrayCopy","source",9,10,11,"arraySome","predicate",12,"baseAssign","object","baseCopy","keys","../object/keys","./baseCopy",13,"argCount","bindCallback","identity","baseMatches","property","baseMatchesProperty","../utility/identity","../utility/property","./baseMatches","./baseMatchesProperty","./bindCallback",14,"baseClone","isDeep","customizer","key","stackA","stackB","isObject","isArr","initCloneArray","tag","objToString","isFunc","funcTag","objectTag","argsTag","cloneableTags","initCloneByTag","initCloneObject","push","baseForOwn","subValue","arrayTag","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","weakMapTag","arrayBufferTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","objectProto","Object","prototype","toString","../lang/isObject","./arrayCopy","./arrayEach","./baseAssign","./baseForOwn","./initCloneArray","./initCloneByTag","./initCloneObject",15,"props",16,"createBaseEach","./createBaseEach",17,"createBaseFor","baseFor","./createBaseFor",18,"baseForIn","keysIn","../object/keysIn","./baseFor",19,20,"baseGet","pathKey","toObject","./toObject",21,"baseIsEqual","other","isLoose","isObjectLike","baseIsEqualDeep","./baseIsEqualDeep","./isObjectLike",22,"equalFunc","objIsArr","othIsArr","objTag","othTag","isTypedArray","objIsObj","othIsObj","isSameTag","equalByTag","objIsWrapped","hasOwnProperty","othIsWrapped","equalArrays","equalObjects","pop","../lang/isTypedArray","./equalArrays","./equalByTag","./equalObjects",23,"baseIsMatch","matchData","noCustomizer","data","objValue","srcValue","./baseIsEqual",24,"isArrayLike","./baseEach","./isArrayLike",25,"getMatchData","./baseIsMatch","./getMatchData",26,"isCommon","isKey","isStrictComparable","toPath","baseSlice","../array/last","./baseGet","./baseSlice","./isKey","./isStrictComparable","./toPath",27,"baseMerge","isSrcArr","baseMergeDeep","./baseMergeDeep",28,"mergeFunc","isPlainObject","isArguments","toPlainObject","../lang/isArguments","../lang/isPlainObject","../lang/toPlainObject",29,"baseProperty",30,"basePropertyDeep",31,"end",32,"baseToString",33,"accumulator",34,"global","bufferClone","buffer","ArrayBuffer","byteLength","Uint8Array","set","self",35,"createAssigner","assigner","sources","guard","isIterateeCall","../function/restParam","./isIterateeCall",36,"eachFunc","fromRight","getLength","isLength","iterable","./getLength","./isLength",37,"keysFunc",38,"arrayFunc",39,"arrLength","othLength","arrValue","othValue","./arraySome",40,"message",41,"objProps","objLength","othProps","skipCtor","objCtor","constructor","othCtor",42,"./baseProperty",43,"pairs","../object/pairs",44,"getNative","isNative","../lang/isNative",45,"input",46,"Ctor","byteOffset","reFlags","lastIndex","./bufferClone",47,48,49,"isIndex","reIsUint","test","MAX_SAFE_INTEGER",50,"./isIndex",51,"reIsPlainProp","reIsDeepProp",52,53,54,55,"shimKeys","propsLength","allowIndexes",56,57,"replace","rePropName","number","quote","string","reEscapeChar","./baseToString",58,"clone","../internal/baseClone","../internal/bindCallback","../internal/isIterateeCall",59,"cloneDeep",60,"propertyIsEnumerable","../internal/isArrayLike","../internal/isObjectLike",61,"nativeIsArray","../internal/getNative","../internal/isLength",62,"isFunction","./isObject",63,"reIsNative","fnToString","reIsHostCtor","Function","RegExp","./isFunction",64,65,"../internal/baseForIn","./isArguments",66,"typedArrayTags",67,"../internal/baseCopy",68,"nativeKeys","../internal/shimKeys",69,"isProto","skipIndexes","../internal/isIndex",70,"merge","../internal/baseMerge","../internal/createAssigner",71,"../internal/toObject","./keys",72,73,"../internal/baseProperty","../internal/basePropertyDeep","../internal/isKey",74,"AlgoliaSearch","applicationID","apiKey","opts","debug","usage","errors","AlgoliaSearchError","defaultHosts","hosts","read","write","hostIndex","protocol","timeout","concat","prepareHost","requestTimeout","extraHeaders","cache","_cache","_ua","_useCache","_useFallback","useFallback","_setTimeout","host","notImplemented","deprecatedMessage","previousUsage","newUsage","githubAnchorLink","exitPromise","fn","deprecate","deprecated","warned","safeJSONStringify","obj","toJSON","JSON","stringify","out","buildSearchMethod","queryParam","callback","params","encodeURIComponent","as","_getSearchParams","_search","MAX_API_KEY_LENGTH","deleteIndex","indexName","_jsonRequest","method","hostType","moveIndex","srcIndexName","dstIndexName","postObj","operation","destination","copyIndex","getLogs","offset","listIndexes","page","Index","listUserKeys","getUserKeyACL","deleteUserKey","addUserKey","acls","acl","validity","maxQueriesPerIPPerHour","maxHitsPerQuery","indexes","description","queryParameters","referers","addUserKeyWithValidity","updateUserKey","putObj","setSecurityTags","tags","strTags","oredTags","j","join","securityTags","setUserToken","userToken","startQueriesBatch","_batch","addQueryInBatch","clearCache","sendQueriesBatch","setRequestTimeout","milliseconds","parseInt","queries","requests","JSONPParams","request","requestId","fallback","batch","operations","destroy","enableRateLimitForward","disableRateLimitForward","useSecuredAPIKey","disableSecuredAPIKey","generateSecuredApiKey","typeAheadArgs","typeAheadValueOption","setExtraHeader","addAlgoliaAgent","algoliaAgent","initialOpts","doRequest","requester","reqOpts","success","httpResponse","status","statusCode","requestDebug","headers","ok","retry","cacheID","responseText","tries","retryRequest","unrecoverableError","_promise","reject","tryFallback","err","stack","Unknown","UnparsableJSON","usingFallback","hasFallback","RequestTimeout","Infinity","resolve","jsonBody","_computeRequestHeaders","_request","then","promise","content","setTimeout","withAPIKey","requestHeaders","x-algolia-agent","x-algolia-application-id","header","addObject","objectID","indexObj","addObjects","objects","action","getObject","attrs","getObjects","objectIDs","attributesToRetrieve","partialUpdateObject","partialObject","createIfNotExists","partialUpdateObjects","saveObject","saveObjects","deleteObject","deleteObjects","deleteByQuery","stopOrDelete","searchContent","nbHits","waitTask","doDeleteByQuery","deleteObjectsContent","taskID","failure","distinct","similarSearch","browse","browseFrom","cursor","browseAll","browseLoop","browser","_stopped","queryString","browseCallback","_error","_result","_end","IndexBrowser","ttAdapter","syncCb","asyncCb","cb","retryLoop","loop","delay","baseDelay","maxDelay","successCb","failureCb","clearIndex","getSettings","setSettings","settings","./IndexBrowser","./errors","lodash/collection/forEach","lodash/collection/map","lodash/lang/clone","lodash/lang/isArray","lodash/object/merge",75,"inherits","EventEmitter","stop","_clean","emit","removeAllListeners","events",76,"process","getDocumentProtocol","ua","AlgoliaSearchBrowser","Promise","inlineHeaders","jsonpRequest","env","APP_ENV","enable","version","__algolia","support","hasXMLHttpRequest","hasXDomainRequest","cors","XMLHttpRequest","load","timedOut","clearTimeout","ontimeout","req","getAllResponseHeaders","more","Network","abort","XDomainRequest","setRequestHeader","onprogress","onload","onerror","send","../../AlgoliaSearch","../../errors","../../version.js","../get-document-protocol","../inline-headers","../jsonp-request","_process","es6-promise","lodash/lang/cloneDeep",77,"location",78,"querystring","encode",79,"done","cbCalled","clean","JSONPScriptFail","readystatechange","readyState","script","onreadystatechange","head","removeChild","cbName","JSONPScriptError","JSONPCounter","getElementsByTagName","async","defer","src","../errors",80,"extraProperties","captureStackTrace","createCustomError","AlgoliaSearchCustomError","slice","unshift",81,82,"useColors","documentElement","firebug","exception","table","navigator","userAgent","$1","formatArgs","namespace","humanize","diff","c","color","lastC","splice","save","namespaces","storage","removeItem","localstorage","localStorage","chrome","local","colors","formatters","v","./debug",83,"selectColor","prevColor","disabled","enabled","curr","Date","prevTime","prev","coerce","format","formatter","logFn","bind","split","len","skips","names","disable","algolia-ms",84,"lib$es6$promise$utils$$objectOrFunction","x","lib$es6$promise$utils$$isFunction","lib$es6$promise$asap$$setScheduler","scheduleFn","lib$es6$promise$asap$$customSchedulerFn","lib$es6$promise$asap$$setAsap","asapFn","lib$es6$promise$asap$$asap","lib$es6$promise$asap$$useNextTick","nextTick","lib$es6$promise$asap$$flush","lib$es6$promise$asap$$useVertxTimer","lib$es6$promise$asap$$vertxNext","lib$es6$promise$asap$$useMutationObserver","iterations","observer","lib$es6$promise$asap$$BrowserMutationObserver","node","createTextNode","observe","characterData","lib$es6$promise$asap$$useMessageChannel","channel","MessageChannel","port1","onmessage","port2","postMessage","lib$es6$promise$asap$$useSetTimeout","lib$es6$promise$asap$$len","lib$es6$promise$asap$$queue","arg","lib$es6$promise$asap$$attemptVertx","vertx","runOnLoop","runOnContext","lib$es6$promise$then$$then","onFulfillment","onRejection","parent","state","_state","lib$es6$promise$$internal$$FULFILLED","lib$es6$promise$$internal$$REJECTED","child","lib$es6$promise$$internal$$noop","lib$es6$promise$$internal$$invokeCallback","lib$es6$promise$$internal$$subscribe","lib$es6$promise$promise$resolve$$resolve","Constructor","lib$es6$promise$$internal$$resolve","lib$es6$promise$$internal$$selfFulfillment","lib$es6$promise$$internal$$cannotReturnOwn","lib$es6$promise$$internal$$getThen","lib$es6$promise$$internal$$GET_THEN_ERROR","lib$es6$promise$$internal$$tryThen","fulfillmentHandler","rejectionHandler","lib$es6$promise$$internal$$handleForeignThenable","thenable","sealed","lib$es6$promise$$internal$$fulfill","reason","lib$es6$promise$$internal$$reject","_label","lib$es6$promise$$internal$$handleOwnThenable","lib$es6$promise$$internal$$handleMaybeThenable","maybeThenable","lib$es6$promise$then$$default","lib$es6$promise$promise$resolve$$default","lib$es6$promise$$internal$$publishRejection","_onerror","lib$es6$promise$$internal$$publish","lib$es6$promise$$internal$$PENDING","_subscribers","subscribers","settled","detail","lib$es6$promise$$internal$$ErrorObject","lib$es6$promise$$internal$$tryCatch","lib$es6$promise$$internal$$TRY_CATCH_ERROR","succeeded","failed","hasCallback","lib$es6$promise$$internal$$initializePromise","resolver","lib$es6$promise$promise$all$$all","entries","lib$es6$promise$enumerator$$default","lib$es6$promise$promise$race$$race","lib$es6$promise$utils$$isArray","lib$es6$promise$promise$reject$$reject","lib$es6$promise$promise$$needsResolver","lib$es6$promise$promise$$needsNew","lib$es6$promise$promise$$Promise","_id","lib$es6$promise$promise$$counter","lib$es6$promise$enumerator$$Enumerator","_instanceConstructor","_input","_remaining","_enumerate","_validationError","lib$es6$promise$polyfill$$polyfill","P","cast","lib$es6$promise$promise$$default","lib$es6$promise$utils$$_isArray","lib$es6$promise$asap$$scheduleFlush","lib$es6$promise$asap$$browserWindow","lib$es6$promise$asap$$browserGlobal","MutationObserver","WebKitMutationObserver","lib$es6$promise$asap$$isNode","lib$es6$promise$asap$$isWorker","Uint8ClampedArray","importScripts","lib$es6$promise$promise$all$$default","lib$es6$promise$promise$race$$default","lib$es6$promise$promise$reject$$default","all","race","_setScheduler","_setAsap","_asap","catch","_eachEntry","entry","_settledAt","_willSettleAt","enumerator","lib$es6$promise$polyfill$$default","lib$es6$promise$umd$$ES6Promise","polyfill",85,"_events","_maxListeners","isNumber","isUndefined","defaultMaxListeners","setMaxListeners","isNaN","er","listeners","addListener","listener","newListener","trace","on","once","g","removeListener","fired","list","position","ret","listenerCount","evlistener","emitter",86,"create","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor",87,"app","isString","initialize","$document","$location","$cancelAnimationFrame","cancelAnimationFrame","$requestAnimationFrame","requestAnimationFrame","parameterize","hasAttrs","classAttrName","cell","classes","id","pair","attrParser","children","attrName","forKeys","dataToString","injectTextNode","parentElement","first","insertNode","nodeValue","flatten","insertBefore","childNodes","handleKeysDiffer","existing","cached","MOVE","from","nodes","INSERTION","actions","changes","sort","sortChanges","newCached","change","DELETION","clear","dummy","changeElement","maybeChanged","diffKeys","keysDiffer","cachedCell","diffArray","_","parentNode","indexOf","buildArrayKeys","guid","maybeRecreateObject","dataAttrKeys","strategy","configContext","retain","onunload","controllers","controller","unload","preventDefault","noop","getObjectNamespace","xmlns","unloadCachedControllers","views","$old","pendingRequests","scheduleConfigsToBeCalled","configs","isNew","context","buildUpdatedNode","editable","hasKeys","setAttributes","build","contenteditable","intact","handleNonexistentNodes","$trusted","injectHTML","nodeName","voidElements","reattachNodes","parentTag","activeElement","innerHTML","nodeType","trim","handleText","shouldReattach","valueOf","getSubArrayCount","item","buildArray","subArrayCount","shouldMaintainIdentities","cacheCount","makeCache","parentIndex","parentCache","constructNode","is","createElementNS","constructAttrs","constructChildren","reconstructCached","getController","cachedControllers","controllerIndex","updateLists","unloaders","checkView","forcing","subtree","markViews","$original","buildObject","b","dataAttrs","cachedAttrs","dataAttr","cachedAttr","autoredraw","rule","setAttributeNS","nextSibling","isElement","insertAdjacentHTML","Range","createContextualFragment","createRange","startComputation","endFirstComputation","getCellCacheKey","nodeCache","gettersetter","store","component","ctrl","currentArgs","output","removeRootElement","root","roots","components","computePreRedrawHook","render","computePostRedrawHook","lastRedrawId","lastRedrawCallTime","endComputation","normalizeRoute","route","modes","mode","routeByValue","router","routeParams","queryStart","parseQueryString","matcher","values","decodeURIComponent","routeUnobtrusive","ctrlKey","metaKey","which","returnValue","currentTarget","toUpperCase","setScroll","hash","scrollTo","buildQueryString","prefix","duplicates","cacheKey","cellCache","propify","initialValue","Deferred","successCallback","failureCallback","finish","REJECTED","next","deferred","RESOLVED","promiseValue","thennable","notThennableCallback","count","fire","REJECTING","RESOLVING","ajax","dataType","xhr","user","password","serialize","deserialize","maybeXhr","FormData","callbackKey","getTime","random","resp","bindData","xhrOptions","parameterizeUrl","tokens","token","VERSION","html","documentNode","replaceChild","forceRecreation","isDocumentRoot","String","topComponent","FRAME_BUDGET","isPrevented","unloader","isNullComponent","currentComponent","redrawing","force","withAttr","withAttrCallback","callbackThis","_this","getAttribute","currentRoute","redirect","isDefaultRoute","arg1","arg2","vdom","oldRoute","queryIndex","currentPath","shouldReplaceHistoryEntry","history","pushState","param","sync","synchronizer","pos","resolved","outstanding","background","isJSONP","extract","jsonp","unwrap","unwrapSuccess","unwrapError","response","res","deps","mock","factory","amd",88,"cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","run","Item","fun","argv","versions","off","binding","cwd","chdir","dir","umask",89,"qs","sep","eq","regexp","maxKeys","kstr","vstr","k","idx","xs",90,"stringifyPrimitive","isFinite","objectKeys","ks",91,"decode","./decode","./encode"],"mappings":"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","file":"lucy/assets/js/script.min.js","sourcesContent":["(function () { var require = undefined; var define = undefined; (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar Lucy = require('./third-party/lucy.js');\n\nvar lucy = new Lucy(\n\t'https://mc4wp.com/',\n\t'DA9YFSTRKA',\n\t'ce1c93fad15be2b70e0aa0b1c2e52d8e',\n\t'wpkb_articles',\n\t[\n\t\t{\n\t\t\ttext: \"<span class=\\\"dashicons dashicons-book\\\"></span> Knowledge Base\",\n\t\t\thref: \"https://mc4wp.com/kb/\"\n\t\t},\n\t\t{\n\t\t\ttext: \"<span class=\\\"dashicons dashicons-editor-code\\\"></span> Code Reference\",\n\t\t\thref: \"http://developer.mc4wp.com/\"\n\t\t},\n\t\t{\n\t\t\ttext: \"<span class=\\\"dashicons dashicons-editor-break\\\"></span> Changelog\",\n\t\t\thref: \"http://mc4wp.com/documentation/changelog/\"\n\t\t}\n\n\t],\n\tlucy_config.email_link\n);\n},{\"./third-party/lucy.js\":2}],2:[function(require,module,exports){\n'use strict';\n\nvar lucy = function( site_url, algolia_app_id, algolia_api_key, algolia_index_name, links, contactLink ) {\n\n\t// make sure site url does not have trailing slash\n\tif( site_url.charAt(site_url.length - 1) == \"/\") {\n\t\tsite_url = site_url.substr(0, site_url.length - 1);\n\t}\n\n\tvar m = require('mithril');\n\tvar algoliasearch = require('algoliasearch');\n\tvar client = algoliasearch( algolia_app_id, algolia_api_key );\n\tvar index = client.initIndex( algolia_index_name );\n\n\tvar isOpen = false;\n\tvar loader, loadingInterval = 0;\n\tvar searchResults = m.prop([]);\n\tvar searchQuery = m.prop('');\n\tvar nothingFound = false;\n\n\t// create element\n\tvar element = document.createElement('div');\n\telement.setAttribute('class','lucy closed');\n\tdocument.body.appendChild(element);\n\n\tfunction addEvent(element,event,handler) {\n\t\tif(element.addEventListener){\n\t\t\telement.addEventListener(event,handler,false);\n\t\t} else {\n\t\t\telement.attachEvent('on' + event, handler);\n\t\t}\n\t}\n\n\tfunction removeEvent(element,event,handler){\n\t\tif(element.removeEventListener){\n\t\t\telement.removeEventListener(event,handler);\n\t\t} else {\n\t\t\telement.detachEvent('on' + event, handler);\n\t\t}\n\t}\n\n\tfunction maybeClose(event) {\n\t\tevent = event || window.event;\n\n\t\t// close when pressing ESCAPE\n\t\tif(event.type === 'keyup' && event.keyCode == 27 ) {\n\t\t\tclose();\n\t\t\treturn;\n\t\t}\n\n\t\t// close when clicking ANY element outside of Lucy\n\t\tvar clickedElement = event.target || event.srcElement;\n\t\tif(event.type === 'click' && element.contains && ! element.contains(clickedElement) )  {\n\t\t\tclose();\n\t\t}\n\t}\n\n\tfunction open() {\n\t\tif( isOpen ) return;\n\t\tisOpen = true;\n\t\tm.redraw();\n\n\t\telement.setAttribute('class', 'lucy open' );\n\n\t\taddEvent(document,'keyup',maybeClose);\n\t\taddEvent(document,'click',maybeClose);\n\t}\n\n\tfunction close() {\n\t\tif( ! isOpen ) return;\n\t\tisOpen = false;\n\t\treset();\n\n\t\telement.setAttribute('class', 'lucy closed' );\n\n\t\tremoveEvent(document,'keyup',maybeClose);\n\t\tremoveEvent(document,'click',maybeClose);\n\t}\n\n\tfunction reset() {\n\t\tsearchQuery('');\n\t\tsearchResults([]);\n\t\tnothingFound = false;\n\t\tm.redraw();\n\t}\n\n\tfunction listenForInput(event) {\n\t\tevent = event || window.event;\n\n\t\t// revert back to list of links when empty\n\t\tif( this.value === '' && searchQuery() !== '' ) {\n\t\t\treturn reset();\n\t\t}\n\n\t\tsearchQuery(this.value);\n\n\t\t// perform search on [ENTER]\n\t\tif(event.keyCode == 13 ) {\n\t\t\treturn search(this.value);\n\t\t}\n\t}\n\n\tvar module = {};\n\tmodule.view = function() {\n\t\tvar content;\n\n\t\treturn [\n\t\t\tm('div.lucy--content', { style: { display: isOpen ? 'block' : 'none' } }, [\n\t\t\t\tm('span.close-icon', { onclick: close }, \"\"),\n\t\t\t\tm('div.header', [\n\t\t\t\t\tm('h4', 'Looking for help?'),\n\t\t\t\t\tm('div.search-form', {\n\t\t\t\t\t\tonsubmit: search\n\t\t\t\t\t}, [\n\t\t\t\t\t\tm('input', {\n\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\tvalue: searchQuery(),\n\t\t\t\t\t\t\tonkeyup: listenForInput,\n\t\t\t\t\t\t\tconfig: function(el) { isOpen && el.focus(); },\n\t\t\t\t\t\t\tplaceholder: 'What are you looking for?'\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tm('span', {\n\t\t\t\t\t\t\t\"class\": 'loader',\n\t\t\t\t\t\t\tconfig: function(el) {\n\t\t\t\t\t\t\t\tloader = el;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tm('input', { type: 'submit' })\n\t\t\t\t\t])\n\t\t\t\t]),\n\t\t\t\tm('div.list', [\n\n\t\t\t\t\tm('div.links', { style: { display: searchQuery().length > 0 ? 'none' : 'block' } }, links.map(function(l) {\n\t\t\t\t\t\treturn m('a', { href: l.href }, m.trust(l.text) );\n\t\t\t\t\t})),\n\n\n\t\t\t\t\tm('div.search-results', [\n\t\t\t\t\t\tm(\"em.search-pending\", { style: { display: ( searchQuery().length > 0 && searchResults().length == 0 ) ? 'block' : 'none' } }, ( nothingFound ? \"Nothing found for \" : \"Hit [ENTER] to search for\" ) + \"\\\"\"+ searchQuery() +\"\\\"..\"),\n\t\t\t\t\t\tsearchResults().map(function(l) {\n\t\t\t\t\t\t\treturn m('a', { href: l.href }, m.trust(l.text) );\n\t\t\t\t\t\t})\n\t\t\t\t\t])\n\n\t\t\t\t]),\n\t\t\t\tm('div.footer', [\n\t\t\t\t\tm(\"span\", \"Can't find the answer you're looking for?\"),\n\t\t\t\t\tm(\"a\", { \"class\": 'button button-primary', href: contactLink, target: \"_blank\" }, \"Contact Support\")\n\t\t\t\t])\n\t\t\t]),\n\t\t\tm('span.lucy-button', {\n\t\t\t\tonclick: open,\n\t\t\t\tstyle: { display: isOpen ? 'none' : 'block' }\n\t\t\t}, [\n\t\t\t\tm('span.lucy-button-text',  \"Need help?\")\n\t\t\t])\n\t\t];\n\t};\n\n\tfunction showResults(results) {\n\n\t\tif( results.length ) {\n\t\t\tvar parser = document.createElement('a');\n\t\t\tsearchResults(results.map(function(r) {\n\t\t\t\tparser.href = r.path;\n\t\t\t\tvar url = site_url + parser.pathname + ( parser.search || '' );\n\t\t\t\treturn { href: url, text: r._highlightResult.title.value};\n\t\t\t}));\n\t\t} else {\n\t\t\tnothingFound = true;\n\t\t}\n\n\t\tm.redraw();\n\t}\n\n\n\tfunction search(query) {\n\n\t\t// start loader\n\t\tloader.innerText = '.';\n\t\tloadingInterval = window.setInterval(function() {\n\t\t\tloader.innerText += '.';\n\n\t\t\tif( loader.innerText.length > 3 ) {\n\t\t\t\tloader.innerText = '.';\n\t\t\t}\n\t\t}, 333 );\n\n\t\t// search\n\t\tindex.search( query, { hitsPerPage: 5 }, function( error, result ) {\n\n\t\t\tif( error ) {\n\t\t\t\tconsole.log(error);\n\t\t\t } else {\n\t\t\t\tshowResults(result.hits);\n\t\t\t}\n\n\t\t\t/* clear loader */\n\t\t\tloader.innerText = '';\n\t\t\twindow.clearInterval(loadingInterval);\n\t\t} );\n\n\t}\n\n\tm.mount(element,module);\n};\n\nmodule.exports = lucy;\n},{\"algoliasearch\":76,\"mithril\":87}],3:[function(require,module,exports){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  // long, short were \"future reserved words in js\", YUI compressor fail on them\n  // https://github.com/algolia/algoliasearch-client-js/issues/113#issuecomment-111978606\n  // https://github.com/yui/yuicompressor/issues/47\n  // https://github.com/rauchg/ms.js/pull/40\n  return options['long']\n    ? _long(val)\n    : _short(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = '' + str;\n  if (str.length > 10000) return;\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction _short(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction _long(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n},{}],4:[function(require,module,exports){\n/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array ? array.length : 0;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n\n},{}],5:[function(require,module,exports){\nvar arrayEach = require('../internal/arrayEach'),\n    baseEach = require('../internal/baseEach'),\n    createForEach = require('../internal/createForEach');\n\n/**\n * Iterates over elements of `collection` invoking `iteratee` for each element.\n * The `iteratee` is bound to `thisArg` and invoked with three arguments:\n * (value, index|key, collection). Iteratee functions may exit iteration early\n * by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\" property\n * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`\n * may be used for object iteration.\n *\n * @static\n * @memberOf _\n * @alias each\n * @category Collection\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [thisArg] The `this` binding of `iteratee`.\n * @returns {Array|Object|string} Returns `collection`.\n * @example\n *\n * _([1, 2]).forEach(function(n) {\n *   console.log(n);\n * }).value();\n * // => logs each value from left to right and returns the array\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(n, key) {\n *   console.log(n, key);\n * });\n * // => logs each value-key pair and returns the object (iteration order is not guaranteed)\n */\nvar forEach = createForEach(arrayEach, baseEach);\n\nmodule.exports = forEach;\n\n},{\"../internal/arrayEach\":9,\"../internal/baseEach\":16,\"../internal/createForEach\":38}],6:[function(require,module,exports){\nvar arrayMap = require('../internal/arrayMap'),\n    baseCallback = require('../internal/baseCallback'),\n    baseMap = require('../internal/baseMap'),\n    isArray = require('../lang/isArray');\n\n/**\n * Creates an array of values by running each element in `collection` through\n * `iteratee`. The `iteratee` is bound to `thisArg` and invoked with three\n * arguments: (value, index|key, collection).\n *\n * If a property name is provided for `iteratee` the created `_.property`\n * style callback returns the property value of the given element.\n *\n * If a value is also provided for `thisArg` the created `_.matchesProperty`\n * style callback returns `true` for elements that have a matching property\n * value, else `false`.\n *\n * If an object is provided for `iteratee` the created `_.matches` style\n * callback returns `true` for elements that have the properties of the given\n * object, else `false`.\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `callback`, `chunk`, `clone`, `create`, `curry`, `curryRight`,\n * `drop`, `dropRight`, `every`, `fill`, `flatten`, `invert`, `max`, `min`,\n * `parseInt`, `slice`, `sortBy`, `take`, `takeRight`, `template`, `trim`,\n * `trimLeft`, `trimRight`, `trunc`, `random`, `range`, `sample`, `some`,\n * `sum`, `uniq`, and `words`\n *\n * @static\n * @memberOf _\n * @alias collect\n * @category Collection\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n *  per iteration.\n * @param {*} [thisArg] The `this` binding of `iteratee`.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function timesThree(n) {\n *   return n * 3;\n * }\n *\n * _.map([1, 2], timesThree);\n * // => [3, 6]\n *\n * _.map({ 'a': 1, 'b': 2 }, timesThree);\n * // => [3, 6] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // using the `_.property` callback shorthand\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee, thisArg) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  iteratee = baseCallback(iteratee, thisArg, 3);\n  return func(collection, iteratee);\n}\n\nmodule.exports = map;\n\n},{\"../internal/arrayMap\":10,\"../internal/baseCallback\":13,\"../internal/baseMap\":24,\"../lang/isArray\":61}],7:[function(require,module,exports){\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as an array.\n *\n * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/Web/JavaScript/Reference/Functions/rest_parameters).\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.restParam(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction restParam(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        rest = Array(length);\n\n    while (++index < length) {\n      rest[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, args[0], rest);\n      case 2: return func.call(this, args[0], args[1], rest);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = rest;\n    return func.apply(this, otherArgs);\n  };\n}\n\nmodule.exports = restParam;\n\n},{}],8:[function(require,module,exports){\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction arrayCopy(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayCopy;\n\n},{}],9:[function(require,module,exports){\n/**\n * A specialized version of `_.forEach` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n\n},{}],10:[function(require,module,exports){\n/**\n * A specialized version of `_.map` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n\n},{}],11:[function(require,module,exports){\n/**\n * A specialized version of `_.some` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n\n},{}],12:[function(require,module,exports){\nvar baseCopy = require('./baseCopy'),\n    keys = require('../object/keys');\n\n/**\n * The base implementation of `_.assign` without support for argument juggling,\n * multiple sources, and `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return source == null\n    ? object\n    : baseCopy(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n\n},{\"../object/keys\":68,\"./baseCopy\":15}],13:[function(require,module,exports){\nvar baseMatches = require('./baseMatches'),\n    baseMatchesProperty = require('./baseMatchesProperty'),\n    bindCallback = require('./bindCallback'),\n    identity = require('../utility/identity'),\n    property = require('../utility/property');\n\n/**\n * The base implementation of `_.callback` which supports specifying the\n * number of arguments to provide to `func`.\n *\n * @private\n * @param {*} [func=_.identity] The value to convert to a callback.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {number} [argCount] The number of arguments to provide to `func`.\n * @returns {Function} Returns the callback.\n */\nfunction baseCallback(func, thisArg, argCount) {\n  var type = typeof func;\n  if (type == 'function') {\n    return thisArg === undefined\n      ? func\n      : bindCallback(func, thisArg, argCount);\n  }\n  if (func == null) {\n    return identity;\n  }\n  if (type == 'object') {\n    return baseMatches(func);\n  }\n  return thisArg === undefined\n    ? property(func)\n    : baseMatchesProperty(func, thisArg);\n}\n\nmodule.exports = baseCallback;\n\n},{\"../utility/identity\":72,\"../utility/property\":73,\"./baseMatches\":25,\"./baseMatchesProperty\":26,\"./bindCallback\":33}],14:[function(require,module,exports){\nvar arrayCopy = require('./arrayCopy'),\n    arrayEach = require('./arrayEach'),\n    baseAssign = require('./baseAssign'),\n    baseForOwn = require('./baseForOwn'),\n    initCloneArray = require('./initCloneArray'),\n    initCloneByTag = require('./initCloneByTag'),\n    initCloneObject = require('./initCloneObject'),\n    isArray = require('../lang/isArray'),\n    isObject = require('../lang/isObject');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[boolTag] =\ncloneableTags[dateTag] = cloneableTags[float32Tag] =\ncloneableTags[float64Tag] = cloneableTags[int8Tag] =\ncloneableTags[int16Tag] = cloneableTags[int32Tag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[stringTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[mapTag] = cloneableTags[setTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * The base implementation of `_.clone` without support for argument juggling\n * and `this` binding `customizer` functions.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {Function} [customizer] The function to customize cloning values.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The object `value` belongs to.\n * @param {Array} [stackA=[]] Tracks traversed source objects.\n * @param {Array} [stackB=[]] Associates clones with source counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, customizer, key, object, stackA, stackB) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return arrayCopy(value, result);\n    }\n  } else {\n    var tag = objToString.call(value),\n        isFunc = tag == funcTag;\n\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return baseAssign(result, value);\n      }\n    } else {\n      return cloneableTags[tag]\n        ? initCloneByTag(value, tag, isDeep)\n        : (object ? value : {});\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stackA || (stackA = []);\n  stackB || (stackB = []);\n\n  var length = stackA.length;\n  while (length--) {\n    if (stackA[length] == value) {\n      return stackB[length];\n    }\n  }\n  // Add the source value to the stack of traversed objects and associate it with its clone.\n  stackA.push(value);\n  stackB.push(result);\n\n  // Recursively populate clone (susceptible to call stack limits).\n  (isArr ? arrayEach : baseForOwn)(value, function(subValue, key) {\n    result[key] = baseClone(subValue, isDeep, customizer, key, value, stackA, stackB);\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n\n},{\"../lang/isArray\":61,\"../lang/isObject\":64,\"./arrayCopy\":8,\"./arrayEach\":9,\"./baseAssign\":12,\"./baseForOwn\":19,\"./initCloneArray\":45,\"./initCloneByTag\":46,\"./initCloneObject\":47}],15:[function(require,module,exports){\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @returns {Object} Returns `object`.\n */\nfunction baseCopy(source, props, object) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n    object[key] = source[key];\n  }\n  return object;\n}\n\nmodule.exports = baseCopy;\n\n},{}],16:[function(require,module,exports){\nvar baseForOwn = require('./baseForOwn'),\n    createBaseEach = require('./createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object|string} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n\n},{\"./baseForOwn\":19,\"./createBaseEach\":36}],17:[function(require,module,exports){\nvar createBaseFor = require('./createBaseFor');\n\n/**\n * The base implementation of `baseForIn` and `baseForOwn` which iterates\n * over `object` properties returned by `keysFunc` invoking `iteratee` for\n * each property. Iteratee functions may exit iteration early by explicitly\n * returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n\n},{\"./createBaseFor\":37}],18:[function(require,module,exports){\nvar baseFor = require('./baseFor'),\n    keysIn = require('../object/keysIn');\n\n/**\n * The base implementation of `_.forIn` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForIn(object, iteratee) {\n  return baseFor(object, iteratee, keysIn);\n}\n\nmodule.exports = baseForIn;\n\n},{\"../object/keysIn\":69,\"./baseFor\":17}],19:[function(require,module,exports){\nvar baseFor = require('./baseFor'),\n    keys = require('../object/keys');\n\n/**\n * The base implementation of `_.forOwn` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n\n},{\"../object/keys\":68,\"./baseFor\":17}],20:[function(require,module,exports){\nvar toObject = require('./toObject');\n\n/**\n * The base implementation of `get` without support for string paths\n * and default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path of the property to get.\n * @param {string} [pathKey] The key representation of path.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path, pathKey) {\n  if (object == null) {\n    return;\n  }\n  if (pathKey !== undefined && pathKey in toObject(object)) {\n    path = [pathKey];\n  }\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[path[index++]];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n\n},{\"./toObject\":56}],21:[function(require,module,exports){\nvar baseIsEqualDeep = require('./baseIsEqualDeep'),\n    isObject = require('../lang/isObject'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` without support for `this` binding\n * `customizer` functions.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparing values.\n * @param {boolean} [isLoose] Specify performing partial comparisons.\n * @param {Array} [stackA] Tracks traversed `value` objects.\n * @param {Array} [stackB] Tracks traversed `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, customizer, isLoose, stackA, stackB) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, baseIsEqual, customizer, isLoose, stackA, stackB);\n}\n\nmodule.exports = baseIsEqual;\n\n},{\"../lang/isObject\":64,\"./baseIsEqualDeep\":22,\"./isObjectLike\":53}],22:[function(require,module,exports){\nvar equalArrays = require('./equalArrays'),\n    equalByTag = require('./equalByTag'),\n    equalObjects = require('./equalObjects'),\n    isArray = require('../lang/isArray'),\n    isTypedArray = require('../lang/isTypedArray');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparing objects.\n * @param {boolean} [isLoose] Specify performing partial comparisons.\n * @param {Array} [stackA=[]] Tracks traversed `value` objects.\n * @param {Array} [stackB=[]] Tracks traversed `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, equalFunc, customizer, isLoose, stackA, stackB) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = arrayTag,\n      othTag = arrayTag;\n\n  if (!objIsArr) {\n    objTag = objToString.call(object);\n    if (objTag == argsTag) {\n      objTag = objectTag;\n    } else if (objTag != objectTag) {\n      objIsArr = isTypedArray(object);\n    }\n  }\n  if (!othIsArr) {\n    othTag = objToString.call(other);\n    if (othTag == argsTag) {\n      othTag = objectTag;\n    } else if (othTag != objectTag) {\n      othIsArr = isTypedArray(other);\n    }\n  }\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && !(objIsArr || objIsObj)) {\n    return equalByTag(object, other, objTag);\n  }\n  if (!isLoose) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, isLoose, stackA, stackB);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  // For more information on detecting circular references see https://es5.github.io/#JO.\n  stackA || (stackA = []);\n  stackB || (stackB = []);\n\n  var length = stackA.length;\n  while (length--) {\n    if (stackA[length] == object) {\n      return stackB[length] == other;\n    }\n  }\n  // Add `object` and `other` to the stack of traversed objects.\n  stackA.push(object);\n  stackB.push(other);\n\n  var result = (objIsArr ? equalArrays : equalObjects)(object, other, equalFunc, customizer, isLoose, stackA, stackB);\n\n  stackA.pop();\n  stackB.pop();\n\n  return result;\n}\n\nmodule.exports = baseIsEqualDeep;\n\n},{\"../lang/isArray\":61,\"../lang/isTypedArray\":66,\"./equalArrays\":39,\"./equalByTag\":40,\"./equalObjects\":41}],23:[function(require,module,exports){\nvar baseIsEqual = require('./baseIsEqual'),\n    toObject = require('./toObject');\n\n/**\n * The base implementation of `_.isMatch` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Array} matchData The propery names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparing objects.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = toObject(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var result = customizer ? customizer(objValue, srcValue, key) : undefined;\n      if (!(result === undefined ? baseIsEqual(srcValue, objValue, customizer, true) : result)) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n\n},{\"./baseIsEqual\":21,\"./toObject\":56}],24:[function(require,module,exports){\nvar baseEach = require('./baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for callback shorthands\n * and `this` binding.\n *\n * @private\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n\n},{\"./baseEach\":16,\"./isArrayLike\":48}],25:[function(require,module,exports){\nvar baseIsMatch = require('./baseIsMatch'),\n    getMatchData = require('./getMatchData'),\n    toObject = require('./toObject');\n\n/**\n * The base implementation of `_.matches` which does not clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    var key = matchData[0][0],\n        value = matchData[0][1];\n\n    return function(object) {\n      if (object == null) {\n        return false;\n      }\n      return object[key] === value && (value !== undefined || (key in toObject(object)));\n    };\n  }\n  return function(object) {\n    return baseIsMatch(object, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n\n},{\"./baseIsMatch\":23,\"./getMatchData\":43,\"./toObject\":56}],26:[function(require,module,exports){\nvar baseGet = require('./baseGet'),\n    baseIsEqual = require('./baseIsEqual'),\n    baseSlice = require('./baseSlice'),\n    isArray = require('../lang/isArray'),\n    isKey = require('./isKey'),\n    isStrictComparable = require('./isStrictComparable'),\n    last = require('../array/last'),\n    toObject = require('./toObject'),\n    toPath = require('./toPath');\n\n/**\n * The base implementation of `_.matchesProperty` which does not clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to compare.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  var isArr = isArray(path),\n      isCommon = isKey(path) && isStrictComparable(srcValue),\n      pathKey = (path + '');\n\n  path = toPath(path);\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    var key = pathKey;\n    object = toObject(object);\n    if ((isArr || !isCommon) && !(key in object)) {\n      object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));\n      if (object == null) {\n        return false;\n      }\n      key = last(path);\n      object = toObject(object);\n    }\n    return object[key] === srcValue\n      ? (srcValue !== undefined || (key in object))\n      : baseIsEqual(srcValue, object[key], undefined, true);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n\n},{\"../array/last\":4,\"../lang/isArray\":61,\"./baseGet\":20,\"./baseIsEqual\":21,\"./baseSlice\":31,\"./isKey\":51,\"./isStrictComparable\":54,\"./toObject\":56,\"./toPath\":57}],27:[function(require,module,exports){\nvar arrayEach = require('./arrayEach'),\n    baseMergeDeep = require('./baseMergeDeep'),\n    isArray = require('../lang/isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isObject = require('../lang/isObject'),\n    isObjectLike = require('./isObjectLike'),\n    isTypedArray = require('../lang/isTypedArray'),\n    keys = require('../object/keys');\n\n/**\n * The base implementation of `_.merge` without support for argument juggling,\n * multiple sources, and `this` binding `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Array} [stackA=[]] Tracks traversed source objects.\n * @param {Array} [stackB=[]] Associates values with source counterparts.\n * @returns {Object} Returns `object`.\n */\nfunction baseMerge(object, source, customizer, stackA, stackB) {\n  if (!isObject(object)) {\n    return object;\n  }\n  var isSrcArr = isArrayLike(source) && (isArray(source) || isTypedArray(source)),\n      props = isSrcArr ? undefined : keys(source);\n\n  arrayEach(props || source, function(srcValue, key) {\n    if (props) {\n      key = srcValue;\n      srcValue = source[key];\n    }\n    if (isObjectLike(srcValue)) {\n      stackA || (stackA = []);\n      stackB || (stackB = []);\n      baseMergeDeep(object, source, key, baseMerge, customizer, stackA, stackB);\n    }\n    else {\n      var value = object[key],\n          result = customizer ? customizer(value, srcValue, key, object, source) : undefined,\n          isCommon = result === undefined;\n\n      if (isCommon) {\n        result = srcValue;\n      }\n      if ((result !== undefined || (isSrcArr && !(key in object))) &&\n          (isCommon || (result === result ? (result !== value) : (value === value)))) {\n        object[key] = result;\n      }\n    }\n  });\n  return object;\n}\n\nmodule.exports = baseMerge;\n\n},{\"../lang/isArray\":61,\"../lang/isObject\":64,\"../lang/isTypedArray\":66,\"../object/keys\":68,\"./arrayEach\":9,\"./baseMergeDeep\":28,\"./isArrayLike\":48,\"./isObjectLike\":53}],28:[function(require,module,exports){\nvar arrayCopy = require('./arrayCopy'),\n    isArguments = require('../lang/isArguments'),\n    isArray = require('../lang/isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isPlainObject = require('../lang/isPlainObject'),\n    isTypedArray = require('../lang/isTypedArray'),\n    toPlainObject = require('../lang/toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Array} [stackA=[]] Tracks traversed source objects.\n * @param {Array} [stackB=[]] Associates values with source counterparts.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseMergeDeep(object, source, key, mergeFunc, customizer, stackA, stackB) {\n  var length = stackA.length,\n      srcValue = source[key];\n\n  while (length--) {\n    if (stackA[length] == srcValue) {\n      object[key] = stackB[length];\n      return;\n    }\n  }\n  var value = object[key],\n      result = customizer ? customizer(value, srcValue, key, object, source) : undefined,\n      isCommon = result === undefined;\n\n  if (isCommon) {\n    result = srcValue;\n    if (isArrayLike(srcValue) && (isArray(srcValue) || isTypedArray(srcValue))) {\n      result = isArray(value)\n        ? value\n        : (isArrayLike(value) ? arrayCopy(value) : []);\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      result = isArguments(value)\n        ? toPlainObject(value)\n        : (isPlainObject(value) ? value : {});\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  // Add the source value to the stack of traversed objects and associate\n  // it with its merged value.\n  stackA.push(srcValue);\n  stackB.push(result);\n\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    object[key] = mergeFunc(result, srcValue, customizer, stackA, stackB);\n  } else if (result === result ? (result !== value) : (value === value)) {\n    object[key] = result;\n  }\n}\n\nmodule.exports = baseMergeDeep;\n\n},{\"../lang/isArguments\":60,\"../lang/isArray\":61,\"../lang/isPlainObject\":65,\"../lang/isTypedArray\":66,\"../lang/toPlainObject\":67,\"./arrayCopy\":8,\"./isArrayLike\":48}],29:[function(require,module,exports){\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n\n},{}],30:[function(require,module,exports){\nvar baseGet = require('./baseGet'),\n    toPath = require('./toPath');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction basePropertyDeep(path) {\n  var pathKey = (path + '');\n  path = toPath(path);\n  return function(object) {\n    return baseGet(object, path, pathKey);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n\n},{\"./baseGet\":20,\"./toPath\":57}],31:[function(require,module,exports){\n/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  start = start == null ? 0 : (+start || 0);\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = (end === undefined || end > length) ? length : (+end || 0);\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n\n},{}],32:[function(require,module,exports){\n/**\n * Converts `value` to a string if it's not one. An empty string is returned\n * for `null` or `undefined` values.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  return value == null ? '' : (value + '');\n}\n\nmodule.exports = baseToString;\n\n},{}],33:[function(require,module,exports){\nvar identity = require('../utility/identity');\n\n/**\n * A specialized version of `baseCallback` which only supports `this` binding\n * and specifying the number of arguments to provide to `func`.\n *\n * @private\n * @param {Function} func The function to bind.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {number} [argCount] The number of arguments to provide to `func`.\n * @returns {Function} Returns the callback.\n */\nfunction bindCallback(func, thisArg, argCount) {\n  if (typeof func != 'function') {\n    return identity;\n  }\n  if (thisArg === undefined) {\n    return func;\n  }\n  switch (argCount) {\n    case 1: return function(value) {\n      return func.call(thisArg, value);\n    };\n    case 3: return function(value, index, collection) {\n      return func.call(thisArg, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(thisArg, accumulator, value, index, collection);\n    };\n    case 5: return function(value, other, key, object, source) {\n      return func.call(thisArg, value, other, key, object, source);\n    };\n  }\n  return function() {\n    return func.apply(thisArg, arguments);\n  };\n}\n\nmodule.exports = bindCallback;\n\n},{\"../utility/identity\":72}],34:[function(require,module,exports){\n(function (global){\n/** Native method references. */\nvar ArrayBuffer = global.ArrayBuffer,\n    Uint8Array = global.Uint8Array;\n\n/**\n * Creates a clone of the given array buffer.\n *\n * @private\n * @param {ArrayBuffer} buffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction bufferClone(buffer) {\n  var result = new ArrayBuffer(buffer.byteLength),\n      view = new Uint8Array(result);\n\n  view.set(new Uint8Array(buffer));\n  return result;\n}\n\nmodule.exports = bufferClone;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],35:[function(require,module,exports){\nvar bindCallback = require('./bindCallback'),\n    isIterateeCall = require('./isIterateeCall'),\n    restParam = require('../function/restParam');\n\n/**\n * Creates a `_.assign`, `_.defaults`, or `_.merge` function.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return restParam(function(object, sources) {\n    var index = -1,\n        length = object == null ? 0 : sources.length,\n        customizer = length > 2 ? sources[length - 2] : undefined,\n        guard = length > 2 ? sources[2] : undefined,\n        thisArg = length > 1 ? sources[length - 1] : undefined;\n\n    if (typeof customizer == 'function') {\n      customizer = bindCallback(customizer, thisArg, 5);\n      length -= 2;\n    } else {\n      customizer = typeof thisArg == 'function' ? thisArg : undefined;\n      length -= (customizer ? 1 : 0);\n    }\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n\n},{\"../function/restParam\":7,\"./bindCallback\":33,\"./isIterateeCall\":50}],36:[function(require,module,exports){\nvar getLength = require('./getLength'),\n    isLength = require('./isLength'),\n    toObject = require('./toObject');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    var length = collection ? getLength(collection) : 0;\n    if (!isLength(length)) {\n      return eachFunc(collection, iteratee);\n    }\n    var index = fromRight ? length : -1,\n        iterable = toObject(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n\n},{\"./getLength\":42,\"./isLength\":52,\"./toObject\":56}],37:[function(require,module,exports){\nvar toObject = require('./toObject');\n\n/**\n * Creates a base function for `_.forIn` or `_.forInRight`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var iterable = toObject(object),\n        props = keysFunc(object),\n        length = props.length,\n        index = fromRight ? length : -1;\n\n    while ((fromRight ? index-- : ++index < length)) {\n      var key = props[index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n\n},{\"./toObject\":56}],38:[function(require,module,exports){\nvar bindCallback = require('./bindCallback'),\n    isArray = require('../lang/isArray');\n\n/**\n * Creates a function for `_.forEach` or `_.forEachRight`.\n *\n * @private\n * @param {Function} arrayFunc The function to iterate over an array.\n * @param {Function} eachFunc The function to iterate over a collection.\n * @returns {Function} Returns the new each function.\n */\nfunction createForEach(arrayFunc, eachFunc) {\n  return function(collection, iteratee, thisArg) {\n    return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))\n      ? arrayFunc(collection, iteratee)\n      : eachFunc(collection, bindCallback(iteratee, thisArg, 3));\n  };\n}\n\nmodule.exports = createForEach;\n\n},{\"../lang/isArray\":61,\"./bindCallback\":33}],39:[function(require,module,exports){\nvar arraySome = require('./arraySome');\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparing arrays.\n * @param {boolean} [isLoose] Specify performing partial comparisons.\n * @param {Array} [stackA] Tracks traversed `value` objects.\n * @param {Array} [stackB] Tracks traversed `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, equalFunc, customizer, isLoose, stackA, stackB) {\n  var index = -1,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isLoose && othLength > arrLength)) {\n    return false;\n  }\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index],\n        result = customizer ? customizer(isLoose ? othValue : arrValue, isLoose ? arrValue : othValue, index) : undefined;\n\n    if (result !== undefined) {\n      if (result) {\n        continue;\n      }\n      return false;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (isLoose) {\n      if (!arraySome(other, function(othValue) {\n            return arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB);\n          })) {\n        return false;\n      }\n    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB))) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = equalArrays;\n\n},{\"./arraySome\":11}],40:[function(require,module,exports){\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    stringTag = '[object String]';\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag) {\n  switch (tag) {\n    case boolTag:\n    case dateTag:\n      // Coerce dates and booleans to numbers, dates to milliseconds and booleans\n      // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.\n      return +object == +other;\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case numberTag:\n      // Treat `NaN` vs. `NaN` as equal.\n      return (object != +object)\n        ? other != +other\n        : object == +other;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings primitives and string\n      // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.\n      return object == (other + '');\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n\n},{}],41:[function(require,module,exports){\nvar keys = require('../object/keys');\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparing values.\n * @param {boolean} [isLoose] Specify performing partial comparisons.\n * @param {Array} [stackA] Tracks traversed `value` objects.\n * @param {Array} [stackB] Tracks traversed `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, equalFunc, customizer, isLoose, stackA, stackB) {\n  var objProps = keys(object),\n      objLength = objProps.length,\n      othProps = keys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isLoose) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isLoose ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  var skipCtor = isLoose;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key],\n        result = customizer ? customizer(isLoose ? othValue : objValue, isLoose? objValue : othValue, key) : undefined;\n\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(result === undefined ? equalFunc(objValue, othValue, customizer, isLoose, stackA, stackB) : result)) {\n      return false;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (!skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = equalObjects;\n\n},{\"../object/keys\":68}],42:[function(require,module,exports){\nvar baseProperty = require('./baseProperty');\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\nmodule.exports = getLength;\n\n},{\"./baseProperty\":29}],43:[function(require,module,exports){\nvar isStrictComparable = require('./isStrictComparable'),\n    pairs = require('../object/pairs');\n\n/**\n * Gets the propery names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = pairs(object),\n      length = result.length;\n\n  while (length--) {\n    result[length][2] = isStrictComparable(result[length][1]);\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n\n},{\"../object/pairs\":71,\"./isStrictComparable\":54}],44:[function(require,module,exports){\nvar isNative = require('../lang/isNative');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = object == null ? undefined : object[key];\n  return isNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n\n},{\"../lang/isNative\":63}],45:[function(require,module,exports){\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add array properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n\n},{}],46:[function(require,module,exports){\nvar bufferClone = require('./bufferClone');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    stringTag = '[object String]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return bufferClone(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      var buffer = object.buffer;\n      return new Ctor(isDeep ? bufferClone(buffer) : buffer, object.byteOffset, object.length);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      var result = new Ctor(object.source, reFlags.exec(object));\n      result.lastIndex = object.lastIndex;\n  }\n  return result;\n}\n\nmodule.exports = initCloneByTag;\n\n},{\"./bufferClone\":34}],47:[function(require,module,exports){\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  var Ctor = object.constructor;\n  if (!(typeof Ctor == 'function' && Ctor instanceof Ctor)) {\n    Ctor = Object;\n  }\n  return new Ctor;\n}\n\nmodule.exports = initCloneObject;\n\n},{}],48:[function(require,module,exports){\nvar getLength = require('./getLength'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(getLength(value));\n}\n\nmodule.exports = isArrayLike;\n\n},{\"./getLength\":42,\"./isLength\":52}],49:[function(require,module,exports){\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^\\d+$/;\n\n/**\n * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\nmodule.exports = isIndex;\n\n},{}],50:[function(require,module,exports){\nvar isArrayLike = require('./isArrayLike'),\n    isIndex = require('./isIndex'),\n    isObject = require('../lang/isObject');\n\n/**\n * Checks if the provided arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n      ? (isArrayLike(object) && isIndex(index, object.length))\n      : (type == 'string' && index in object)) {\n    var other = object[index];\n    return value === value ? (value === other) : (other !== other);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n\n},{\"../lang/isObject\":64,\"./isArrayLike\":48,\"./isIndex\":49}],51:[function(require,module,exports){\nvar isArray = require('../lang/isArray'),\n    toObject = require('./toObject');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\n\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  var type = typeof value;\n  if ((type == 'string' && reIsPlainProp.test(value)) || type == 'number') {\n    return true;\n  }\n  if (isArray(value)) {\n    return false;\n  }\n  var result = !reIsDeepProp.test(value);\n  return result || (object != null && value in toObject(object));\n}\n\nmodule.exports = isKey;\n\n},{\"../lang/isArray\":61,\"./toObject\":56}],52:[function(require,module,exports){\n/**\n * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n */\nfunction isLength(value) {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n\n},{}],53:[function(require,module,exports){\n/**\n * Checks if `value` is object-like.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n},{}],54:[function(require,module,exports){\nvar isObject = require('../lang/isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n\n},{\"../lang/isObject\":64}],55:[function(require,module,exports){\nvar isArguments = require('../lang/isArguments'),\n    isArray = require('../lang/isArray'),\n    isIndex = require('./isIndex'),\n    isLength = require('./isLength'),\n    keysIn = require('../object/keysIn');\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A fallback implementation of `Object.keys` which creates an array of the\n * own enumerable property names of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction shimKeys(object) {\n  var props = keysIn(object),\n      propsLength = props.length,\n      length = propsLength && object.length;\n\n  var allowIndexes = !!length && isLength(length) &&\n    (isArray(object) || isArguments(object));\n\n  var index = -1,\n      result = [];\n\n  while (++index < propsLength) {\n    var key = props[index];\n    if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = shimKeys;\n\n},{\"../lang/isArguments\":60,\"../lang/isArray\":61,\"../object/keysIn\":69,\"./isIndex\":49,\"./isLength\":52}],56:[function(require,module,exports){\nvar isObject = require('../lang/isObject');\n\n/**\n * Converts `value` to an object if it's not one.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {Object} Returns the object.\n */\nfunction toObject(value) {\n  return isObject(value) ? value : Object(value);\n}\n\nmodule.exports = toObject;\n\n},{\"../lang/isObject\":64}],57:[function(require,module,exports){\nvar baseToString = require('./baseToString'),\n    isArray = require('../lang/isArray');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\n\\\\]|\\\\.)*?)\\2)\\]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `value` to property path array if it's not one.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {Array} Returns the property path array.\n */\nfunction toPath(value) {\n  if (isArray(value)) {\n    return value;\n  }\n  var result = [];\n  baseToString(value).replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n}\n\nmodule.exports = toPath;\n\n},{\"../lang/isArray\":61,\"./baseToString\":32}],58:[function(require,module,exports){\nvar baseClone = require('../internal/baseClone'),\n    bindCallback = require('../internal/bindCallback'),\n    isIterateeCall = require('../internal/isIterateeCall');\n\n/**\n * Creates a clone of `value`. If `isDeep` is `true` nested objects are cloned,\n * otherwise they are assigned by reference. If `customizer` is provided it's\n * invoked to produce the cloned values. If `customizer` returns `undefined`\n * cloning is handled by the method instead. The `customizer` is bound to\n * `thisArg` and invoked with up to three argument; (value [, index|key, object]).\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).\n * The enumerable properties of `arguments` objects and objects created by\n * constructors other than `Object` are cloned to plain `Object` objects. An\n * empty object is returned for uncloneable values such as functions, DOM nodes,\n * Maps, Sets, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {Function} [customizer] The function to customize cloning values.\n * @param {*} [thisArg] The `this` binding of `customizer`.\n * @returns {*} Returns the cloned value.\n * @example\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * var shallow = _.clone(users);\n * shallow[0] === users[0];\n * // => true\n *\n * var deep = _.clone(users, true);\n * deep[0] === users[0];\n * // => false\n *\n * // using a customizer callback\n * var el = _.clone(document.body, function(value) {\n *   if (_.isElement(value)) {\n *     return value.cloneNode(false);\n *   }\n * });\n *\n * el === document.body\n * // => false\n * el.nodeName\n * // => BODY\n * el.childNodes.length;\n * // => 0\n */\nfunction clone(value, isDeep, customizer, thisArg) {\n  if (isDeep && typeof isDeep != 'boolean' && isIterateeCall(value, isDeep, customizer)) {\n    isDeep = false;\n  }\n  else if (typeof isDeep == 'function') {\n    thisArg = customizer;\n    customizer = isDeep;\n    isDeep = false;\n  }\n  return typeof customizer == 'function'\n    ? baseClone(value, isDeep, bindCallback(customizer, thisArg, 3))\n    : baseClone(value, isDeep);\n}\n\nmodule.exports = clone;\n\n},{\"../internal/baseClone\":14,\"../internal/bindCallback\":33,\"../internal/isIterateeCall\":50}],59:[function(require,module,exports){\nvar baseClone = require('../internal/baseClone'),\n    bindCallback = require('../internal/bindCallback');\n\n/**\n * Creates a deep clone of `value`. If `customizer` is provided it's invoked\n * to produce the cloned values. If `customizer` returns `undefined` cloning\n * is handled by the method instead. The `customizer` is bound to `thisArg`\n * and invoked with up to three argument; (value [, index|key, object]).\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).\n * The enumerable properties of `arguments` objects and objects created by\n * constructors other than `Object` are cloned to plain `Object` objects. An\n * empty object is returned for uncloneable values such as functions, DOM nodes,\n * Maps, Sets, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to deep clone.\n * @param {Function} [customizer] The function to customize cloning values.\n * @param {*} [thisArg] The `this` binding of `customizer`.\n * @returns {*} Returns the deep cloned value.\n * @example\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * var deep = _.cloneDeep(users);\n * deep[0] === users[0];\n * // => false\n *\n * // using a customizer callback\n * var el = _.cloneDeep(document.body, function(value) {\n *   if (_.isElement(value)) {\n *     return value.cloneNode(true);\n *   }\n * });\n *\n * el === document.body\n * // => false\n * el.nodeName\n * // => BODY\n * el.childNodes.length;\n * // => 20\n */\nfunction cloneDeep(value, customizer, thisArg) {\n  return typeof customizer == 'function'\n    ? baseClone(value, true, bindCallback(customizer, thisArg, 3))\n    : baseClone(value, true);\n}\n\nmodule.exports = cloneDeep;\n\n},{\"../internal/baseClone\":14,\"../internal/bindCallback\":33}],60:[function(require,module,exports){\nvar isArrayLike = require('../internal/isArrayLike'),\n    isObjectLike = require('../internal/isObjectLike');\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Native method references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is classified as an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  return isObjectLike(value) && isArrayLike(value) &&\n    hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');\n}\n\nmodule.exports = isArguments;\n\n},{\"../internal/isArrayLike\":48,\"../internal/isObjectLike\":53}],61:[function(require,module,exports){\nvar getNative = require('../internal/getNative'),\n    isLength = require('../internal/isLength'),\n    isObjectLike = require('../internal/isObjectLike');\n\n/** `Object#toString` result references. */\nvar arrayTag = '[object Array]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeIsArray = getNative(Array, 'isArray');\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(function() { return arguments; }());\n * // => false\n */\nvar isArray = nativeIsArray || function(value) {\n  return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;\n};\n\nmodule.exports = isArray;\n\n},{\"../internal/getNative\":44,\"../internal/isLength\":52,\"../internal/isObjectLike\":53}],62:[function(require,module,exports){\nvar isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in older versions of Chrome and Safari which return 'function' for regexes\n  // and Safari 8 which returns 'object' for typed array constructors.\n  return isObject(value) && objToString.call(value) == funcTag;\n}\n\nmodule.exports = isFunction;\n\n},{\"./isObject\":64}],63:[function(require,module,exports){\nvar isFunction = require('./isFunction'),\n    isObjectLike = require('../internal/isObjectLike');\n\n/** Used to detect host constructors (Safari > 5). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar fnToString = Function.prototype.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  fnToString.call(hasOwnProperty).replace(/[\\\\^$.*+?()[\\]{}|]/g, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * Checks if `value` is a native function.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n * @example\n *\n * _.isNative(Array.prototype.push);\n * // => true\n *\n * _.isNative(_);\n * // => false\n */\nfunction isNative(value) {\n  if (value == null) {\n    return false;\n  }\n  if (isFunction(value)) {\n    return reIsNative.test(fnToString.call(value));\n  }\n  return isObjectLike(value) && reIsHostCtor.test(value);\n}\n\nmodule.exports = isNative;\n\n},{\"../internal/isObjectLike\":53,\"./isFunction\":62}],64:[function(require,module,exports){\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(1);\n * // => false\n */\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n\n},{}],65:[function(require,module,exports){\nvar baseForIn = require('../internal/baseForIn'),\n    isArguments = require('./isArguments'),\n    isObjectLike = require('../internal/isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * **Note:** This method assumes objects created by the `Object` constructor\n * have no inherited enumerable properties.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  var Ctor;\n\n  // Exit early for non `Object` objects.\n  if (!(isObjectLike(value) && objToString.call(value) == objectTag && !isArguments(value)) ||\n      (!hasOwnProperty.call(value, 'constructor') && (Ctor = value.constructor, typeof Ctor == 'function' && !(Ctor instanceof Ctor)))) {\n    return false;\n  }\n  // IE < 9 iterates inherited properties before own properties. If the first\n  // iterated property is an object's own property then there are no inherited\n  // enumerable properties.\n  var result;\n  // In most environments an object's own properties are iterated before\n  // its inherited properties. If the last iterated property is an object's\n  // own property then there are no inherited enumerable properties.\n  baseForIn(value, function(subValue, key) {\n    result = key;\n  });\n  return result === undefined || hasOwnProperty.call(value, result);\n}\n\nmodule.exports = isPlainObject;\n\n},{\"../internal/baseForIn\":18,\"../internal/isObjectLike\":53,\"./isArguments\":60}],66:[function(require,module,exports){\nvar isLength = require('../internal/isLength'),\n    isObjectLike = require('../internal/isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dateTag] = typedArrayTags[errorTag] =\ntypedArrayTags[funcTag] = typedArrayTags[mapTag] =\ntypedArrayTags[numberTag] = typedArrayTags[objectTag] =\ntypedArrayTags[regexpTag] = typedArrayTags[setTag] =\ntypedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nfunction isTypedArray(value) {\n  return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objToString.call(value)];\n}\n\nmodule.exports = isTypedArray;\n\n},{\"../internal/isLength\":52,\"../internal/isObjectLike\":53}],67:[function(require,module,exports){\nvar baseCopy = require('../internal/baseCopy'),\n    keysIn = require('../object/keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable\n * properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return baseCopy(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n\n},{\"../internal/baseCopy\":15,\"../object/keysIn\":69}],68:[function(require,module,exports){\nvar getNative = require('../internal/getNative'),\n    isArrayLike = require('../internal/isArrayLike'),\n    isObject = require('../lang/isObject'),\n    shimKeys = require('../internal/shimKeys');\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = getNative(Object, 'keys');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nvar keys = !nativeKeys ? shimKeys : function(object) {\n  var Ctor = object == null ? undefined : object.constructor;\n  if ((typeof Ctor == 'function' && Ctor.prototype === object) ||\n      (typeof object != 'function' && isArrayLike(object))) {\n    return shimKeys(object);\n  }\n  return isObject(object) ? nativeKeys(object) : [];\n};\n\nmodule.exports = keys;\n\n},{\"../internal/getNative\":44,\"../internal/isArrayLike\":48,\"../internal/shimKeys\":55,\"../lang/isObject\":64}],69:[function(require,module,exports){\nvar isArguments = require('../lang/isArguments'),\n    isArray = require('../lang/isArray'),\n    isIndex = require('../internal/isIndex'),\n    isLength = require('../internal/isLength'),\n    isObject = require('../lang/isObject');\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  if (object == null) {\n    return [];\n  }\n  if (!isObject(object)) {\n    object = Object(object);\n  }\n  var length = object.length;\n  length = (length && isLength(length) &&\n    (isArray(object) || isArguments(object)) && length) || 0;\n\n  var Ctor = object.constructor,\n      index = -1,\n      isProto = typeof Ctor == 'function' && Ctor.prototype === object,\n      result = Array(length),\n      skipIndexes = length > 0;\n\n  while (++index < length) {\n    result[index] = (index + '');\n  }\n  for (var key in object) {\n    if (!(skipIndexes && isIndex(key, length)) &&\n        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keysIn;\n\n},{\"../internal/isIndex\":49,\"../internal/isLength\":52,\"../lang/isArguments\":60,\"../lang/isArray\":61,\"../lang/isObject\":64}],70:[function(require,module,exports){\nvar baseMerge = require('../internal/baseMerge'),\n    createAssigner = require('../internal/createAssigner');\n\n/**\n * Recursively merges own enumerable properties of the source object(s), that\n * don't resolve to `undefined` into the destination object. Subsequent sources\n * overwrite property assignments of previous sources. If `customizer` is\n * provided it's invoked to produce the merged values of the destination and\n * source properties. If `customizer` returns `undefined` merging is handled\n * by the method instead. The `customizer` is bound to `thisArg` and invoked\n * with five arguments: (objectValue, sourceValue, key, object, source).\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {*} [thisArg] The `this` binding of `customizer`.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var users = {\n *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]\n * };\n *\n * var ages = {\n *   'data': [{ 'age': 36 }, { 'age': 40 }]\n * };\n *\n * _.merge(users, ages);\n * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }\n *\n * // using a customizer callback\n * var object = {\n *   'fruits': ['apple'],\n *   'vegetables': ['beet']\n * };\n *\n * var other = {\n *   'fruits': ['banana'],\n *   'vegetables': ['carrot']\n * };\n *\n * _.merge(object, other, function(a, b) {\n *   if (_.isArray(a)) {\n *     return a.concat(b);\n *   }\n * });\n * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot'] }\n */\nvar merge = createAssigner(baseMerge);\n\nmodule.exports = merge;\n\n},{\"../internal/baseMerge\":27,\"../internal/createAssigner\":35}],71:[function(require,module,exports){\nvar keys = require('./keys'),\n    toObject = require('../internal/toObject');\n\n/**\n * Creates a two dimensional array of the key-value pairs for `object`,\n * e.g. `[[key1, value1], [key2, value2]]`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the new array of key-value pairs.\n * @example\n *\n * _.pairs({ 'barney': 36, 'fred': 40 });\n * // => [['barney', 36], ['fred', 40]] (iteration order is not guaranteed)\n */\nfunction pairs(object) {\n  object = toObject(object);\n\n  var index = -1,\n      props = keys(object),\n      length = props.length,\n      result = Array(length);\n\n  while (++index < length) {\n    var key = props[index];\n    result[index] = [key, object[key]];\n  }\n  return result;\n}\n\nmodule.exports = pairs;\n\n},{\"../internal/toObject\":56,\"./keys\":68}],72:[function(require,module,exports){\n/**\n * This method returns the first argument provided to it.\n *\n * @static\n * @memberOf _\n * @category Utility\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'user': 'fred' };\n *\n * _.identity(object) === object;\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n\n},{}],73:[function(require,module,exports){\nvar baseProperty = require('../internal/baseProperty'),\n    basePropertyDeep = require('../internal/basePropertyDeep'),\n    isKey = require('../internal/isKey');\n\n/**\n * Creates a function that returns the property value at `path` on a\n * given object.\n *\n * @static\n * @memberOf _\n * @category Utility\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': { 'c': 2 } } },\n *   { 'a': { 'b': { 'c': 1 } } }\n * ];\n *\n * _.map(objects, _.property('a.b.c'));\n * // => [2, 1]\n *\n * _.pluck(_.sortBy(objects, _.property(['a', 'b', 'c'])), 'a.b.c');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(path) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n\n},{\"../internal/baseProperty\":29,\"../internal/basePropertyDeep\":30,\"../internal/isKey\":51}],74:[function(require,module,exports){\n'use strict';\n\nmodule.exports = AlgoliaSearch;\n\nvar errors = require('./errors');\n\n// We will always put the API KEY in the JSON body in case of too long API KEY\nvar MAX_API_KEY_LENGTH = 500;\n\n/*\n * Algolia Search library initialization\n * https://www.algolia.com/\n *\n * @param {string} applicationID - Your applicationID, found in your dashboard\n * @param {string} apiKey - Your API key, found in your dashboard\n * @param {Object} [opts]\n * @param {number} [opts.timeout=2000] - The request timeout set in milliseconds,\n * another request will be issued after this timeout\n * @param {string} [opts.protocol='http:'] - The protocol used to query Algolia Search API.\n *                                        Set to 'https:' to force using https.\n *                                        Default to document.location.protocol in browsers\n * @param {Object|Array} [opts.hosts={\n *           read: [this.applicationID + '-dsn.algolia.net'].concat([\n *             this.applicationID + '-1.algolianet.com',\n *             this.applicationID + '-2.algolianet.com',\n *             this.applicationID + '-3.algolianet.com']\n *           ]),\n *           write: [this.applicationID + '.algolia.net'].concat([\n *             this.applicationID + '-1.algolianet.com',\n *             this.applicationID + '-2.algolianet.com',\n *             this.applicationID + '-3.algolianet.com']\n *           ]) - The hosts to use for Algolia Search API.\n *           If you provide them, you will less benefit from our HA implementation\n */\nfunction AlgoliaSearch(applicationID, apiKey, opts) {\n  var debug = require('debug')('algoliasearch');\n\n  var clone = require('lodash/lang/clone');\n  var isArray = require('lodash/lang/isArray');\n  var map = require('lodash/collection/map');\n\n  var usage = 'Usage: algoliasearch(applicationID, apiKey, opts)';\n\n  if (!applicationID) {\n    throw new errors.AlgoliaSearchError('Please provide an application ID. ' + usage);\n  }\n\n  if (!apiKey) {\n    throw new errors.AlgoliaSearchError('Please provide an API key. ' + usage);\n  }\n\n  this.applicationID = applicationID;\n  this.apiKey = apiKey;\n\n  var defaultHosts = [\n    this.applicationID + '-1.algolianet.com',\n    this.applicationID + '-2.algolianet.com',\n    this.applicationID + '-3.algolianet.com'\n  ];\n  this.hosts = {\n    read: [],\n    write: []\n  };\n\n  this.hostIndex = {\n    read: 0,\n    write: 0\n  };\n\n  opts = opts || {};\n\n  var protocol = opts.protocol || 'https:';\n  var timeout = opts.timeout === undefined ? 2000 : opts.timeout;\n\n  // while we advocate for colon-at-the-end values: 'http:' for `opts.protocol`\n  // we also accept `http` and `https`. It's a common error.\n  if (!/:$/.test(protocol)) {\n    protocol = protocol + ':';\n  }\n\n  if (opts.protocol !== 'http:' && opts.protocol !== 'https:') {\n    throw new errors.AlgoliaSearchError('protocol must be `http:` or `https:` (was `' + opts.protocol + '`)');\n  }\n\n  // no hosts given, add defaults\n  if (!opts.hosts) {\n    this.hosts.read = [this.applicationID + '-dsn.algolia.net'].concat(defaultHosts);\n    this.hosts.write = [this.applicationID + '.algolia.net'].concat(defaultHosts);\n  } else if (isArray(opts.hosts)) {\n    this.hosts.read = clone(opts.hosts);\n    this.hosts.write = clone(opts.hosts);\n  } else {\n    this.hosts.read = clone(opts.hosts.read);\n    this.hosts.write = clone(opts.hosts.write);\n  }\n\n  // add protocol and lowercase hosts\n  this.hosts.read = map(this.hosts.read, prepareHost(protocol));\n  this.hosts.write = map(this.hosts.write, prepareHost(protocol));\n  this.requestTimeout = timeout;\n\n  this.extraHeaders = [];\n\n  // In some situations you might want to warm the cache\n  this.cache = opts._cache || {};\n\n  this._ua = opts._ua;\n  this._useCache = opts._useCache === undefined || opts._cache ? true : opts._useCache;\n  this._useFallback = opts.useFallback === undefined ? true : opts.useFallback;\n\n  this._setTimeout = opts._setTimeout;\n\n  debug('init done, %j', this);\n}\n\nAlgoliaSearch.prototype = {\n  /*\n   * Delete an index\n   *\n   * @param indexName the name of index to delete\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer that contains the task ID\n   */\n  deleteIndex: function(indexName, callback) {\n    return this._jsonRequest({\n      method: 'DELETE',\n      url: '/1/indexes/' + encodeURIComponent(indexName),\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /**\n   * Move an existing index.\n   * @param srcIndexName the name of index to copy.\n   * @param dstIndexName the new index name that will contains a copy of\n   * srcIndexName (destination will be overriten if it already exist).\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer that contains the task ID\n   */\n  moveIndex: function(srcIndexName, dstIndexName, callback) {\n    var postObj = {\n      operation: 'move', destination: dstIndexName\n    };\n    return this._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(srcIndexName) + '/operation',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /**\n   * Copy an existing index.\n   * @param srcIndexName the name of index to copy.\n   * @param dstIndexName the new index name that will contains a copy\n   * of srcIndexName (destination will be overriten if it already exist).\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer that contains the task ID\n   */\n  copyIndex: function(srcIndexName, dstIndexName, callback) {\n    var postObj = {\n      operation: 'copy', destination: dstIndexName\n    };\n    return this._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(srcIndexName) + '/operation',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /**\n   * Return last log entries.\n   * @param offset Specify the first entry to retrieve (0-based, 0 is the most recent log entry).\n   * @param length Specify the maximum number of entries to retrieve starting\n   * at offset. Maximum allowed value: 1000.\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer that contains the task ID\n   */\n  getLogs: function(offset, length, callback) {\n    if (arguments.length === 0 || typeof offset === 'function') {\n      // getLogs([cb])\n      callback = offset;\n      offset = 0;\n      length = 10;\n    } else if (arguments.length === 1 || typeof length === 'function') {\n      // getLogs(1, [cb)]\n      callback = length;\n      length = 10;\n    }\n\n    return this._jsonRequest({\n      method: 'GET',\n      url: '/1/logs?offset=' + offset + '&length=' + length,\n      hostType: 'read',\n      callback: callback\n    });\n  },\n  /*\n   * List all existing indexes (paginated)\n   *\n   * @param page The page to retrieve, starting at 0.\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with index list\n   */\n  listIndexes: function(page, callback) {\n    var params = '';\n\n    if (page === undefined || typeof page === 'function') {\n      callback = page;\n    } else {\n      params = '?page=' + page;\n    }\n\n    return this._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes' + params,\n      hostType: 'read',\n      callback: callback\n    });\n  },\n\n  /*\n   * Get the index object initialized\n   *\n   * @param indexName the name of index\n   * @param callback the result callback with one argument (the Index instance)\n   */\n  initIndex: function(indexName) {\n    return new this.Index(this, indexName);\n  },\n  /*\n   * List all existing user keys with their associated ACLs\n   *\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with user keys list\n   */\n  listUserKeys: function(callback) {\n    return this._jsonRequest({\n      method: 'GET',\n      url: '/1/keys',\n      hostType: 'read',\n      callback: callback\n    });\n  },\n  /*\n   * Get ACL of a user key\n   *\n   * @param key\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with user keys list\n   */\n  getUserKeyACL: function(key, callback) {\n    return this._jsonRequest({\n      method: 'GET',\n      url: '/1/keys/' + key,\n      hostType: 'read',\n      callback: callback\n    });\n  },\n  /*\n   * Delete an existing user key\n   * @param key\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with user keys list\n   */\n  deleteUserKey: function(key, callback) {\n    return this._jsonRequest({\n      method: 'DELETE',\n      url: '/1/keys/' + key,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Add a new global API key\n   *\n   * @param {string[]} acls - The list of ACL for this key. Defined by an array of strings that\n   *   can contains the following values:\n   *     - search: allow to search (https and http)\n   *     - addObject: allows to add/update an object in the index (https only)\n   *     - deleteObject : allows to delete an existing object (https only)\n   *     - deleteIndex : allows to delete index content (https only)\n   *     - settings : allows to get index settings (https only)\n   *     - editSettings : allows to change index settings (https only)\n   * @param {Object} [params] - Optionnal parameters to set for the key\n   * @param {number} params.validity - Number of seconds after which the key will be automatically removed (0 means no time limit for this key)\n   * @param {number} params.maxQueriesPerIPPerHour - Number of API calls allowed from an IP address per hour\n   * @param {number} params.maxHitsPerQuery - Number of hits this API key can retrieve in one call\n   * @param {string[]} params.indexes - Allowed targeted indexes for this key\n   * @param {string} params.description - A description for your key\n   * @param {string[]} params.referers - A list of authorized referers\n   * @param {Object} params.queryParameters - Force the key to use specific query parameters\n   * @param {Function} callback - The result callback called with two arguments\n   *   error: null or Error('message')\n   *   content: the server answer with user keys list\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * client.addUserKey(['search'], {\n   *   validity: 300,\n   *   maxQueriesPerIPPerHour: 2000,\n   *   maxHitsPerQuery: 3,\n   *   indexes: ['fruits'],\n   *   description: 'Eat three fruits',\n   *   referers: ['*.algolia.com'],\n   *   queryParameters: {\n   *     tagFilters: ['public'],\n   *   }\n   * })\n   * @see {@link https://www.algolia.com/doc/rest_api#AddKey|Algolia REST API Documentation}\n   */\n  addUserKey: function(acls, params, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: client.addUserKey(arrayOfAcls[, params, callback])';\n\n    if (!isArray(acls)) {\n      throw new Error(usage);\n    }\n\n    if (arguments.length === 1 || typeof params === 'function') {\n      callback = params;\n      params = null;\n    }\n\n    var postObj = {\n      acl: acls\n    };\n\n    if (params) {\n      postObj.validity = params.validity;\n      postObj.maxQueriesPerIPPerHour = params.maxQueriesPerIPPerHour;\n      postObj.maxHitsPerQuery = params.maxHitsPerQuery;\n      postObj.indexes = params.indexes;\n      postObj.description = params.description;\n\n      if (params.queryParameters) {\n        postObj.queryParameters = this._getSearchParams(params.queryParameters, '');\n      }\n\n      postObj.referers = params.referers;\n    }\n\n    return this._jsonRequest({\n      method: 'POST',\n      url: '/1/keys',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /**\n   * Add a new global API key\n   * @deprecated Please use client.addUserKey()\n   */\n  addUserKeyWithValidity: deprecate(function(acls, params, callback) {\n    return this.addUserKey(acls, params, callback);\n  }, deprecatedMessage('client.addUserKeyWithValidity()', 'client.addUserKey()')),\n\n  /**\n   * Update an existing API key\n   * @param {string} key - The key to update\n   * @param {string[]} acls - The list of ACL for this key. Defined by an array of strings that\n   *   can contains the following values:\n   *     - search: allow to search (https and http)\n   *     - addObject: allows to add/update an object in the index (https only)\n   *     - deleteObject : allows to delete an existing object (https only)\n   *     - deleteIndex : allows to delete index content (https only)\n   *     - settings : allows to get index settings (https only)\n   *     - editSettings : allows to change index settings (https only)\n   * @param {Object} [params] - Optionnal parameters to set for the key\n   * @param {number} params.validity - Number of seconds after which the key will be automatically removed (0 means no time limit for this key)\n   * @param {number} params.maxQueriesPerIPPerHour - Number of API calls allowed from an IP address per hour\n   * @param {number} params.maxHitsPerQuery - Number of hits this API key can retrieve in one call\n   * @param {string[]} params.indexes - Allowed targeted indexes for this key\n   * @param {string} params.description - A description for your key\n   * @param {string[]} params.referers - A list of authorized referers\n   * @param {Object} params.queryParameters - Force the key to use specific query parameters\n   * @param {Function} callback - The result callback called with two arguments\n   *   error: null or Error('message')\n   *   content: the server answer with user keys list\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * client.updateUserKey('APIKEY', ['search'], {\n   *   validity: 300,\n   *   maxQueriesPerIPPerHour: 2000,\n   *   maxHitsPerQuery: 3,\n   *   indexes: ['fruits'],\n   *   description: 'Eat three fruits',\n   *   referers: ['*.algolia.com'],\n   *   queryParameters: {\n   *     tagFilters: ['public'],\n   *   }\n   * })\n   * @see {@link https://www.algolia.com/doc/rest_api#UpdateIndexKey|Algolia REST API Documentation}\n   */\n  updateUserKey: function(key, acls, params, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: client.updateUserKey(key, arrayOfAcls[, params, callback])';\n\n    if (!isArray(acls)) {\n      throw new Error(usage);\n    }\n\n    if (arguments.length === 2 || typeof params === 'function') {\n      callback = params;\n      params = null;\n    }\n\n    var putObj = {\n      acl: acls\n    };\n\n    if (params) {\n      putObj.validity = params.validity;\n      putObj.maxQueriesPerIPPerHour = params.maxQueriesPerIPPerHour;\n      putObj.maxHitsPerQuery = params.maxHitsPerQuery;\n      putObj.indexes = params.indexes;\n      putObj.description = params.description;\n\n      if (params.queryParameters) {\n        putObj.queryParameters = this._getSearchParams(params.queryParameters, '');\n      }\n\n      putObj.referers = params.referers;\n    }\n\n    return this._jsonRequest({\n      method: 'PUT',\n      url: '/1/keys/' + key,\n      body: putObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n\n  /**\n   * Set the extra security tagFilters header\n   * @param {string|array} tags The list of tags defining the current security filters\n   */\n  setSecurityTags: function(tags) {\n    if (Object.prototype.toString.call(tags) === '[object Array]') {\n      var strTags = [];\n      for (var i = 0; i < tags.length; ++i) {\n        if (Object.prototype.toString.call(tags[i]) === '[object Array]') {\n          var oredTags = [];\n          for (var j = 0; j < tags[i].length; ++j) {\n            oredTags.push(tags[i][j]);\n          }\n          strTags.push('(' + oredTags.join(',') + ')');\n        } else {\n          strTags.push(tags[i]);\n        }\n      }\n      tags = strTags.join(',');\n    }\n\n    this.securityTags = tags;\n  },\n\n  /**\n   * Set the extra user token header\n   * @param {string} userToken The token identifying a uniq user (used to apply rate limits)\n   */\n  setUserToken: function(userToken) {\n    this.userToken = userToken;\n  },\n\n  /**\n   * Initialize a new batch of search queries\n   * @deprecated use client.search()\n   */\n  startQueriesBatch: deprecate(function startQueriesBatchDeprecated() {\n    this._batch = [];\n  }, deprecatedMessage('client.startQueriesBatch()', 'client.search()')),\n\n  /**\n   * Add a search query in the batch\n   * @deprecated use client.search()\n   */\n  addQueryInBatch: deprecate(function addQueryInBatchDeprecated(indexName, query, args) {\n    this._batch.push({\n      indexName: indexName,\n      query: query,\n      params: args\n    });\n  }, deprecatedMessage('client.addQueryInBatch()', 'client.search()')),\n\n  /**\n   * Clear all queries in client's cache\n   * @return undefined\n   */\n  clearCache: function() {\n    this.cache = {};\n  },\n\n  /**\n   * Launch the batch of queries using XMLHttpRequest.\n   * @deprecated use client.search()\n   */\n  sendQueriesBatch: deprecate(function sendQueriesBatchDeprecated(callback) {\n    return this.search(this._batch, callback);\n  }, deprecatedMessage('client.sendQueriesBatch()', 'client.search()')),\n\n  /**\n  * Set the number of milliseconds a request can take before automatically being terminated.\n  *\n  * @param {Number} milliseconds\n  */\n  setRequestTimeout: function(milliseconds) {\n    if (milliseconds) {\n      this.requestTimeout = parseInt(milliseconds, 10);\n    }\n  },\n\n  /**\n   * Search through multiple indices at the same time\n   * @param  {Object[]}   queries  An array of queries you want to run.\n   * @param {string} queries[].indexName The index name you want to target\n   * @param {string} [queries[].query] The query to issue on this index. Can also be passed into `params`\n   * @param {Object} queries[].params Any search param like hitsPerPage, ..\n   * @param  {Function} callback Callback to be called\n   * @return {Promise|undefined} Returns a promise if no callback given\n   */\n  search: function(queries, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var map = require('lodash/collection/map');\n\n    var usage = 'Usage: client.search(arrayOfQueries[, callback])';\n\n    if (!isArray(queries)) {\n      throw new Error(usage);\n    }\n\n    var client = this;\n\n    var postObj = {\n      requests: map(queries, function prepareRequest(query) {\n        var params = '';\n\n        // allow query.query\n        // so we are mimicing the index.search(query, params) method\n        // {indexName:, query:, params:}\n        if (query.query !== undefined) {\n          params += 'query=' + encodeURIComponent(query.query);\n        }\n\n        return {\n          indexName: query.indexName,\n          params: client._getSearchParams(query.params, params)\n        };\n      })\n    };\n\n    var JSONPParams = map(postObj.requests, function prepareJSONPParams(request, requestId) {\n      return requestId + '=' +\n        encodeURIComponent(\n          '/1/indexes/' + encodeURIComponent(request.indexName) + '?' +\n          request.params\n        );\n    }).join('&');\n\n    return this._jsonRequest({\n      cache: this.cache,\n      method: 'POST',\n      url: '/1/indexes/*/queries',\n      body: postObj,\n      hostType: 'read',\n      fallback: {\n        method: 'GET',\n        url: '/1/indexes/*',\n        body: {\n          params: JSONPParams\n        }\n      },\n      callback: callback\n    });\n  },\n\n  /**\n   * Perform write operations accross multiple indexes.\n   *\n   * To reduce the amount of time spent on network round trips,\n   * you can create, update, or delete several objects in one call,\n   * using the batch endpoint (all operations are done in the given order).\n   *\n   * Available actions:\n   *   - addObject\n   *   - updateObject\n   *   - partialUpdateObject\n   *   - partialUpdateObjectNoCreate\n   *   - deleteObject\n   *\n   * https://www.algolia.com/doc/rest_api#Indexes\n   * @param  {Object[]} operations An array of operations to perform\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * client.batch([{\n   *   action: 'addObject',\n   *   indexName: 'clients',\n   *   body: {\n   *     name: 'Bill'\n   *   }\n   * }, {\n   *   action: 'udpateObject',\n   *   indexName: 'fruits',\n   *   body: {\n   *     objectID: '29138',\n   *     name: 'banana'\n   *   }\n   * }], cb)\n   */\n  batch: function(operations, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: client.batch(operations[, callback])';\n\n    if (!isArray(operations)) {\n      throw new Error(usage);\n    }\n\n    return this._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/*/batch',\n      body: {\n        requests: operations\n      },\n      hostType: 'write',\n      callback: callback\n    });\n  },\n\n  // environment specific methods\n  destroy: notImplemented,\n  enableRateLimitForward: notImplemented,\n  disableRateLimitForward: notImplemented,\n  useSecuredAPIKey: notImplemented,\n  disableSecuredAPIKey: notImplemented,\n  generateSecuredApiKey: notImplemented,\n  /*\n   * Index class constructor.\n   * You should not use this method directly but use initIndex() function\n   */\n  Index: function(algoliasearch, indexName) {\n    this.indexName = indexName;\n    this.as = algoliasearch;\n    this.typeAheadArgs = null;\n    this.typeAheadValueOption = null;\n\n    // make sure every index instance has it's own cache\n    this.cache = {};\n  },\n  /**\n  * Add an extra field to the HTTP request\n  *\n  * @param name the header field name\n  * @param value the header field value\n  */\n  setExtraHeader: function(name, value) {\n    this.extraHeaders.push({\n      name: name.toLowerCase(), value: value\n    });\n  },\n\n  /**\n  * Augment sent x-algolia-agent with more data, each agent part\n  * is automatically separated from the others by a semicolon;\n  *\n  * @param algoliaAgent the agent to add\n  */\n  addAlgoliaAgent: function(algoliaAgent) {\n    this._ua += ';' + algoliaAgent;\n  },\n\n  /*\n   * Wrapper that try all hosts to maximize the quality of service\n   */\n  _jsonRequest: function(initialOpts) {\n    var requestDebug = require('debug')('algoliasearch:' + initialOpts.url);\n\n    var body;\n    var cache = initialOpts.cache;\n    var client = this;\n    var tries = 0;\n    var usingFallback = false;\n    var hasFallback = client._useFallback && client._request.fallback && initialOpts.fallback;\n    var headers;\n\n    if (this.apiKey.length > MAX_API_KEY_LENGTH && initialOpts.body !== undefined && initialOpts.body.params !== undefined) {\n      initialOpts.body.apiKey = this.apiKey;\n      headers = this._computeRequestHeaders(false);\n    } else {\n      headers = this._computeRequestHeaders();\n    }\n\n    if (initialOpts.body !== undefined) {\n      body = safeJSONStringify(initialOpts.body);\n    }\n\n    requestDebug('request start');\n\n    function doRequest(requester, reqOpts) {\n      var cacheID;\n\n      if (client._useCache) {\n        cacheID = initialOpts.url;\n      }\n\n      // as we sometime use POST requests to pass parameters (like query='aa'),\n      // the cacheID must also include the body to be different between calls\n      if (client._useCache && body) {\n        cacheID += '_body_' + reqOpts.body;\n      }\n\n      // handle cache existence\n      if (client._useCache && cache && cache[cacheID] !== undefined) {\n        requestDebug('serving response from cache');\n        return client._promise.resolve(JSON.parse(cache[cacheID]));\n      }\n\n      // if we reached max tries\n      if (tries >= client.hosts[initialOpts.hostType].length) {\n        if (!hasFallback || usingFallback) {\n          requestDebug('could not get any response');\n          // then stop\n          return client._promise.reject(new errors.AlgoliaSearchError(\n            'Cannot connect to the AlgoliaSearch API.' +\n            ' Send an email to support@algolia.com to report and resolve the issue.' +\n            ' Application id was: ' + client.applicationID\n          ));\n        }\n\n        requestDebug('switching to fallback');\n\n        // let's try the fallback starting from here\n        tries = 0;\n\n        // method, url and body are fallback dependent\n        reqOpts.method = initialOpts.fallback.method;\n        reqOpts.url = initialOpts.fallback.url;\n        reqOpts.jsonBody = initialOpts.fallback.body;\n        if (reqOpts.jsonBody) {\n          reqOpts.body = safeJSONStringify(reqOpts.jsonBody);\n        }\n        // re-compute headers, they could be omitting the API KEY\n        headers = client._computeRequestHeaders();\n\n        reqOpts.timeout = client.requestTimeout * (tries + 1);\n        client.hostIndex[initialOpts.hostType] = 0;\n        usingFallback = true; // the current request is now using fallback\n        return doRequest(client._request.fallback, reqOpts);\n      }\n\n      var url = client.hosts[initialOpts.hostType][client.hostIndex[initialOpts.hostType]] + reqOpts.url;\n      var options = {\n        body: reqOpts.body,\n        jsonBody: reqOpts.jsonBody,\n        method: reqOpts.method,\n        headers: headers,\n        timeout: reqOpts.timeout,\n        debug: requestDebug\n      };\n\n      requestDebug('method: %s, url: %s, headers: %j, timeout: %d',\n        options.method, url, options.headers, options.timeout);\n\n      if (requester === client._request.fallback) {\n        requestDebug('using fallback');\n      }\n\n      // `requester` is any of this._request or this._request.fallback\n      // thus it needs to be called using the client as context\n      return requester.call(client, url, options).then(success, tryFallback);\n\n      function success(httpResponse) {\n        // compute the status of the response,\n        //\n        // When in browser mode, using XDR or JSONP, we have no statusCode available\n        // So we rely on our API response `status` property.\n        // But `waitTask` can set a `status` property which is not the statusCode (it's the task status)\n        // So we check if there's a `message` along `status` and it means it's an error\n        //\n        // That's the only case where we have a response.status that's not the http statusCode\n        var status = httpResponse && httpResponse.body && httpResponse.body.message && httpResponse.body.status ||\n\n          // this is important to check the request statusCode AFTER the body eventual\n          // statusCode because some implementations (jQuery XDomainRequest transport) may\n          // send statusCode 200 while we had an error\n          httpResponse.statusCode ||\n\n          // When in browser mode, using XDR or JSONP\n          // we default to success when no error (no response.status && response.message)\n          // If there was a JSON.parse() error then body is null and it fails\n          httpResponse && httpResponse.body && 200;\n\n        requestDebug('received response: statusCode: %s, computed statusCode: %d, headers: %j',\n          httpResponse.statusCode, status, httpResponse.headers);\n\n        var ok = status === 200 || status === 201;\n        var retry = !ok && Math.floor(status / 100) !== 4 && Math.floor(status / 100) !== 1;\n\n        if (client._useCache && ok && cache) {\n          cache[cacheID] = httpResponse.responseText;\n        }\n\n        if (ok) {\n          return httpResponse.body;\n        }\n\n        if (retry) {\n          tries += 1;\n          return retryRequest();\n        }\n\n        var unrecoverableError = new errors.AlgoliaSearchError(\n          httpResponse.body && httpResponse.body.message\n        );\n\n        return client._promise.reject(unrecoverableError);\n      }\n\n      function tryFallback(err) {\n        // error cases:\n        //  While not in fallback mode:\n        //    - CORS not supported\n        //    - network error\n        //  While in fallback mode:\n        //    - timeout\n        //    - network error\n        //    - badly formatted JSONP (script loaded, did not call our callback)\n        //  In both cases:\n        //    - uncaught exception occurs (TypeError)\n        requestDebug('error: %s, stack: %s', err.message, err.stack);\n\n        if (!(err instanceof errors.AlgoliaSearchError)) {\n          err = new errors.Unknown(err && err.message, err);\n        }\n\n        tries += 1;\n\n        // stop the request implementation when:\n        if (\n          // we did not generate this error,\n          // it comes from a throw in some other piece of code\n          err instanceof errors.Unknown ||\n\n          // server sent unparsable JSON\n          err instanceof errors.UnparsableJSON ||\n\n          // max tries and already using fallback or no fallback\n          tries >= client.hosts[initialOpts.hostType].length &&\n          (usingFallback || !hasFallback)) {\n          // stop request implementation for this command\n          return client._promise.reject(err);\n        }\n\n        client.hostIndex[initialOpts.hostType] = ++client.hostIndex[initialOpts.hostType] % client.hosts[initialOpts.hostType].length;\n\n        if (err instanceof errors.RequestTimeout) {\n          return retryRequest();\n        } else if (!usingFallback) {\n          // next request loop, force using fallback for this request\n          tries = Infinity;\n        }\n\n        return doRequest(requester, reqOpts);\n      }\n\n      function retryRequest() {\n        client.hostIndex[initialOpts.hostType] = ++client.hostIndex[initialOpts.hostType] % client.hosts[initialOpts.hostType].length;\n        reqOpts.timeout = client.requestTimeout * (tries + 1);\n        return doRequest(requester, reqOpts);\n      }\n    }\n\n    var promise = doRequest(\n      client._request, {\n        url: initialOpts.url,\n        method: initialOpts.method,\n        body: body,\n        jsonBody: initialOpts.body,\n        timeout: client.requestTimeout * (tries + 1)\n      }\n    );\n\n    // either we have a callback\n    // either we are using promises\n    if (initialOpts.callback) {\n      promise.then(function okCb(content) {\n        exitPromise(function() {\n          initialOpts.callback(null, content);\n        }, client._setTimeout || setTimeout);\n      }, function nookCb(err) {\n        exitPromise(function() {\n          initialOpts.callback(err);\n        }, client._setTimeout || setTimeout);\n      });\n    } else {\n      return promise;\n    }\n  },\n\n  /*\n  * Transform search param object in query string\n  */\n  _getSearchParams: function(args, params) {\n    if (args === undefined || args === null) {\n      return params;\n    }\n    for (var key in args) {\n      if (key !== null && args[key] !== undefined && args.hasOwnProperty(key)) {\n        params += params === '' ? '' : '&';\n        params += key + '=' + encodeURIComponent(Object.prototype.toString.call(args[key]) === '[object Array]' ? safeJSONStringify(args[key]) : args[key]);\n      }\n    }\n    return params;\n  },\n\n  _computeRequestHeaders: function(withAPIKey) {\n    var forEach = require('lodash/collection/forEach');\n\n    var requestHeaders = {\n      'x-algolia-agent': this._ua,\n      'x-algolia-application-id': this.applicationID\n    };\n\n    // browser will inline headers in the url, node.js will use http headers\n    // but in some situations, the API KEY will be too long (big secured API keys)\n    // so if the request is a POST and the KEY is very long, we will be asked to not put\n    // it into headers but in the JSON body\n    if (withAPIKey !== false) {\n      requestHeaders['x-algolia-api-key'] = this.apiKey;\n    }\n\n    if (this.userToken) {\n      requestHeaders['x-algolia-usertoken'] = this.userToken;\n    }\n\n    if (this.securityTags) {\n      requestHeaders['x-algolia-tagfilters'] = this.securityTags;\n    }\n\n    if (this.extraHeaders) {\n      forEach(this.extraHeaders, function addToRequestHeaders(header) {\n        requestHeaders[header.name] = header.value;\n      });\n    }\n\n    return requestHeaders;\n  }\n};\n\n/*\n * Contains all the functions related to one index\n * You should use AlgoliaSearch.initIndex(indexName) to retrieve this object\n */\nAlgoliaSearch.prototype.Index.prototype = {\n  /*\n   * Clear all queries in cache\n   */\n  clearCache: function() {\n    this.cache = {};\n  },\n  /*\n   * Add an object in this index\n   *\n   * @param content contains the javascript object to add inside the index\n   * @param objectID (optional) an objectID you want to attribute to this object\n   * (if the attribute already exist the old object will be overwrite)\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that contains 3 elements: createAt, taskId and objectID\n   */\n  addObject: function(content, objectID, callback) {\n    var indexObj = this;\n\n    if (arguments.length === 1 || typeof objectID === 'function') {\n      callback = objectID;\n      objectID = undefined;\n    }\n\n    return this.as._jsonRequest({\n      method: objectID !== undefined ?\n        'PUT' : // update or create\n        'POST', // create (API generates an objectID)\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + // create\n        (objectID !== undefined ? '/' + encodeURIComponent(objectID) : ''), // update or create\n      body: content,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Add several objects\n   *\n   * @param objects contains an array of objects to add\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that updateAt and taskID\n   */\n  addObjects: function(objects, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: index.addObjects(arrayOfObjects[, callback])';\n\n    if (!isArray(objects)) {\n      throw new Error(usage);\n    }\n\n    var indexObj = this;\n    var postObj = {\n      requests: []\n    };\n    for (var i = 0; i < objects.length; ++i) {\n      var request = {\n        action: 'addObject',\n        body: objects[i]\n      };\n      postObj.requests.push(request);\n    }\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/batch',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Get an object from this index\n   *\n   * @param objectID the unique identifier of the object to retrieve\n   * @param attrs (optional) if set, contains the array of attribute names to retrieve\n   * @param callback (optional) the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the object to retrieve or the error message if a failure occured\n   */\n  getObject: function(objectID, attrs, callback) {\n    var indexObj = this;\n\n    if (arguments.length === 1 || typeof attrs === 'function') {\n      callback = attrs;\n      attrs = undefined;\n    }\n\n    var params = '';\n    if (attrs !== undefined) {\n      params = '?attributes=';\n      for (var i = 0; i < attrs.length; ++i) {\n        if (i !== 0) {\n          params += ',';\n        }\n        params += attrs[i];\n      }\n    }\n\n    return this.as._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/' + encodeURIComponent(objectID) + params,\n      hostType: 'read',\n      callback: callback\n    });\n  },\n\n  /*\n   * Get several objects from this index\n   *\n   * @param objectIDs the array of unique identifier of objects to retrieve\n   */\n  getObjects: function(objectIDs, attributesToRetrieve, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var map = require('lodash/collection/map');\n\n    var usage = 'Usage: index.getObjects(arrayOfObjectIDs[, callback])';\n\n    if (!isArray(objectIDs)) {\n      throw new Error(usage);\n    }\n\n    var indexObj = this;\n\n    if (arguments.length === 1 || typeof attributesToRetrieve === 'function') {\n      callback = attributesToRetrieve;\n      attributesToRetrieve = undefined;\n    }\n\n    var body = {\n      requests: map(objectIDs, function prepareRequest(objectID) {\n        var request = {\n          indexName: indexObj.indexName,\n          objectID: objectID\n        };\n\n        if (attributesToRetrieve) {\n          request.attributesToRetrieve = attributesToRetrieve.join(',');\n        }\n\n        return request;\n      })\n    };\n\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/*/objects',\n      hostType: 'read',\n      body: body,\n      callback: callback\n    });\n  },\n\n  /*\n   * Update partially an object (only update attributes passed in argument)\n   *\n   * @param partialObject contains the javascript attributes to override, the\n   *  object must contains an objectID attribute\n   * @param createIfNotExists (optional) if false, avoid an automatic creation of the object\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that contains 3 elements: createAt, taskId and objectID\n   */\n  partialUpdateObject: function(partialObject, createIfNotExists, callback) {\n    if (arguments.length === 1 || typeof createIfNotExists === 'function') {\n      callback = createIfNotExists;\n      createIfNotExists = undefined;\n    }\n\n    var indexObj = this;\n    var url = '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/' + encodeURIComponent(partialObject.objectID) + '/partial';\n    if (createIfNotExists === false) {\n      url += '?createIfNotExists=false';\n    }\n\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: url,\n      body: partialObject,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Partially Override the content of several objects\n   *\n   * @param objects contains an array of objects to update (each object must contains a objectID attribute)\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that updateAt and taskID\n   */\n  partialUpdateObjects: function(objects, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: index.partialUpdateObjects(arrayOfObjects[, callback])';\n\n    if (!isArray(objects)) {\n      throw new Error(usage);\n    }\n\n    var indexObj = this;\n    var postObj = {\n      requests: []\n    };\n    for (var i = 0; i < objects.length; ++i) {\n      var request = {\n        action: 'partialUpdateObject',\n        objectID: objects[i].objectID,\n        body: objects[i]\n      };\n      postObj.requests.push(request);\n    }\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/batch',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Override the content of object\n   *\n   * @param object contains the javascript object to save, the object must contains an objectID attribute\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that updateAt and taskID\n   */\n  saveObject: function(object, callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'PUT',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/' + encodeURIComponent(object.objectID),\n      body: object,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Override the content of several objects\n   *\n   * @param objects contains an array of objects to update (each object must contains a objectID attribute)\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that updateAt and taskID\n   */\n  saveObjects: function(objects, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: index.saveObjects(arrayOfObjects[, callback])';\n\n    if (!isArray(objects)) {\n      throw new Error(usage);\n    }\n\n    var indexObj = this;\n    var postObj = {\n      requests: []\n    };\n    for (var i = 0; i < objects.length; ++i) {\n      var request = {\n        action: 'updateObject',\n        objectID: objects[i].objectID,\n        body: objects[i]\n      };\n      postObj.requests.push(request);\n    }\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/batch',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Delete an object from the index\n   *\n   * @param objectID the unique identifier of object to delete\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that contains 3 elements: createAt, taskId and objectID\n   */\n  deleteObject: function(objectID, callback) {\n    if (typeof objectID === 'function' || typeof objectID !== 'string' && typeof objectID !== 'number') {\n      var err = new errors.AlgoliaSearchError('Cannot delete an object without an objectID');\n      callback = objectID;\n      if (typeof callback === 'function') {\n        return callback(err);\n      }\n\n      return this.as._promise.reject(err);\n    }\n\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'DELETE',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/' + encodeURIComponent(objectID),\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Delete several objects from an index\n   *\n   * @param objectIDs contains an array of objectID to delete\n   * @param callback (optional) the result callback called with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that contains 3 elements: createAt, taskId and objectID\n   */\n  deleteObjects: function(objectIDs, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var map = require('lodash/collection/map');\n\n    var usage = 'Usage: index.deleteObjects(arrayOfObjectIDs[, callback])';\n\n    if (!isArray(objectIDs)) {\n      throw new Error(usage);\n    }\n\n    var indexObj = this;\n    var postObj = {\n      requests: map(objectIDs, function prepareRequest(objectID) {\n        return {\n          action: 'deleteObject',\n          objectID: objectID,\n          body: {\n            objectID: objectID\n          }\n        };\n      })\n    };\n\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/batch',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Delete all objects matching a query\n   *\n   * @param query the query string\n   * @param params the optional query parameters\n   * @param callback (optional) the result callback called with one argument\n   *  error: null or Error('message')\n   */\n  deleteByQuery: function(query, params, callback) {\n    var clone = require('lodash/lang/clone');\n    var map = require('lodash/collection/map');\n\n    var indexObj = this;\n    var client = indexObj.as;\n\n    if (arguments.length === 1 || typeof params === 'function') {\n      callback = params;\n      params = {};\n    } else {\n      params = clone(params);\n    }\n\n    params.attributesToRetrieve = 'objectID';\n    params.hitsPerPage = 1000;\n    params.distinct = false;\n\n    // when deleting, we should never use cache to get the\n    // search results\n    this.clearCache();\n\n    // there's a problem in how we use the promise chain,\n    // see how waitTask is done\n    var promise = this\n      .search(query, params)\n      .then(stopOrDelete);\n\n    function stopOrDelete(searchContent) {\n      // stop here\n      if (searchContent.nbHits === 0) {\n        // return indexObj.as._request.resolve();\n        return searchContent;\n      }\n\n      // continue and do a recursive call\n      var objectIDs = map(searchContent.hits, function getObjectID(object) {\n        return object.objectID;\n      });\n\n      return indexObj\n        .deleteObjects(objectIDs)\n        .then(waitTask)\n        .then(doDeleteByQuery);\n    }\n\n    function waitTask(deleteObjectsContent) {\n      return indexObj.waitTask(deleteObjectsContent.taskID);\n    }\n\n    function doDeleteByQuery() {\n      return indexObj.deleteByQuery(query, params);\n    }\n\n    if (!callback) {\n      return promise;\n    }\n\n    promise.then(success, failure);\n\n    function success() {\n      exitPromise(function exit() {\n        callback(null);\n      }, client._setTimeout || setTimeout);\n    }\n\n    function failure(err) {\n      exitPromise(function exit() {\n        callback(err);\n      }, client._setTimeout || setTimeout);\n    }\n  },\n\n  /*\n   * Search inside the index using XMLHttpRequest request (Using a POST query to\n   * minimize number of OPTIONS queries: Cross-Origin Resource Sharing).\n   *\n   * @param query the full text query\n   * @param args (optional) if set, contains an object with query parameters:\n   * - page: (integer) Pagination parameter used to select the page to retrieve.\n   *                   Page is zero-based and defaults to 0. Thus,\n   *                   to retrieve the 10th page you need to set page=9\n   * - hitsPerPage: (integer) Pagination parameter used to select the number of hits per page. Defaults to 20.\n   * - attributesToRetrieve: a string that contains the list of object attributes\n   * you want to retrieve (let you minimize the answer size).\n   *   Attributes are separated with a comma (for example \"name,address\").\n   *   You can also use an array (for example [\"name\",\"address\"]).\n   *   By default, all attributes are retrieved. You can also use '*' to retrieve all\n   *   values when an attributesToRetrieve setting is specified for your index.\n   * - attributesToHighlight: a string that contains the list of attributes you\n   *   want to highlight according to the query.\n   *   Attributes are separated by a comma. You can also use an array (for example [\"name\",\"address\"]).\n   *   If an attribute has no match for the query, the raw value is returned.\n   *   By default all indexed text attributes are highlighted.\n   *   You can use `*` if you want to highlight all textual attributes.\n   *   Numerical attributes are not highlighted.\n   *   A matchLevel is returned for each highlighted attribute and can contain:\n   *      - full: if all the query terms were found in the attribute,\n   *      - partial: if only some of the query terms were found,\n   *      - none: if none of the query terms were found.\n   * - attributesToSnippet: a string that contains the list of attributes to snippet alongside\n   * the number of words to return (syntax is `attributeName:nbWords`).\n   *    Attributes are separated by a comma (Example: attributesToSnippet=name:10,content:10).\n   *    You can also use an array (Example: attributesToSnippet: ['name:10','content:10']).\n   *    By default no snippet is computed.\n   * - minWordSizefor1Typo: the minimum number of characters in a query word to accept one typo in this word.\n   * Defaults to 3.\n   * - minWordSizefor2Typos: the minimum number of characters in a query word\n   * to accept two typos in this word. Defaults to 7.\n   * - getRankingInfo: if set to 1, the result hits will contain ranking\n   * information in _rankingInfo attribute.\n   * - aroundLatLng: search for entries around a given\n   * latitude/longitude (specified as two floats separated by a comma).\n   *   For example aroundLatLng=47.316669,5.016670).\n   *   You can specify the maximum distance in meters with the aroundRadius parameter (in meters)\n   *   and the precision for ranking with aroundPrecision\n   *   (for example if you set aroundPrecision=100, two objects that are distant of\n   *   less than 100m will be considered as identical for \"geo\" ranking parameter).\n   *   At indexing, you should specify geoloc of an object with the _geoloc attribute\n   *   (in the form {\"_geoloc\":{\"lat\":48.853409, \"lng\":2.348800}})\n   * - insideBoundingBox: search entries inside a given area defined by the two extreme points\n   * of a rectangle (defined by 4 floats: p1Lat,p1Lng,p2Lat,p2Lng).\n   *   For example insideBoundingBox=47.3165,4.9665,47.3424,5.0201).\n   *   At indexing, you should specify geoloc of an object with the _geoloc attribute\n   *   (in the form {\"_geoloc\":{\"lat\":48.853409, \"lng\":2.348800}})\n   * - numericFilters: a string that contains the list of numeric filters you want to\n   * apply separated by a comma.\n   *   The syntax of one filter is `attributeName` followed by `operand` followed by `value`.\n   *   Supported operands are `<`, `<=`, `=`, `>` and `>=`.\n   *   You can have multiple conditions on one attribute like for example numericFilters=price>100,price<1000.\n   *   You can also use an array (for example numericFilters: [\"price>100\",\"price<1000\"]).\n   * - tagFilters: filter the query by a set of tags. You can AND tags by separating them by commas.\n   *   To OR tags, you must add parentheses. For example, tags=tag1,(tag2,tag3) means tag1 AND (tag2 OR tag3).\n   *   You can also use an array, for example tagFilters: [\"tag1\",[\"tag2\",\"tag3\"]]\n   *   means tag1 AND (tag2 OR tag3).\n   *   At indexing, tags should be added in the _tags** attribute\n   *   of objects (for example {\"_tags\":[\"tag1\",\"tag2\"]}).\n   * - facetFilters: filter the query by a list of facets.\n   *   Facets are separated by commas and each facet is encoded as `attributeName:value`.\n   *   For example: `facetFilters=category:Book,author:John%20Doe`.\n   *   You can also use an array (for example `[\"category:Book\",\"author:John%20Doe\"]`).\n   * - facets: List of object attributes that you want to use for faceting.\n   *   Comma separated list: `\"category,author\"` or array `['category','author']`\n   *   Only attributes that have been added in **attributesForFaceting** index setting\n   *   can be used in this parameter.\n   *   You can also use `*` to perform faceting on all attributes specified in **attributesForFaceting**.\n   * - queryType: select how the query words are interpreted, it can be one of the following value:\n   *    - prefixAll: all query words are interpreted as prefixes,\n   *    - prefixLast: only the last word is interpreted as a prefix (default behavior),\n   *    - prefixNone: no query word is interpreted as a prefix. This option is not recommended.\n   * - optionalWords: a string that contains the list of words that should\n   * be considered as optional when found in the query.\n   *   Comma separated and array are accepted.\n   * - distinct: If set to 1, enable the distinct feature (disabled by default)\n   * if the attributeForDistinct index setting is set.\n   *   This feature is similar to the SQL \"distinct\" keyword: when enabled\n   *   in a query with the distinct=1 parameter,\n   *   all hits containing a duplicate value for the attributeForDistinct attribute are removed from results.\n   *   For example, if the chosen attribute is show_name and several hits have\n   *   the same value for show_name, then only the best\n   *   one is kept and others are removed.\n   * - restrictSearchableAttributes: List of attributes you want to use for\n   * textual search (must be a subset of the attributesToIndex index setting)\n   * either comma separated or as an array\n   * @param callback the result callback called with two arguments:\n   *  error: null or Error('message'). If false, the content contains the error.\n   *  content: the server answer that contains the list of results.\n   */\n  search: buildSearchMethod('query'),\n\n  /*\n   * -- BETA --\n   * Search a record similar to the query inside the index using XMLHttpRequest request (Using a POST query to\n   * minimize number of OPTIONS queries: Cross-Origin Resource Sharing).\n   *\n   * @param query the similar query\n   * @param args (optional) if set, contains an object with query parameters.\n   *   All search parameters are supported (see search function), restrictSearchableAttributes and facetFilters\n   *   are the two most useful to restrict the similar results and get more relevant content\n   */\n  similarSearch: buildSearchMethod('similarQuery'),\n\n  /*\n   * Browse index content. The response content will have a `cursor` property that you can use\n   * to browse subsequent pages for this query. Use `index.browseFrom(cursor)` when you want.\n   *\n   * @param {string} query - The full text query\n   * @param {Object} [queryParameters] - Any search query parameter\n   * @param {Function} [callback] - The result callback called with two arguments\n   *   error: null or Error('message')\n   *   content: the server answer with the browse result\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * index.browse('cool songs', {\n   *   tagFilters: 'public,comments',\n   *   hitsPerPage: 500\n   * }, callback);\n   * @see {@link https://www.algolia.com/doc/rest_api#Browse|Algolia REST API Documentation}\n   */\n  // pre 3.5.0 usage, backward compatible\n  // browse: function(page, hitsPerPage, callback) {\n  browse: function(query, queryParameters, callback) {\n    var merge = require('lodash/object/merge');\n\n    var indexObj = this;\n\n    var page;\n    var hitsPerPage;\n\n    // we check variadic calls that are not the one defined\n    // .browse()/.browse(fn)\n    // => page = 0\n    if (arguments.length === 0 || arguments.length === 1 && typeof arguments[0] === 'function') {\n      page = 0;\n      callback = arguments[0];\n      query = undefined;\n    } else if (typeof arguments[0] === 'number') {\n      // .browse(2)/.browse(2, 10)/.browse(2, fn)/.browse(2, 10, fn)\n      page = arguments[0];\n      if (typeof arguments[1] === 'number') {\n        hitsPerPage = arguments[1];\n      } else if (typeof arguments[1] === 'function') {\n        callback = arguments[1];\n        hitsPerPage = undefined;\n      }\n      query = undefined;\n      queryParameters = undefined;\n    } else if (typeof arguments[0] === 'object') {\n      // .browse(queryParameters)/.browse(queryParameters, cb)\n      if (typeof arguments[1] === 'function') {\n        callback = arguments[1];\n      }\n      queryParameters = arguments[0];\n      query = undefined;\n    } else if (typeof arguments[0] === 'string' && typeof arguments[1] === 'function') {\n      // .browse(query, cb)\n      callback = arguments[1];\n      queryParameters = undefined;\n    }\n\n    // otherwise it's a .browse(query)/.browse(query, queryParameters)/.browse(query, queryParameters, cb)\n\n    // get search query parameters combining various possible calls\n    // to .browse();\n    queryParameters = merge({}, queryParameters || {}, {\n      page: page,\n      hitsPerPage: hitsPerPage,\n      query: query\n    });\n\n    var params = this.as._getSearchParams(queryParameters, '');\n\n    return this.as._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/browse?' + params,\n      hostType: 'read',\n      callback: callback\n    });\n  },\n\n  /*\n   * Continue browsing from a previous position (cursor), obtained via a call to `.browse()`.\n   *\n   * @param {string} query - The full text query\n   * @param {Object} [queryParameters] - Any search query parameter\n   * @param {Function} [callback] - The result callback called with two arguments\n   *   error: null or Error('message')\n   *   content: the server answer with the browse result\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * index.browseFrom('14lkfsakl32', callback);\n   * @see {@link https://www.algolia.com/doc/rest_api#Browse|Algolia REST API Documentation}\n   */\n  browseFrom: function(cursor, callback) {\n    return this.as._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes/' + encodeURIComponent(this.indexName) + '/browse?cursor=' + encodeURIComponent(cursor),\n      hostType: 'read',\n      callback: callback\n    });\n  },\n\n  /*\n   * Browse all content from an index using events. Basically this will do\n   * .browse() -> .browseFrom -> .browseFrom -> .. until all the results are returned\n   *\n   * @param {string} query - The full text query\n   * @param {Object} [queryParameters] - Any search query parameter\n   * @return {EventEmitter}\n   * @example\n   * var browser = index.browseAll('cool songs', {\n   *   tagFilters: 'public,comments',\n   *   hitsPerPage: 500\n   * });\n   *\n   * browser.on('result', function resultCallback(content) {\n   *   console.log(content.hits);\n   * });\n   *\n   * // if any error occurs, you get it\n   * browser.on('error', function(err) {\n   *   throw err;\n   * });\n   *\n   * // when you have browsed the whole index, you get this event\n   * browser.on('end', function() {\n   *   console.log('finished');\n   * });\n   *\n   * // at any point if you want to stop the browsing process, you can stop it manually\n   * // otherwise it will go on and on\n   * browser.stop();\n   *\n   * @see {@link https://www.algolia.com/doc/rest_api#Browse|Algolia REST API Documentation}\n   */\n  browseAll: function(query, queryParameters) {\n    if (typeof query === 'object') {\n      queryParameters = query;\n      query = undefined;\n    }\n\n    var merge = require('lodash/object/merge');\n\n    var IndexBrowser = require('./IndexBrowser');\n\n    var browser = new IndexBrowser();\n    var client = this.as;\n    var index = this;\n    var params = client._getSearchParams(\n      merge({}, queryParameters || {}, {\n        query: query\n      }), ''\n    );\n\n    // start browsing\n    browseLoop();\n\n    function browseLoop(cursor) {\n      if (browser._stopped) {\n        return;\n      }\n\n      var queryString;\n\n      if (cursor !== undefined) {\n        queryString = 'cursor=' + encodeURIComponent(cursor);\n      } else {\n        queryString = params;\n      }\n\n      client._jsonRequest({\n        method: 'GET',\n        url: '/1/indexes/' + encodeURIComponent(index.indexName) + '/browse?' + queryString,\n        hostType: 'read',\n        callback: browseCallback\n      });\n    }\n\n    function browseCallback(err, content) {\n      if (browser._stopped) {\n        return;\n      }\n\n      if (err) {\n        browser._error(err);\n        return;\n      }\n\n      browser._result(content);\n\n      // no cursor means we are finished browsing\n      if (content.cursor === undefined) {\n        browser._end();\n        return;\n      }\n\n      browseLoop(content.cursor);\n    }\n\n    return browser;\n  },\n\n  /*\n   * Get a Typeahead.js adapter\n   * @param searchParams contains an object with query parameters (see search for details)\n   */\n  ttAdapter: function(params) {\n    var self = this;\n    return function ttAdapter(query, syncCb, asyncCb) {\n      var cb;\n\n      if (typeof asyncCb === 'function') {\n        // typeahead 0.11\n        cb = asyncCb;\n      } else {\n        // pre typeahead 0.11\n        cb = syncCb;\n      }\n\n      self.search(query, params, function searchDone(err, content) {\n        if (err) {\n          cb(err);\n          return;\n        }\n\n        cb(content.hits);\n      });\n    };\n  },\n\n  /*\n   * Wait the publication of a task on the server.\n   * All server task are asynchronous and you can check with this method that the task is published.\n   *\n   * @param taskID the id of the task returned by server\n   * @param callback the result callback with with two arguments:\n   *  error: null or Error('message')\n   *  content: the server answer that contains the list of results\n   */\n  waitTask: function(taskID, callback) {\n    // wait minimum 100ms before retrying\n    var baseDelay = 100;\n    // wait maximum 5s before retrying\n    var maxDelay = 5000;\n    var loop = 0;\n\n    // waitTask() must be handled differently from other methods,\n    // it's a recursive method using a timeout\n    var indexObj = this;\n    var client = indexObj.as;\n\n    var promise = retryLoop();\n\n    function retryLoop() {\n      return client._jsonRequest({\n        method: 'GET',\n        hostType: 'read',\n        url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/task/' + taskID\n      }).then(function success(content) {\n        loop++;\n        var delay = baseDelay * loop * loop;\n        if (delay > maxDelay) {\n          delay = maxDelay;\n        }\n\n        if (content.status !== 'published') {\n          return client._promise.delay(delay).then(retryLoop);\n        }\n\n        return content;\n      });\n    }\n\n    if (!callback) {\n      return promise;\n    }\n\n    promise.then(successCb, failureCb);\n\n    function successCb(content) {\n      exitPromise(function exit() {\n        callback(null, content);\n      }, client._setTimeout || setTimeout);\n    }\n\n    function failureCb(err) {\n      exitPromise(function exit() {\n        callback(err);\n      }, client._setTimeout || setTimeout);\n    }\n  },\n\n  /*\n   * This function deletes the index content. Settings and index specific API keys are kept untouched.\n   *\n   * @param callback (optional) the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the settings object or the error message if a failure occured\n   */\n  clearIndex: function(callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/clear',\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Get settings of this index\n   *\n   * @param callback (optional) the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the settings object or the error message if a failure occured\n   */\n  getSettings: function(callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/settings',\n      hostType: 'read',\n      callback: callback\n    });\n  },\n\n  /*\n   * Set settings for this index\n   *\n   * @param settigns the settings object that can contains :\n   * - minWordSizefor1Typo: (integer) the minimum number of characters to accept one typo (default = 3).\n   * - minWordSizefor2Typos: (integer) the minimum number of characters to accept two typos (default = 7).\n   * - hitsPerPage: (integer) the number of hits per page (default = 10).\n   * - attributesToRetrieve: (array of strings) default list of attributes to retrieve in objects.\n   *   If set to null, all attributes are retrieved.\n   * - attributesToHighlight: (array of strings) default list of attributes to highlight.\n   *   If set to null, all indexed attributes are highlighted.\n   * - attributesToSnippet**: (array of strings) default list of attributes to snippet alongside the number\n   * of words to return (syntax is attributeName:nbWords).\n   *   By default no snippet is computed. If set to null, no snippet is computed.\n   * - attributesToIndex: (array of strings) the list of fields you want to index.\n   *   If set to null, all textual and numerical attributes of your objects are indexed,\n   *   but you should update it to get optimal results.\n   *   This parameter has two important uses:\n   *     - Limit the attributes to index: For example if you store a binary image in base64,\n   *     you want to store it and be able to\n   *       retrieve it but you don't want to search in the base64 string.\n   *     - Control part of the ranking*: (see the ranking parameter for full explanation)\n   *     Matches in attributes at the beginning of\n   *       the list will be considered more important than matches in attributes further down the list.\n   *       In one attribute, matching text at the beginning of the attribute will be\n   *       considered more important than text after, you can disable\n   *       this behavior if you add your attribute inside `unordered(AttributeName)`,\n   *       for example attributesToIndex: [\"title\", \"unordered(text)\"].\n   * - attributesForFaceting: (array of strings) The list of fields you want to use for faceting.\n   *   All strings in the attribute selected for faceting are extracted and added as a facet.\n   *   If set to null, no attribute is used for faceting.\n   * - attributeForDistinct: (string) The attribute name used for the Distinct feature.\n   * This feature is similar to the SQL \"distinct\" keyword: when enabled\n   *   in query with the distinct=1 parameter, all hits containing a duplicate\n   *   value for this attribute are removed from results.\n   *   For example, if the chosen attribute is show_name and several hits have\n   *   the same value for show_name, then only the best one is kept and others are removed.\n   * - ranking: (array of strings) controls the way results are sorted.\n   *   We have six available criteria:\n   *    - typo: sort according to number of typos,\n   *    - geo: sort according to decreassing distance when performing a geo-location based search,\n   *    - proximity: sort according to the proximity of query words in hits,\n   *    - attribute: sort according to the order of attributes defined by attributesToIndex,\n   *    - exact:\n   *        - if the user query contains one word: sort objects having an attribute\n   *        that is exactly the query word before others.\n   *          For example if you search for the \"V\" TV show, you want to find it\n   *          with the \"V\" query and avoid to have all popular TV\n   *          show starting by the v letter before it.\n   *        - if the user query contains multiple words: sort according to the\n   *        number of words that matched exactly (and not as a prefix).\n   *    - custom: sort according to a user defined formula set in **customRanking** attribute.\n   *   The standard order is [\"typo\", \"geo\", \"proximity\", \"attribute\", \"exact\", \"custom\"]\n   * - customRanking: (array of strings) lets you specify part of the ranking.\n   *   The syntax of this condition is an array of strings containing attributes\n   *   prefixed by asc (ascending order) or desc (descending order) operator.\n   *   For example `\"customRanking\" => [\"desc(population)\", \"asc(name)\"]`\n   * - queryType: Select how the query words are interpreted, it can be one of the following value:\n   *   - prefixAll: all query words are interpreted as prefixes,\n   *   - prefixLast: only the last word is interpreted as a prefix (default behavior),\n   *   - prefixNone: no query word is interpreted as a prefix. This option is not recommended.\n   * - highlightPreTag: (string) Specify the string that is inserted before\n   * the highlighted parts in the query result (default to \"<em>\").\n   * - highlightPostTag: (string) Specify the string that is inserted after\n   * the highlighted parts in the query result (default to \"</em>\").\n   * - optionalWords: (array of strings) Specify a list of words that should\n   * be considered as optional when found in the query.\n   * @param callback (optional) the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer or the error message if a failure occured\n   */\n  setSettings: function(settings, callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'PUT',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/settings',\n      hostType: 'write',\n      body: settings,\n      callback: callback\n    });\n  },\n  /*\n   * List all existing user keys associated to this index\n   *\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with user keys list\n   */\n  listUserKeys: function(callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/keys',\n      hostType: 'read',\n      callback: callback\n    });\n  },\n  /*\n   * Get ACL of a user key associated to this index\n   *\n   * @param key\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with user keys list\n   */\n  getUserKeyACL: function(key, callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'GET',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/keys/' + key,\n      hostType: 'read',\n      callback: callback\n    });\n  },\n  /*\n   * Delete an existing user key associated to this index\n   *\n   * @param key\n   * @param callback the result callback called with two arguments\n   *  error: null or Error('message')\n   *  content: the server answer with user keys list\n   */\n  deleteUserKey: function(key, callback) {\n    var indexObj = this;\n    return this.as._jsonRequest({\n      method: 'DELETE',\n      url: '/1/indexes/' + encodeURIComponent(indexObj.indexName) + '/keys/' + key,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n  /*\n   * Add a new API key to this index\n   *\n   * @param {string[]} acls - The list of ACL for this key. Defined by an array of strings that\n   *   can contains the following values:\n   *     - search: allow to search (https and http)\n   *     - addObject: allows to add/update an object in the index (https only)\n   *     - deleteObject : allows to delete an existing object (https only)\n   *     - deleteIndex : allows to delete index content (https only)\n   *     - settings : allows to get index settings (https only)\n   *     - editSettings : allows to change index settings (https only)\n   * @param {Object} [params] - Optionnal parameters to set for the key\n   * @param {number} params.validity - Number of seconds after which the key will\n   * be automatically removed (0 means no time limit for this key)\n   * @param {number} params.maxQueriesPerIPPerHour - Number of API calls allowed from an IP address per hour\n   * @param {number} params.maxHitsPerQuery - Number of hits this API key can retrieve in one call\n   * @param {string} params.description - A description for your key\n   * @param {string[]} params.referers - A list of authorized referers\n   * @param {Object} params.queryParameters - Force the key to use specific query parameters\n   * @param {Function} callback - The result callback called with two arguments\n   *   error: null or Error('message')\n   *   content: the server answer with user keys list\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * index.addUserKey(['search'], {\n   *   validity: 300,\n   *   maxQueriesPerIPPerHour: 2000,\n   *   maxHitsPerQuery: 3,\n   *   description: 'Eat three fruits',\n   *   referers: ['*.algolia.com'],\n   *   queryParameters: {\n   *     tagFilters: ['public'],\n   *   }\n   * })\n   * @see {@link https://www.algolia.com/doc/rest_api#AddIndexKey|Algolia REST API Documentation}\n   */\n  addUserKey: function(acls, params, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: index.addUserKey(arrayOfAcls[, params, callback])';\n\n    if (!isArray(acls)) {\n      throw new Error(usage);\n    }\n\n    if (arguments.length === 1 || typeof params === 'function') {\n      callback = params;\n      params = null;\n    }\n\n    var postObj = {\n      acl: acls\n    };\n\n    if (params) {\n      postObj.validity = params.validity;\n      postObj.maxQueriesPerIPPerHour = params.maxQueriesPerIPPerHour;\n      postObj.maxHitsPerQuery = params.maxHitsPerQuery;\n      postObj.description = params.description;\n\n      if (params.queryParameters) {\n        postObj.queryParameters = this.as._getSearchParams(params.queryParameters, '');\n      }\n\n      postObj.referers = params.referers;\n    }\n\n    return this.as._jsonRequest({\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(this.indexName) + '/keys',\n      body: postObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n\n  /**\n   * Add an existing user key associated to this index\n   * @deprecated use index.addUserKey()\n   */\n  addUserKeyWithValidity: deprecate(function deprecatedAddUserKeyWithValidity(acls, params, callback) {\n    return this.addUserKey(acls, params, callback);\n  }, deprecatedMessage('index.addUserKeyWithValidity()', 'index.addUserKey()')),\n\n  /**\n   * Update an existing API key of this index\n   * @param {string} key - The key to update\n   * @param {string[]} acls - The list of ACL for this key. Defined by an array of strings that\n   *   can contains the following values:\n   *     - search: allow to search (https and http)\n   *     - addObject: allows to add/update an object in the index (https only)\n   *     - deleteObject : allows to delete an existing object (https only)\n   *     - deleteIndex : allows to delete index content (https only)\n   *     - settings : allows to get index settings (https only)\n   *     - editSettings : allows to change index settings (https only)\n   * @param {Object} [params] - Optionnal parameters to set for the key\n   * @param {number} params.validity - Number of seconds after which the key will\n   * be automatically removed (0 means no time limit for this key)\n   * @param {number} params.maxQueriesPerIPPerHour - Number of API calls allowed from an IP address per hour\n   * @param {number} params.maxHitsPerQuery - Number of hits this API key can retrieve in one call\n   * @param {string} params.description - A description for your key\n   * @param {string[]} params.referers - A list of authorized referers\n   * @param {Object} params.queryParameters - Force the key to use specific query parameters\n   * @param {Function} callback - The result callback called with two arguments\n   *   error: null or Error('message')\n   *   content: the server answer with user keys list\n   * @return {Promise|undefined} Returns a promise if no callback given\n   * @example\n   * index.updateUserKey('APIKEY', ['search'], {\n   *   validity: 300,\n   *   maxQueriesPerIPPerHour: 2000,\n   *   maxHitsPerQuery: 3,\n   *   description: 'Eat three fruits',\n   *   referers: ['*.algolia.com'],\n   *   queryParameters: {\n   *     tagFilters: ['public'],\n   *   }\n   * })\n   * @see {@link https://www.algolia.com/doc/rest_api#UpdateIndexKey|Algolia REST API Documentation}\n   */\n  updateUserKey: function(key, acls, params, callback) {\n    var isArray = require('lodash/lang/isArray');\n    var usage = 'Usage: index.updateUserKey(key, arrayOfAcls[, params, callback])';\n\n    if (!isArray(acls)) {\n      throw new Error(usage);\n    }\n\n    if (arguments.length === 2 || typeof params === 'function') {\n      callback = params;\n      params = null;\n    }\n\n    var putObj = {\n      acl: acls\n    };\n\n    if (params) {\n      putObj.validity = params.validity;\n      putObj.maxQueriesPerIPPerHour = params.maxQueriesPerIPPerHour;\n      putObj.maxHitsPerQuery = params.maxHitsPerQuery;\n      putObj.description = params.description;\n\n      if (params.queryParameters) {\n        putObj.queryParameters = this.as._getSearchParams(params.queryParameters, '');\n      }\n\n      putObj.referers = params.referers;\n    }\n\n    return this.as._jsonRequest({\n      method: 'PUT',\n      url: '/1/indexes/' + encodeURIComponent(this.indexName) + '/keys/' + key,\n      body: putObj,\n      hostType: 'write',\n      callback: callback\n    });\n  },\n\n  _search: function(params, callback) {\n    return this.as._jsonRequest({\n      cache: this.cache,\n      method: 'POST',\n      url: '/1/indexes/' + encodeURIComponent(this.indexName) + '/query',\n      body: {params: params},\n      hostType: 'read',\n      fallback: {\n        method: 'GET',\n        url: '/1/indexes/' + encodeURIComponent(this.indexName),\n        body: {params: params}\n      },\n      callback: callback\n    });\n  },\n\n  as: null,\n  indexName: null,\n  typeAheadArgs: null,\n  typeAheadValueOption: null\n};\n\nfunction prepareHost(protocol) {\n  return function prepare(host) {\n    return protocol + '//' + host.toLowerCase();\n  };\n}\n\nfunction notImplemented() {\n  var message = 'Not implemented in this environment.\\n' +\n    'If you feel this is a mistake, write to support@algolia.com';\n\n  throw new errors.AlgoliaSearchError(message);\n}\n\nfunction deprecatedMessage(previousUsage, newUsage) {\n  var githubAnchorLink = previousUsage.toLowerCase()\n    .replace('.', '')\n    .replace('()', '');\n\n  return 'algoliasearch: `' + previousUsage + '` was replaced by `' + newUsage +\n    '`. Please see https://github.com/algolia/algoliasearch-client-js/wiki/Deprecated#' + githubAnchorLink;\n}\n\n// Parse cloud does not supports setTimeout\n// We do not store a setTimeout reference in the client everytime\n// We only fallback to a fake setTimeout when not available\n// setTimeout cannot be override globally sadly\nfunction exitPromise(fn, _setTimeout) {\n  _setTimeout(fn, 0);\n}\n\nfunction deprecate(fn, message) {\n  var warned = false;\n\n  function deprecated() {\n    if (!warned) {\n      /* eslint no-console:0 */\n      console.log(message);\n      warned = true;\n    }\n\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n// Prototype.js < 1.7, a widely used library, defines a weird\n// Array.prototype.toJSON function that will fail to stringify our content\n// appropriately\n// refs:\n//   - https://groups.google.com/forum/#!topic/prototype-core/E-SAVvV_V9Q\n//   - https://github.com/sstephenson/prototype/commit/038a2985a70593c1a86c230fadbdfe2e4898a48c\n//   - http://stackoverflow.com/a/3148441/147079\nfunction safeJSONStringify(obj) {\n  /* eslint no-extend-native:0 */\n\n  if (Array.prototype.toJSON === undefined) {\n    return JSON.stringify(obj);\n  }\n\n  var toJSON = Array.prototype.toJSON;\n  delete Array.prototype.toJSON;\n  var out = JSON.stringify(obj);\n  Array.prototype.toJSON = toJSON;\n\n  return out;\n}\n\nfunction buildSearchMethod(queryParam) {\n  return function search(query, args, callback) {\n    // warn V2 users on how to search\n    if (typeof query === 'function' && typeof args === 'object' ||\n      typeof callback === 'object') {\n      // .search(query, params, cb)\n      // .search(cb, params)\n      throw new errors.AlgoliaSearchError('index.search usage is index.search(query, params, cb)');\n    }\n\n    if (arguments.length === 0 || typeof query === 'function') {\n      // .search(), .search(cb)\n      callback = query;\n      query = '';\n    } else if (arguments.length === 1 || typeof args === 'function') {\n      // .search(query/args), .search(query, cb)\n      callback = args;\n      args = undefined;\n    }\n\n    // .search(args), careful: typeof null === 'object'\n    if (typeof query === 'object' && query !== null) {\n      args = query;\n      query = undefined;\n    } else if (query === undefined || query === null) { // .search(undefined/null)\n      query = '';\n    }\n\n    var params = '';\n\n    if (query !== undefined) {\n      params += queryParam + '=' + encodeURIComponent(query);\n    }\n\n    if (args !== undefined) {\n      // `_getSearchParams` will augment params, do not be fooled by the = versus += from previous if\n      params = this.as._getSearchParams(args, params);\n    }\n\n    return this._search(params, callback);\n  };\n}\n\n},{\"./IndexBrowser\":75,\"./errors\":80,\"debug\":82,\"lodash/collection/forEach\":5,\"lodash/collection/map\":6,\"lodash/lang/clone\":58,\"lodash/lang/isArray\":61,\"lodash/object/merge\":70}],75:[function(require,module,exports){\n'use strict';\n\n// This is the object returned by the `index.browseAll()` method\n\nmodule.exports = IndexBrowser;\n\nvar inherits = require('inherits');\nvar EventEmitter = require('events').EventEmitter;\n\nfunction IndexBrowser() {\n}\n\ninherits(IndexBrowser, EventEmitter);\n\nIndexBrowser.prototype.stop = function() {\n  this._stopped = true;\n  this._clean();\n};\n\nIndexBrowser.prototype._end = function() {\n  this.emit('end');\n  this._clean();\n};\n\nIndexBrowser.prototype._error = function(err) {\n  this.emit('error', err);\n  this._clean();\n};\n\nIndexBrowser.prototype._result = function(content) {\n  this.emit('result', content);\n};\n\nIndexBrowser.prototype._clean = function() {\n  this.removeAllListeners('stop');\n  this.removeAllListeners('end');\n  this.removeAllListeners('error');\n  this.removeAllListeners('result');\n};\n\n},{\"events\":85,\"inherits\":86}],76:[function(require,module,exports){\n(function (process){\n'use strict';\n\n// This is the standalone browser build entry point\n// Browser implementation of the Algolia Search JavaScript client,\n// using XMLHttpRequest, XDomainRequest and JSONP as fallback\nmodule.exports = algoliasearch;\n\nvar inherits = require('inherits');\nvar Promise = window.Promise || require('es6-promise').Promise;\n\nvar AlgoliaSearch = require('../../AlgoliaSearch');\nvar errors = require('../../errors');\nvar inlineHeaders = require('../inline-headers');\nvar jsonpRequest = require('../jsonp-request');\n\nif (process.env.APP_ENV === 'development') {\n  require('debug').enable('algoliasearch*');\n}\n\nfunction algoliasearch(applicationID, apiKey, opts) {\n  var cloneDeep = require('lodash/lang/cloneDeep');\n\n  var getDocumentProtocol = require('../get-document-protocol');\n\n  opts = cloneDeep(opts || {});\n\n  if (opts.protocol === undefined) {\n    opts.protocol = getDocumentProtocol();\n  }\n\n  opts._ua = opts._ua || algoliasearch.ua;\n\n  return new AlgoliaSearchBrowser(applicationID, apiKey, opts);\n}\n\nalgoliasearch.version = require('../../version.js');\nalgoliasearch.ua = 'Algolia for vanilla JavaScript ' + algoliasearch.version;\n\n// we expose into window no matter how we are used, this will allow\n// us to easily debug any website running algolia\nwindow.__algolia = {\n  debug: require('debug'),\n  algoliasearch: algoliasearch\n};\n\nvar support = {\n  hasXMLHttpRequest: 'XMLHttpRequest' in window,\n  hasXDomainRequest: 'XDomainRequest' in window,\n  cors: 'withCredentials' in new XMLHttpRequest(),\n  timeout: 'timeout' in new XMLHttpRequest()\n};\n\nfunction AlgoliaSearchBrowser() {\n  // call AlgoliaSearch constructor\n  AlgoliaSearch.apply(this, arguments);\n}\n\ninherits(AlgoliaSearchBrowser, AlgoliaSearch);\n\nAlgoliaSearchBrowser.prototype._request = function request(url, opts) {\n  return new Promise(function wrapRequest(resolve, reject) {\n    // no cors or XDomainRequest, no request\n    if (!support.cors && !support.hasXDomainRequest) {\n      // very old browser, not supported\n      reject(new errors.Network('CORS not supported'));\n      return;\n    }\n\n    url = inlineHeaders(url, opts.headers);\n\n    var body = opts.body;\n    var req = support.cors ? new XMLHttpRequest() : new XDomainRequest();\n    var ontimeout;\n    var timedOut;\n\n    // do not rely on default XHR async flag, as some analytics code like hotjar\n    // breaks it and set it to false by default\n    if (req instanceof XMLHttpRequest) {\n      req.open(opts.method, url, true);\n    } else {\n      req.open(opts.method, url);\n    }\n\n    if (support.cors) {\n      if (body) {\n        if (opts.method === 'POST') {\n          // https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Simple_requests\n          req.setRequestHeader('content-type', 'application/x-www-form-urlencoded');\n        } else {\n          req.setRequestHeader('content-type', 'application/json');\n        }\n      }\n      req.setRequestHeader('accept', 'application/json');\n    }\n\n    // we set an empty onprogress listener\n    // so that XDomainRequest on IE9 is not aborted\n    // refs:\n    //  - https://github.com/algolia/algoliasearch-client-js/issues/76\n    //  - https://social.msdn.microsoft.com/Forums/ie/en-US/30ef3add-767c-4436-b8a9-f1ca19b4812e/ie9-rtm-xdomainrequest-issued-requests-may-abort-if-all-event-handlers-not-specified?forum=iewebdevelopment\n    req.onprogress = function noop() {};\n\n    req.onload = load;\n    req.onerror = error;\n\n    if (support.timeout) {\n      // .timeout supported by both XHR and XDR,\n      // we do receive timeout event, tested\n      req.timeout = opts.timeout;\n\n      req.ontimeout = timeout;\n    } else {\n      ontimeout = setTimeout(timeout, opts.timeout);\n    }\n\n    req.send(body);\n\n    // event object not received in IE8, at least\n    // but we do not use it, still important to note\n    function load(/* event */) {\n      // When browser does not supports req.timeout, we can\n      // have both a load and timeout event, since handled by a dumb setTimeout\n      if (timedOut) {\n        return;\n      }\n\n      if (!support.timeout) {\n        clearTimeout(ontimeout);\n      }\n\n      var out;\n\n      try {\n        out = {\n          body: JSON.parse(req.responseText),\n          responseText: req.responseText,\n          statusCode: req.status,\n          // XDomainRequest does not have any response headers\n          headers: req.getAllResponseHeaders && req.getAllResponseHeaders() || {}\n        };\n      } catch (e) {\n        out = new errors.UnparsableJSON({\n          more: req.responseText\n        });\n      }\n\n      if (out instanceof errors.UnparsableJSON) {\n        reject(out);\n      } else {\n        resolve(out);\n      }\n    }\n\n    function error(event) {\n      if (timedOut) {\n        return;\n      }\n\n      if (!support.timeout) {\n        clearTimeout(ontimeout);\n      }\n\n      // error event is trigerred both with XDR/XHR on:\n      //   - DNS error\n      //   - unallowed cross domain request\n      reject(\n        new errors.Network({\n          more: event\n        })\n      );\n    }\n\n    function timeout() {\n      if (!support.timeout) {\n        timedOut = true;\n        req.abort();\n      }\n\n      reject(new errors.RequestTimeout());\n    }\n  });\n};\n\nAlgoliaSearchBrowser.prototype._request.fallback = function requestFallback(url, opts) {\n  url = inlineHeaders(url, opts.headers);\n\n  return new Promise(function wrapJsonpRequest(resolve, reject) {\n    jsonpRequest(url, opts, function jsonpRequestDone(err, content) {\n      if (err) {\n        reject(err);\n        return;\n      }\n\n      resolve(content);\n    });\n  });\n};\n\nAlgoliaSearchBrowser.prototype._promise = {\n  reject: function rejectPromise(val) {\n    return Promise.reject(val);\n  },\n  resolve: function resolvePromise(val) {\n    return Promise.resolve(val);\n  },\n  delay: function delayPromise(ms) {\n    return new Promise(function resolveOnTimeout(resolve/* , reject*/) {\n      setTimeout(resolve, ms);\n    });\n  }\n};\n\n}).call(this,require('_process'))\n},{\"../../AlgoliaSearch\":74,\"../../errors\":80,\"../../version.js\":81,\"../get-document-protocol\":77,\"../inline-headers\":78,\"../jsonp-request\":79,\"_process\":88,\"debug\":82,\"es6-promise\":84,\"inherits\":86,\"lodash/lang/cloneDeep\":59}],77:[function(require,module,exports){\n'use strict';\n\nmodule.exports = getDocumentProtocol;\n\nfunction getDocumentProtocol() {\n  var protocol = window.document.location.protocol;\n\n  // when in `file:` mode (local html file), default to `http:`\n  if (protocol !== 'http:' && protocol !== 'https:') {\n    protocol = 'http:';\n  }\n\n  return protocol;\n}\n\n},{}],78:[function(require,module,exports){\n'use strict';\n\nmodule.exports = inlineHeaders;\n\nvar querystring = require('querystring');\n\nfunction inlineHeaders(url, headers) {\n  if (/\\?/.test(url)) {\n    url += '&';\n  } else {\n    url += '?';\n  }\n\n  return url + querystring.encode(headers);\n}\n\n},{\"querystring\":91}],79:[function(require,module,exports){\n'use strict';\n\nmodule.exports = jsonpRequest;\n\nvar errors = require('../errors');\n\nvar JSONPCounter = 0;\n\nfunction jsonpRequest(url, opts, cb) {\n  if (opts.method !== 'GET') {\n    cb(new Error('Method ' + opts.method + ' ' + url + ' is not supported by JSONP.'));\n    return;\n  }\n\n  opts.debug('JSONP: start');\n\n  var cbCalled = false;\n  var timedOut = false;\n\n  JSONPCounter += 1;\n  var head = document.getElementsByTagName('head')[0];\n  var script = document.createElement('script');\n  var cbName = 'algoliaJSONP_' + JSONPCounter;\n  var done = false;\n\n  window[cbName] = function(data) {\n    try {\n      delete window[cbName];\n    } catch (e) {\n      window[cbName] = undefined;\n    }\n\n    if (timedOut) {\n      return;\n    }\n\n    cbCalled = true;\n\n    clean();\n\n    cb(null, {\n      body: data/* ,\n      // We do not send the statusCode, there's no statusCode in JSONP, it will be\n      // computed using data.status && data.message like with XDR\n      statusCode*/\n    });\n  };\n\n  // add callback by hand\n  url += '&callback=' + cbName;\n\n  // add body params manually\n  if (opts.jsonBody && opts.jsonBody.params) {\n    url += '&' + opts.jsonBody.params;\n  }\n\n  var ontimeout = setTimeout(timeout, opts.timeout);\n\n  // script onreadystatechange needed only for\n  // <= IE8\n  // https://github.com/angular/angular.js/issues/4523\n  script.onreadystatechange = readystatechange;\n  script.onload = success;\n  script.onerror = error;\n\n  script.async = true;\n  script.defer = true;\n  script.src = url;\n  head.appendChild(script);\n\n  function success() {\n    opts.debug('JSONP: success');\n\n    if (done || timedOut) {\n      return;\n    }\n\n    done = true;\n\n    // script loaded but did not call the fn => script loading error\n    if (!cbCalled) {\n      opts.debug('JSONP: Fail. Script loaded but did not call the callback');\n      clean();\n      cb(new errors.JSONPScriptFail());\n    }\n  }\n\n  function readystatechange() {\n    if (this.readyState === 'loaded' || this.readyState === 'complete') {\n      success();\n    }\n  }\n\n  function clean() {\n    clearTimeout(ontimeout);\n    script.onload = null;\n    script.onreadystatechange = null;\n    script.onerror = null;\n    head.removeChild(script);\n\n    try {\n      delete window[cbName];\n      delete window[cbName + '_loaded'];\n    } catch (e) {\n      window[cbName] = null;\n      window[cbName + '_loaded'] = null;\n    }\n  }\n\n  function timeout() {\n    opts.debug('JSONP: Script timeout');\n\n    timedOut = true;\n    clean();\n    cb(new errors.RequestTimeout());\n  }\n\n  function error() {\n    opts.debug('JSONP: Script error');\n\n    if (done || timedOut) {\n      return;\n    }\n\n    clean();\n    cb(new errors.JSONPScriptError());\n  }\n}\n\n},{\"../errors\":80}],80:[function(require,module,exports){\n'use strict';\n\n// This file hosts our error definitions\n// We use custom error \"types\" so that we can act on them when we need it\n// e.g.: if error instanceof errors.UnparsableJSON then..\n\nvar inherits = require('inherits');\n\nfunction AlgoliaSearchError(message, extraProperties) {\n  var forEach = require('lodash/collection/forEach');\n\n  var error = this;\n\n  // try to get a stacktrace\n  if (typeof Error.captureStackTrace === 'function') {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    error.stack = (new Error()).stack || 'Cannot get a stacktrace, browser is too old';\n  }\n\n  this.name = this.constructor.name;\n  this.message = message || 'Unknown error';\n\n  if (extraProperties) {\n    forEach(extraProperties, function addToErrorObject(value, key) {\n      error[key] = value;\n    });\n  }\n}\n\ninherits(AlgoliaSearchError, Error);\n\nfunction createCustomError(name, message) {\n  function AlgoliaSearchCustomError() {\n    var args = Array.prototype.slice.call(arguments, 0);\n\n    // custom message not set, use default\n    if (typeof args[0] !== 'string') {\n      args.unshift(message);\n    }\n\n    AlgoliaSearchError.apply(this, args);\n    this.name = 'AlgoliaSearch' + name + 'Error';\n  }\n\n  inherits(AlgoliaSearchCustomError, AlgoliaSearchError);\n\n  return AlgoliaSearchCustomError;\n}\n\n// late exports to let various fn defs and inherits take place\nmodule.exports = {\n  AlgoliaSearchError: AlgoliaSearchError,\n  UnparsableJSON: createCustomError(\n    'UnparsableJSON',\n    'Could not parse the incoming response as JSON, see err.more for details'\n  ),\n  RequestTimeout: createCustomError(\n    'RequestTimeout',\n    'Request timedout before getting a response'\n  ),\n  Network: createCustomError(\n    'Network',\n    'Network issue, see err.more for details'\n  ),\n  JSONPScriptFail: createCustomError(\n    'JSONPScriptFail',\n    '<script> was loaded but did not call our provided callback'\n  ),\n  JSONPScriptError: createCustomError(\n    'JSONPScriptError',\n    '<script> unable to load due to an `error` event on it'\n  ),\n  Unknown: createCustomError(\n    'Unknown',\n    'Unknown error occured'\n  )\n};\n\n},{\"inherits\":86,\"lodash/collection/forEach\":5}],81:[function(require,module,exports){\n'use strict';\n\nmodule.exports = '3.12.0';\n\n},{}],82:[function(require,module,exports){\n\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  return ('WebkitAppearance' in document.documentElement.style) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window.console && (console.firebug || (console.exception && console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  return JSON.stringify(v);\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs() {\n  var args = arguments;\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return args;\n\n  var c = 'color: ' + this.color;\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n  return args;\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage(){\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n\n},{\"./debug\":83}],83:[function(require,module,exports){\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = debug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('algolia-ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lowercased letter, i.e. \"n\".\n */\n\nexports.formatters = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction selectColor() {\n  return exports.colors[prevColor++ % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction debug(namespace) {\n\n  // define the `disabled` version\n  function disabled() {\n  }\n  disabled.enabled = false;\n\n  // define the `enabled` version\n  function enabled() {\n\n    var self = enabled;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // add the `color` if not set\n    if (null == self.useColors) self.useColors = exports.useColors();\n    if (null == self.color && self.useColors) self.color = selectColor();\n\n    var args = Array.prototype.slice.call(arguments);\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %o\n      args = ['%o'].concat(args);\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    if ('function' === typeof exports.formatArgs) {\n      args = exports.formatArgs.apply(self, args);\n    }\n    var logFn = enabled.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n  enabled.enabled = true;\n\n  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n  fn.namespace = namespace;\n\n  return fn;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  var split = (namespaces || '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n},{\"algolia-ms\":3}],84:[function(require,module,exports){\n(function (process,global){\n/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   3.1.2\n */\n\n(function() {\n    \"use strict\";\n    function lib$es6$promise$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function lib$es6$promise$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function lib$es6$promise$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var lib$es6$promise$utils$$_isArray;\n    if (!Array.isArray) {\n      lib$es6$promise$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      lib$es6$promise$utils$$_isArray = Array.isArray;\n    }\n\n    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\n    var lib$es6$promise$asap$$len = 0;\n    var lib$es6$promise$asap$$vertxNext;\n    var lib$es6$promise$asap$$customSchedulerFn;\n\n    var lib$es6$promise$asap$$asap = function asap(callback, arg) {\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\n      lib$es6$promise$asap$$len += 2;\n      if (lib$es6$promise$asap$$len === 2) {\n        // If len is 2, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        if (lib$es6$promise$asap$$customSchedulerFn) {\n          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\n        } else {\n          lib$es6$promise$asap$$scheduleFlush();\n        }\n      }\n    }\n\n    function lib$es6$promise$asap$$setScheduler(scheduleFn) {\n      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\n    }\n\n    function lib$es6$promise$asap$$setAsap(asapFn) {\n      lib$es6$promise$asap$$asap = asapFn;\n    }\n\n    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\n    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\n    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\n    var lib$es6$promise$asap$$isNode = typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n    // test for web worker but not in IE10\n    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function lib$es6$promise$asap$$useNextTick() {\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n      // see https://github.com/cujojs/when/issues/410 for details\n      return function() {\n        process.nextTick(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    // vertx\n    function lib$es6$promise$asap$$useVertxTimer() {\n      return function() {\n        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    function lib$es6$promise$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function lib$es6$promise$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = lib$es6$promise$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function lib$es6$promise$asap$$useSetTimeout() {\n      return function() {\n        setTimeout(lib$es6$promise$asap$$flush, 1);\n      };\n    }\n\n    var lib$es6$promise$asap$$queue = new Array(1000);\n    function lib$es6$promise$asap$$flush() {\n      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {\n        var callback = lib$es6$promise$asap$$queue[i];\n        var arg = lib$es6$promise$asap$$queue[i+1];\n\n        callback(arg);\n\n        lib$es6$promise$asap$$queue[i] = undefined;\n        lib$es6$promise$asap$$queue[i+1] = undefined;\n      }\n\n      lib$es6$promise$asap$$len = 0;\n    }\n\n    function lib$es6$promise$asap$$attemptVertx() {\n      try {\n        var r = require;\n        var vertx = r('vertx');\n        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n        return lib$es6$promise$asap$$useVertxTimer();\n      } catch(e) {\n        return lib$es6$promise$asap$$useSetTimeout();\n      }\n    }\n\n    var lib$es6$promise$asap$$scheduleFlush;\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (lib$es6$promise$asap$$isNode) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\n    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\n    } else if (lib$es6$promise$asap$$isWorker) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\n    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\n    } else {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\n    }\n    function lib$es6$promise$then$$then(onFulfillment, onRejection) {\n      var parent = this;\n      var state = parent._state;\n\n      if (state === lib$es6$promise$$internal$$FULFILLED && !onFulfillment || state === lib$es6$promise$$internal$$REJECTED && !onRejection) {\n        return this;\n      }\n\n      var child = new this.constructor(lib$es6$promise$$internal$$noop);\n      var result = parent._result;\n\n      if (state) {\n        var callback = arguments[state - 1];\n        lib$es6$promise$asap$$asap(function(){\n          lib$es6$promise$$internal$$invokeCallback(state, child, callback, result);\n        });\n      } else {\n        lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n      }\n\n      return child;\n    }\n    var lib$es6$promise$then$$default = lib$es6$promise$then$$then;\n    function lib$es6$promise$promise$resolve$$resolve(object) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$resolve(promise, object);\n      return promise;\n    }\n    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\n\n    function lib$es6$promise$$internal$$noop() {}\n\n    var lib$es6$promise$$internal$$PENDING   = void 0;\n    var lib$es6$promise$$internal$$FULFILLED = 1;\n    var lib$es6$promise$$internal$$REJECTED  = 2;\n\n    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$selfFulfillment() {\n      return new TypeError(\"You cannot resolve a promise with itself\");\n    }\n\n    function lib$es6$promise$$internal$$cannotReturnOwn() {\n      return new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    function lib$es6$promise$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\n        return lib$es6$promise$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\n       lib$es6$promise$asap$$asap(function(promise) {\n        var sealed = false;\n        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            lib$es6$promise$$internal$$resolve(promise, value);\n          } else {\n            lib$es6$promise$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          lib$es6$promise$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          lib$es6$promise$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, thenable._result);\n      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, thenable._result);\n      } else {\n        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable, then) {\n      if (maybeThenable.constructor === promise.constructor &&\n          then === lib$es6$promise$then$$default &&\n          constructor.resolve === lib$es6$promise$promise$resolve$$default) {\n        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        } else if (lib$es6$promise$utils$$isFunction(then)) {\n          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function lib$es6$promise$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\n      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\n        lib$es6$promise$$internal$$handleMaybeThenable(promise, value, lib$es6$promise$$internal$$getThen(value));\n      } else {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publishRejection(promise) {\n      if (promise._onerror) {\n        promise._onerror(promise._result);\n      }\n\n      lib$es6$promise$$internal$$publish(promise);\n    }\n\n    function lib$es6$promise$$internal$$fulfill(promise, value) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = lib$es6$promise$$internal$$FULFILLED;\n\n      if (promise._subscribers.length !== 0) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\n      }\n    }\n\n    function lib$es6$promise$$internal$$reject(promise, reason) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n      promise._state = lib$es6$promise$$internal$$REJECTED;\n      promise._result = reason;\n\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\n    }\n\n    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onerror = null;\n\n      subscribers[length] = child;\n      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function lib$es6$promise$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\n        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = lib$es6$promise$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = lib$es6$promise$$internal$$tryCatch(callback, detail);\n\n        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$es6$promise$$internal$$reject(promise, error);\n      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      } else if (settled === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\n      try {\n        resolver(function resolvePromise(value){\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        lib$es6$promise$$internal$$reject(promise, e);\n      }\n    }\n\n    function lib$es6$promise$promise$all$$all(entries) {\n      return new lib$es6$promise$enumerator$$default(this, entries).promise;\n    }\n    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\n    function lib$es6$promise$promise$race$$race(entries) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (!lib$es6$promise$utils$$isArray(entries)) {\n        lib$es6$promise$$internal$$reject(promise, new TypeError('You must pass an array to race.'));\n        return promise;\n      }\n\n      var length = entries.length;\n\n      function onFulfillment(value) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      }\n\n      function onRejection(reason) {\n        lib$es6$promise$$internal$$reject(promise, reason);\n      }\n\n      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);\n      }\n\n      return promise;\n    }\n    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\n    function lib$es6$promise$promise$reject$$reject(reason) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$reject(promise, reason);\n      return promise;\n    }\n    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\n\n    var lib$es6$promise$promise$$counter = 0;\n\n    function lib$es6$promise$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function lib$es6$promise$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\n    /**\n      Promise objects represent the eventual result of an asynchronous operation. The\n      primary way of interacting with a promise is through its `then` method, which\n      registers callbacks to receive either a promise's eventual value or the reason\n      why the promise cannot be fulfilled.\n\n      Terminology\n      -----------\n\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n      - `thenable` is an object or function that defines a `then` method.\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n      - `exception` is a value that is thrown using the throw statement.\n      - `reason` is a value that indicates why a promise was rejected.\n      - `settled` the final resting state of a promise, fulfilled or rejected.\n\n      A promise can be in one of three states: pending, fulfilled, or rejected.\n\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\n      state.  Promises that are rejected have a rejection reason and are in the\n      rejected state.  A fulfillment value is never a thenable.\n\n      Promises can also be said to *resolve* a value.  If this value is also a\n      promise, then the original promise's settled state will match the value's\n      settled state.  So a promise that *resolves* a promise that rejects will\n      itself reject, and a promise that *resolves* a promise that fulfills will\n      itself fulfill.\n\n\n      Basic Usage:\n      ------------\n\n      ```js\n      var promise = new Promise(function(resolve, reject) {\n        // on success\n        resolve(value);\n\n        // on failure\n        reject(reason);\n      });\n\n      promise.then(function(value) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Advanced Usage:\n      ---------------\n\n      Promises shine when abstracting away asynchronous interactions such as\n      `XMLHttpRequest`s.\n\n      ```js\n      function getJSON(url) {\n        return new Promise(function(resolve, reject){\n          var xhr = new XMLHttpRequest();\n\n          xhr.open('GET', url);\n          xhr.onreadystatechange = handler;\n          xhr.responseType = 'json';\n          xhr.setRequestHeader('Accept', 'application/json');\n          xhr.send();\n\n          function handler() {\n            if (this.readyState === this.DONE) {\n              if (this.status === 200) {\n                resolve(this.response);\n              } else {\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n              }\n            }\n          };\n        });\n      }\n\n      getJSON('/posts.json').then(function(json) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Unlike callbacks, promises are great composable primitives.\n\n      ```js\n      Promise.all([\n        getJSON('/posts'),\n        getJSON('/comments')\n      ]).then(function(values){\n        values[0] // => postsJSON\n        values[1] // => commentsJSON\n\n        return values;\n      });\n      ```\n\n      @class Promise\n      @param {function} resolver\n      Useful for tooling.\n      @constructor\n    */\n    function lib$es6$promise$promise$$Promise(resolver) {\n      this._id = lib$es6$promise$promise$$counter++;\n      this._state = undefined;\n      this._result = undefined;\n      this._subscribers = [];\n\n      if (lib$es6$promise$$internal$$noop !== resolver) {\n        typeof resolver !== 'function' && lib$es6$promise$promise$$needsResolver();\n        this instanceof lib$es6$promise$promise$$Promise ? lib$es6$promise$$internal$$initializePromise(this, resolver) : lib$es6$promise$promise$$needsNew();\n      }\n    }\n\n    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\n    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\n    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\n    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\n    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\n    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\n    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\n\n    lib$es6$promise$promise$$Promise.prototype = {\n      constructor: lib$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: lib$es6$promise$then$$default,\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\n    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\n      this._instanceConstructor = Constructor;\n      this.promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (Array.isArray(input)) {\n        this._input     = input;\n        this.length     = input.length;\n        this._remaining = input.length;\n\n        this._result = new Array(this.length);\n\n        if (this.length === 0) {\n          lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n        } else {\n          this.length = this.length || 0;\n          this._enumerate();\n          if (this._remaining === 0) {\n            lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n          }\n        }\n      } else {\n        lib$es6$promise$$internal$$reject(this.promise, this._validationError());\n      }\n    }\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function() {\n      return new Error('Array Methods must be provided an Array');\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {\n      var length  = this.length;\n      var input   = this._input;\n\n      for (var i = 0; this._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        this._eachEntry(input[i], i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      var c = this._instanceConstructor;\n      var resolve = c.resolve;\n\n      if (resolve === lib$es6$promise$promise$resolve$$default) {\n        var then = lib$es6$promise$$internal$$getThen(entry);\n\n        if (then === lib$es6$promise$then$$default &&\n            entry._state !== lib$es6$promise$$internal$$PENDING) {\n          this._settledAt(entry._state, i, entry._result);\n        } else if (typeof then !== 'function') {\n          this._remaining--;\n          this._result[i] = entry;\n        } else if (c === lib$es6$promise$promise$$default) {\n          var promise = new c(lib$es6$promise$$internal$$noop);\n          lib$es6$promise$$internal$$handleMaybeThenable(promise, entry, then);\n          this._willSettleAt(promise, i);\n        } else {\n          this._willSettleAt(new c(function(resolve) { resolve(entry); }), i);\n        }\n      } else {\n        this._willSettleAt(resolve(entry), i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var promise = this.promise;\n\n      if (promise._state === lib$es6$promise$$internal$$PENDING) {\n        this._remaining--;\n\n        if (state === lib$es6$promise$$internal$$REJECTED) {\n          lib$es6$promise$$internal$$reject(promise, value);\n        } else {\n          this._result[i] = value;\n        }\n      }\n\n      if (this._remaining === 0) {\n        lib$es6$promise$$internal$$fulfill(promise, this._result);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\n      });\n    };\n    function lib$es6$promise$polyfill$$polyfill() {\n      var local;\n\n      if (typeof global !== 'undefined') {\n          local = global;\n      } else if (typeof self !== 'undefined') {\n          local = self;\n      } else {\n          try {\n              local = Function('return this')();\n          } catch (e) {\n              throw new Error('polyfill failed because global object is unavailable in this environment');\n          }\n      }\n\n      var P = local.Promise;\n\n      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\n        return;\n      }\n\n      local.Promise = lib$es6$promise$promise$$default;\n    }\n    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\n\n    var lib$es6$promise$umd$$ES6Promise = {\n      'Promise': lib$es6$promise$promise$$default,\n      'polyfill': lib$es6$promise$polyfill$$default\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define(function() { return lib$es6$promise$umd$$ES6Promise; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = lib$es6$promise$umd$$ES6Promise;\n    } else if (typeof this !== 'undefined') {\n      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\n    }\n\n    lib$es6$promise$polyfill$$default();\n}).call(this);\n\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"_process\":88}],85:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n},{}],86:[function(require,module,exports){\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n},{}],87:[function(require,module,exports){\nvar m = (function app(window, undefined) {\r\n\t\"use strict\";\r\n  \tvar VERSION = \"v0.2.2-rc.1\";\r\n\tfunction isFunction(object) {\r\n\t\treturn typeof object === \"function\";\r\n\t}\r\n\tfunction isObject(object) {\r\n\t\treturn type.call(object) === \"[object Object]\";\r\n\t}\r\n\tfunction isString(object) {\r\n\t\treturn type.call(object) === \"[object String]\";\r\n\t}\r\n\tvar isArray = Array.isArray || function (object) {\r\n\t\treturn type.call(object) === \"[object Array]\";\r\n\t};\r\n\tvar type = {}.toString;\r\n\tvar parser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[.+?\\])/g, attrParser = /\\[(.+?)(?:=(\"|'|)(.*?)\\2)?\\]/;\r\n\tvar voidElements = /^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/;\r\n\tvar noop = function () {};\r\n\r\n\t// caching commonly used variables\r\n\tvar $document, $location, $requestAnimationFrame, $cancelAnimationFrame;\r\n\r\n\t// self invoking function needed because of the way mocks work\r\n\tfunction initialize(window) {\r\n\t\t$document = window.document;\r\n\t\t$location = window.location;\r\n\t\t$cancelAnimationFrame = window.cancelAnimationFrame || window.clearTimeout;\r\n\t\t$requestAnimationFrame = window.requestAnimationFrame || window.setTimeout;\r\n\t}\r\n\r\n\tinitialize(window);\r\n\r\n\tm.version = function() {\r\n\t\treturn VERSION;\r\n\t};\r\n\r\n\t/**\r\n\t * @typedef {String} Tag\r\n\t * A string that looks like -> div.classname#id[param=one][param2=two]\r\n\t * Which describes a DOM node\r\n\t */\r\n\r\n\t/**\r\n\t *\r\n\t * @param {Tag} The DOM node tag\r\n\t * @param {Object=[]} optional key-value pairs to be mapped to DOM attrs\r\n\t * @param {...mNode=[]} Zero or more Mithril child nodes. Can be an array, or splat (optional)\r\n\t *\r\n\t */\r\n\tfunction m(tag, pairs) {\r\n\t\tfor (var args = [], i = 1; i < arguments.length; i++) {\r\n\t\t\targs[i - 1] = arguments[i];\r\n\t\t}\r\n\t\tif (isObject(tag)) return parameterize(tag, args);\r\n\t\tvar hasAttrs = pairs != null && isObject(pairs) && !(\"tag\" in pairs || \"view\" in pairs || \"subtree\" in pairs);\r\n\t\tvar attrs = hasAttrs ? pairs : {};\r\n\t\tvar classAttrName = \"class\" in attrs ? \"class\" : \"className\";\r\n\t\tvar cell = {tag: \"div\", attrs: {}};\r\n\t\tvar match, classes = [];\r\n\t\tif (!isString(tag)) throw new Error(\"selector in m(selector, attrs, children) should be a string\");\r\n\t\twhile ((match = parser.exec(tag)) != null) {\r\n\t\t\tif (match[1] === \"\" && match[2]) cell.tag = match[2];\r\n\t\t\telse if (match[1] === \"#\") cell.attrs.id = match[2];\r\n\t\t\telse if (match[1] === \".\") classes.push(match[2]);\r\n\t\t\telse if (match[3][0] === \"[\") {\r\n\t\t\t\tvar pair = attrParser.exec(match[3]);\r\n\t\t\t\tcell.attrs[pair[1]] = pair[3] || (pair[2] ? \"\" :true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar children = hasAttrs ? args.slice(1) : args;\r\n\t\tif (children.length === 1 && isArray(children[0])) {\r\n\t\t\tcell.children = children[0];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcell.children = children;\r\n\t\t}\r\n\r\n\t\tfor (var attrName in attrs) {\r\n\t\t\tif (attrs.hasOwnProperty(attrName)) {\r\n\t\t\t\tif (attrName === classAttrName && attrs[attrName] != null && attrs[attrName] !== \"\") {\r\n\t\t\t\t\tclasses.push(attrs[attrName]);\r\n\t\t\t\t\tcell.attrs[attrName] = \"\"; //create key in correct iteration order\r\n\t\t\t\t}\r\n\t\t\t\telse cell.attrs[attrName] = attrs[attrName];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (classes.length) cell.attrs[classAttrName] = classes.join(\" \");\r\n\r\n\t\treturn cell;\r\n\t}\r\n\tfunction forEach(list, f) {\r\n\t\tfor (var i = 0; i < list.length && !f(list[i], i++);) {}\r\n\t}\r\n\tfunction forKeys(list, f) {\r\n\t\tforEach(list, function (attrs, i) {\r\n\t\t\treturn (attrs = attrs && attrs.attrs) && attrs.key != null && f(attrs, i);\r\n\t\t});\r\n\t}\r\n\t// This function was causing deopts in Chrome.\r\n\tfunction dataToString(data) {\r\n\t\t//data.toString() might throw or return null if data is the return value of Console.log in Firefox (behavior depends on version)\r\n\t\ttry {\r\n\t\t\tif (data == null || data.toString() == null) return \"\";\r\n\t\t} catch (e) {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t\treturn data;\r\n\t}\r\n\t// This function was causing deopts in Chrome.\r\n\tfunction injectTextNode(parentElement, first, index, data) {\r\n\t\ttry {\r\n\t\t\tinsertNode(parentElement, first, index);\r\n\t\t\tfirst.nodeValue = data;\r\n\t\t} catch (e) {} //IE erroneously throws error when appending an empty text node after a null\r\n\t}\r\n\r\n\tfunction flatten(list) {\r\n\t\t//recursively flatten array\r\n\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\tif (isArray(list[i])) {\r\n\t\t\t\tlist = list.concat.apply([], list);\r\n\t\t\t\t//check current index again and flatten until there are no more nested arrays at that index\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn list;\r\n\t}\r\n\r\n\tfunction insertNode(parentElement, node, index) {\r\n\t\tparentElement.insertBefore(node, parentElement.childNodes[index] || null);\r\n\t}\r\n\r\n\tvar DELETION = 1, INSERTION = 2, MOVE = 3;\r\n\r\n\tfunction handleKeysDiffer(data, existing, cached, parentElement) {\r\n\t\tforKeys(data, function (key, i) {\r\n\t\t\texisting[key = key.key] = existing[key] ? {\r\n\t\t\t\taction: MOVE,\r\n\t\t\t\tindex: i,\r\n\t\t\t\tfrom: existing[key].index,\r\n\t\t\t\telement: cached.nodes[existing[key].index] || $document.createElement(\"div\")\r\n\t\t\t} : {action: INSERTION, index: i};\r\n\t\t});\r\n\t\tvar actions = [];\r\n\t\tfor (var prop in existing) actions.push(existing[prop]);\r\n\t\tvar changes = actions.sort(sortChanges), newCached = new Array(cached.length);\r\n\t\tnewCached.nodes = cached.nodes.slice();\r\n\r\n\t\tforEach(changes, function (change) {\r\n\t\t\tvar index = change.index;\r\n\t\t\tif (change.action === DELETION) {\r\n\t\t\t\tclear(cached[index].nodes, cached[index]);\r\n\t\t\t\tnewCached.splice(index, 1);\r\n\t\t\t}\r\n\t\t\tif (change.action === INSERTION) {\r\n\t\t\t\tvar dummy = $document.createElement(\"div\");\r\n\t\t\t\tdummy.key = data[index].attrs.key;\r\n\t\t\t\tinsertNode(parentElement, dummy, index);\r\n\t\t\t\tnewCached.splice(index, 0, {\r\n\t\t\t\t\tattrs: {key: data[index].attrs.key},\r\n\t\t\t\t\tnodes: [dummy]\r\n\t\t\t\t});\r\n\t\t\t\tnewCached.nodes[index] = dummy;\r\n\t\t\t}\r\n\r\n\t\t\tif (change.action === MOVE) {\r\n\t\t\t\tvar changeElement = change.element;\r\n\t\t\t\tvar maybeChanged = parentElement.childNodes[index];\r\n\t\t\t\tif (maybeChanged !== changeElement && changeElement !== null) {\r\n\t\t\t\t\tparentElement.insertBefore(changeElement, maybeChanged || null);\r\n\t\t\t\t}\r\n\t\t\t\tnewCached[index] = cached[change.from];\r\n\t\t\t\tnewCached.nodes[index] = changeElement;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn newCached;\r\n\t}\r\n\r\n\tfunction diffKeys(data, cached, existing, parentElement) {\r\n\t\tvar keysDiffer = data.length !== cached.length;\r\n\t\tif (!keysDiffer) {\r\n\t\t\tforKeys(data, function (attrs, i) {\r\n\t\t\t\tvar cachedCell = cached[i];\r\n\t\t\t\treturn keysDiffer = cachedCell && cachedCell.attrs && cachedCell.attrs.key !== attrs.key;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn keysDiffer ? handleKeysDiffer(data, existing, cached, parentElement) : cached;\r\n\t}\r\n\r\n\tfunction diffArray(data, cached, nodes) {\r\n\t\t//diff the array itself\r\n\r\n\t\t//update the list of DOM nodes by collecting the nodes from each item\r\n\t\tforEach(data, function (_, i) {\r\n\t\t\tif (cached[i] != null) nodes.push.apply(nodes, cached[i].nodes);\r\n\t\t})\r\n\t\t//remove items from the end of the array if the new array is shorter than the old one. if errors ever happen here, the issue is most likely\r\n\t\t//a bug in the construction of the `cached` data structure somewhere earlier in the program\r\n\t\tforEach(cached.nodes, function (node, i) {\r\n\t\t\tif (node.parentNode != null && nodes.indexOf(node) < 0) clear([node], [cached[i]]);\r\n\t\t})\r\n\t\tif (data.length < cached.length) cached.length = data.length;\r\n\t\tcached.nodes = nodes;\r\n\t}\r\n\r\n\tfunction buildArrayKeys(data) {\r\n\t\tvar guid = 0;\r\n\t\tforKeys(data, function () {\r\n\t\t\tforEach(data, function (attrs) {\r\n\t\t\t\tif ((attrs = attrs && attrs.attrs) && attrs.key == null) attrs.key = \"__mithril__\" + guid++;\r\n\t\t\t})\r\n\t\t\treturn 1;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction maybeRecreateObject(data, cached, dataAttrKeys) {\r\n\t\t//if an element is different enough from the one in cache, recreate it\r\n\t\tif (data.tag !== cached.tag ||\r\n\t\t\t\tdataAttrKeys.sort().join() !== Object.keys(cached.attrs).sort().join() ||\r\n\t\t\t\tdata.attrs.id !== cached.attrs.id ||\r\n\t\t\t\tdata.attrs.key !== cached.attrs.key ||\r\n\t\t\t\t(m.redraw.strategy() === \"all\" && (!cached.configContext || cached.configContext.retain !== true)) ||\r\n\t\t\t\t(m.redraw.strategy() === \"diff\" && cached.configContext && cached.configContext.retain === false)) {\r\n\t\t\tif (cached.nodes.length) clear(cached.nodes);\r\n\t\t\tif (cached.configContext && isFunction(cached.configContext.onunload)) cached.configContext.onunload();\r\n\t\t\tif (cached.controllers) {\r\n\t\t\t\tforEach(cached.controllers, function (controller) {\r\n\t\t\t\t\tif (controller.unload) controller.onunload({preventDefault: noop});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getObjectNamespace(data, namespace) {\r\n\t\treturn data.attrs.xmlns ? data.attrs.xmlns :\r\n\t\t\tdata.tag === \"svg\" ? \"http://www.w3.org/2000/svg\" :\r\n\t\t\tdata.tag === \"math\" ? \"http://www.w3.org/1998/Math/MathML\" :\r\n\t\t\tnamespace;\r\n\t}\r\n\r\n\tfunction unloadCachedControllers(cached, views, controllers) {\r\n\t\tif (controllers.length) {\r\n\t\t\tcached.views = views;\r\n\t\t\tcached.controllers = controllers;\r\n\t\t\tforEach(controllers, function (controller) {\r\n\t\t\t\tif (controller.onunload && controller.onunload.$old) controller.onunload = controller.onunload.$old;\r\n\t\t\t\tif (pendingRequests && controller.onunload) {\r\n\t\t\t\t\tvar onunload = controller.onunload;\r\n\t\t\t\t\tcontroller.onunload = noop;\r\n\t\t\t\t\tcontroller.onunload.$old = onunload;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction scheduleConfigsToBeCalled(configs, data, node, isNew, cached) {\r\n\t\t//schedule configs to be called. They are called after `build`\r\n\t\t//finishes running\r\n\t\tif (isFunction(data.attrs.config)) {\r\n\t\t\tvar context = cached.configContext = cached.configContext || {};\r\n\r\n\t\t\t//bind\r\n\t\t\tconfigs.push(function() {\r\n\t\t\t\treturn data.attrs.config.call(data, node, !isNew, context, cached);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction buildUpdatedNode(cached, data, editable, hasKeys, namespace, views, configs, controllers) {\r\n\t\tvar node = cached.nodes[0];\r\n\t\tif (hasKeys) setAttributes(node, data.tag, data.attrs, cached.attrs, namespace);\r\n\t\tcached.children = build(node, data.tag, undefined, undefined, data.children, cached.children, false, 0, data.attrs.contenteditable ? node : editable, namespace, configs);\r\n\t\tcached.nodes.intact = true;\r\n\r\n\t\tif (controllers.length) {\r\n\t\t\tcached.views = views;\r\n\t\t\tcached.controllers = controllers;\r\n\t\t}\r\n\r\n\t\treturn node;\r\n\t}\r\n\r\n\tfunction handleNonexistentNodes(data, parentElement, index) {\r\n\t\tvar nodes;\r\n\t\tif (data.$trusted) {\r\n\t\t\tnodes = injectHTML(parentElement, index, data);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnodes = [$document.createTextNode(data)];\r\n\t\t\tif (!parentElement.nodeName.match(voidElements)) insertNode(parentElement, nodes[0], index);\r\n\t\t}\r\n\r\n\t\tvar cached = typeof data === \"string\" || typeof data === \"number\" || typeof data === \"boolean\" ? new data.constructor(data) : data;\r\n\t\tcached.nodes = nodes;\r\n\t\treturn cached;\r\n\t}\r\n\r\n\tfunction reattachNodes(data, cached, parentElement, editable, index, parentTag) {\r\n\t\tvar nodes = cached.nodes;\r\n\t\tif (!editable || editable !== $document.activeElement) {\r\n\t\t\tif (data.$trusted) {\r\n\t\t\t\tclear(nodes, cached)\r\n\t\t\t\tnodes = injectHTML(parentElement, index, data)\r\n\t\t\t} else if (parentTag === \"textarea\") {\r\n\t\t\t\t// <textarea> uses `value` instead of `nodeValue`.\r\n\t\t\t\tparentElement.value = data\r\n\t\t\t} else if (editable) {\r\n\t\t\t\t// contenteditable nodes use `innerHTML` instead of `nodeValue`.\r\n\t\t\t\teditable.innerHTML = data\r\n\t\t\t} else {\r\n\t\t\t\t// was a trusted string\r\n\t\t\t\tif (nodes[0].nodeType === 1 || nodes.length > 1 || (nodes[0].nodeValue.trim && !nodes[0].nodeValue.trim())) {\r\n\t\t\t\t\tclear(cached.nodes, cached)\r\n\t\t\t\t\tnodes = [$document.createTextNode(data)]\r\n\t\t\t\t}\r\n\t\t\t\tinjectTextNode(parentElement, nodes[0], index, data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcached = new data.constructor(data);\r\n\t\tcached.nodes = nodes;\r\n\t\treturn cached;\r\n\t}\r\n\r\n\tfunction handleText(cached, data, index, parentElement, shouldReattach, editable, parentTag) {\r\n\t\t//handle text nodes\r\n\t\treturn cached.nodes.length === 0 ? handleNonexistentNodes(data, parentElement, index) :\r\n\t\t\tcached.valueOf() !== data.valueOf() || shouldReattach === true ?\r\n\t\t\t\treattachNodes(data, cached, parentElement, editable, index, parentTag) :\r\n\t\t\t(cached.nodes.intact = true, cached);\r\n\t}\r\n\r\n\tfunction getSubArrayCount(item) {\r\n\t\tif (item.$trusted) {\r\n\t\t\t//fix offset of next element if item was a trusted string w/ more than one html element\r\n\t\t\t//the first clause in the regexp matches elements\r\n\t\t\t//the second clause (after the pipe) matches text nodes\r\n\t\t\tvar match = item.match(/<[^\\/]|\\>\\s*[^<]/g);\r\n\t\t\tif (match != null) return match.length;\r\n\t\t}\r\n\t\telse if (isArray(item)) {\r\n\t\t\treturn item.length;\r\n\t\t}\r\n\t\treturn 1;\r\n\t}\r\n\r\n\tfunction buildArray(data, cached, parentElement, index, parentTag, shouldReattach, editable, namespace, configs) {\r\n\t\tdata = flatten(data);\r\n\t\tvar nodes = [], intact = cached.length === data.length, subArrayCount = 0;\r\n\r\n\t\t//keys algorithm: sort elements without recreating them if keys are present\r\n\t\t//1) create a map of all existing keys, and mark all for deletion\r\n\t\t//2) add new keys to map and mark them for addition\r\n\t\t//3) if key exists in new list, change action from deletion to a move\r\n\t\t//4) for each key, handle its corresponding action as marked in previous steps\r\n\t\tvar existing = {}, shouldMaintainIdentities = false;\r\n\t\tforKeys(cached, function (attrs, i) {\r\n\t\t\tshouldMaintainIdentities = true;\r\n\t\t\texisting[cached[i].attrs.key] = {action: DELETION, index: i};\r\n\t\t});\r\n\r\n\t\tbuildArrayKeys(data);\r\n\t\tif (shouldMaintainIdentities) cached = diffKeys(data, cached, existing, parentElement);\r\n\t\t//end key algorithm\r\n\r\n\t\tvar cacheCount = 0;\r\n\t\t//faster explicitly written\r\n\t\tfor (var i = 0, len = data.length; i < len; i++) {\r\n\t\t\t//diff each item in the array\r\n\t\t\tvar item = build(parentElement, parentTag, cached, index, data[i], cached[cacheCount], shouldReattach, index + subArrayCount || subArrayCount, editable, namespace, configs);\r\n\r\n\t\t\tif (item !== undefined) {\r\n\t\t\t\tintact = intact && item.nodes.intact;\r\n\t\t\t\tsubArrayCount += getSubArrayCount(item);\r\n\t\t\t\tcached[cacheCount++] = item;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!intact) diffArray(data, cached, nodes);\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction makeCache(data, cached, index, parentIndex, parentCache) {\r\n\t\tif (cached != null) {\r\n\t\t\tif (type.call(cached) === type.call(data)) return cached;\r\n\r\n\t\t\tif (parentCache && parentCache.nodes) {\r\n\t\t\t\tvar offset = index - parentIndex, end = offset + (isArray(data) ? data : cached.nodes).length;\r\n\t\t\t\tclear(parentCache.nodes.slice(offset, end), parentCache.slice(offset, end));\r\n\t\t\t} else if (cached.nodes) {\r\n\t\t\t\tclear(cached.nodes, cached);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcached = new data.constructor();\r\n\t\t//if constructor creates a virtual dom element, use a blank object\r\n\t\t//as the base cached node instead of copying the virtual el (#277)\r\n\t\tif (cached.tag) cached = {};\r\n\t\tcached.nodes = [];\r\n\t\treturn cached;\r\n\t}\r\n\r\n\tfunction constructNode(data, namespace) {\r\n\t\treturn namespace === undefined ?\r\n\t\t\tdata.attrs.is ? $document.createElement(data.tag, data.attrs.is) : $document.createElement(data.tag) :\r\n\t\t\tdata.attrs.is ? $document.createElementNS(namespace, data.tag, data.attrs.is) : $document.createElementNS(namespace, data.tag);\r\n\t}\r\n\r\n\tfunction constructAttrs(data, node, namespace, hasKeys) {\r\n\t\treturn hasKeys ? setAttributes(node, data.tag, data.attrs, {}, namespace) : data.attrs;\r\n\t}\r\n\r\n\tfunction constructChildren(data, node, cached, editable, namespace, configs) {\r\n\t\treturn data.children != null && data.children.length > 0 ?\r\n\t\t\tbuild(node, data.tag, undefined, undefined, data.children, cached.children, true, 0, data.attrs.contenteditable ? node : editable, namespace, configs) :\r\n\t\t\tdata.children;\r\n\t}\r\n\r\n\tfunction reconstructCached(data, attrs, children, node, namespace, views, controllers) {\r\n\t\tvar cached = {tag: data.tag, attrs: attrs, children: children, nodes: [node]};\r\n\t\tunloadCachedControllers(cached, views, controllers);\r\n\t\tif (cached.children && !cached.children.nodes) cached.children.nodes = [];\r\n\t\t//edge case: setting value on <select> doesn't work before children exist, so set it again after children have been created\r\n\t\tif (data.tag === \"select\" && \"value\" in data.attrs) setAttributes(node, data.tag, {value: data.attrs.value}, {}, namespace);\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction getController(views, view, cachedControllers, controller) {\r\n\t\tvar controllerIndex = m.redraw.strategy() === \"diff\" && views ? views.indexOf(view) : -1;\r\n\t\treturn controllerIndex > -1 ? cachedControllers[controllerIndex] :\r\n\t\t\ttypeof controller === \"function\" ? new controller() : {};\r\n\t}\r\n\r\n\tfunction updateLists(views, controllers, view, controller) {\r\n\t\tif (controller.onunload != null) unloaders.push({controller: controller, handler: controller.onunload});\r\n\t\tviews.push(view);\r\n\t\tcontrollers.push(controller);\r\n\t}\r\n\r\n\tfunction checkView(data, view, cached, cachedControllers, controllers, views) {\r\n\t\tvar controller = getController(cached.views, view, cachedControllers, data.controller);\r\n\t\t//Faster to coerce to number and check for NaN\r\n\t\tvar key = +(data && data.attrs && data.attrs.key);\r\n\t\tdata = pendingRequests === 0 || forcing || cachedControllers && cachedControllers.indexOf(controller) > -1 ? data.view(controller) : {tag: \"placeholder\"};\r\n\t\tif (data.subtree === \"retain\") return cached;\r\n\t\tif (key === key) (data.attrs = data.attrs || {}).key = key;\r\n\t\tupdateLists(views, controllers, view, controller);\r\n\t\treturn data;\r\n\t}\r\n\r\n\tfunction markViews(data, cached, views, controllers) {\r\n\t\tvar cachedControllers = cached && cached.controllers;\r\n\t\twhile (data.view != null) data = checkView(data, data.view.$original || data.view, cached, cachedControllers, controllers, views);\r\n\t\treturn data;\r\n\t}\r\n\r\n\tfunction buildObject(data, cached, editable, parentElement, index, shouldReattach, namespace, configs) {\r\n\t\tvar views = [], controllers = [];\r\n\t\tdata = markViews(data, cached, views, controllers);\r\n\t\tif (!data.tag && controllers.length) throw new Error(\"Component template must return a virtual element, not an array, string, etc.\");\r\n\t\tdata.attrs = data.attrs || {};\r\n\t\tcached.attrs = cached.attrs || {};\r\n\t\tvar dataAttrKeys = Object.keys(data.attrs);\r\n\t\tvar hasKeys = dataAttrKeys.length > (\"key\" in data.attrs ? 1 : 0);\r\n\t\tmaybeRecreateObject(data, cached, dataAttrKeys);\r\n\t\tif (!isString(data.tag)) return;\r\n\t\tvar isNew = cached.nodes.length === 0;\r\n\t\tnamespace = getObjectNamespace(data, namespace);\r\n\t\tvar node;\r\n\t\tif (isNew) {\r\n\t\t\tnode = constructNode(data, namespace);\r\n\t\t\t//set attributes first, then create children\r\n\t\t\tvar attrs = constructAttrs(data, node, namespace, hasKeys)\r\n\t\t\tvar children = constructChildren(data, node, cached, editable, namespace, configs);\r\n\t\t\tcached = reconstructCached(data, attrs, children, node, namespace, views, controllers);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnode = buildUpdatedNode(cached, data, editable, hasKeys, namespace, views, configs, controllers);\r\n\t\t}\r\n\t\tif (isNew || shouldReattach === true && node != null) insertNode(parentElement, node, index);\r\n\t\t//schedule configs to be called. They are called after `build`\r\n\t\t//finishes running\r\n\t\tscheduleConfigsToBeCalled(configs, data, node, isNew, cached);\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction build(parentElement, parentTag, parentCache, parentIndex, data, cached, shouldReattach, index, editable, namespace, configs) {\r\n\t\t//`build` is a recursive function that manages creation/diffing/removal\r\n\t\t//of DOM elements based on comparison between `data` and `cached`\r\n\t\t//the diff algorithm can be summarized as this:\r\n\t\t//1 - compare `data` and `cached`\r\n\t\t//2 - if they are different, copy `data` to `cached` and update the DOM\r\n\t\t//    based on what the difference is\r\n\t\t//3 - recursively apply this algorithm for every array and for the\r\n\t\t//    children of every virtual element\r\n\r\n\t\t//the `cached` data structure is essentially the same as the previous\r\n\t\t//redraw's `data` data structure, with a few additions:\r\n\t\t//- `cached` always has a property called `nodes`, which is a list of\r\n\t\t//   DOM elements that correspond to the data represented by the\r\n\t\t//   respective virtual element\r\n\t\t//- in order to support attaching `nodes` as a property of `cached`,\r\n\t\t//   `cached` is *always* a non-primitive object, i.e. if the data was\r\n\t\t//   a string, then cached is a String instance. If data was `null` or\r\n\t\t//   `undefined`, cached is `new String(\"\")`\r\n\t\t//- `cached also has a `configContext` property, which is the state\r\n\t\t//   storage object exposed by config(element, isInitialized, context)\r\n\t\t//- when `cached` is an Object, it represents a virtual element; when\r\n\t\t//   it's an Array, it represents a list of elements; when it's a\r\n\t\t//   String, Number or Boolean, it represents a text node\r\n\r\n\t\t//`parentElement` is a DOM element used for W3C DOM API calls\r\n\t\t//`parentTag` is only used for handling a corner case for textarea\r\n\t\t//values\r\n\t\t//`parentCache` is used to remove nodes in some multi-node cases\r\n\t\t//`parentIndex` and `index` are used to figure out the offset of nodes.\r\n\t\t//They're artifacts from before arrays started being flattened and are\r\n\t\t//likely refactorable\r\n\t\t//`data` and `cached` are, respectively, the new and old nodes being\r\n\t\t//diffed\r\n\t\t//`shouldReattach` is a flag indicating whether a parent node was\r\n\t\t//recreated (if so, and if this node is reused, then this node must\r\n\t\t//reattach itself to the new parent)\r\n\t\t//`editable` is a flag that indicates whether an ancestor is\r\n\t\t//contenteditable\r\n\t\t//`namespace` indicates the closest HTML namespace as it cascades down\r\n\t\t//from an ancestor\r\n\t\t//`configs` is a list of config functions to run after the topmost\r\n\t\t//`build` call finishes running\r\n\r\n\t\t//there's logic that relies on the assumption that null and undefined\r\n\t\t//data are equivalent to empty strings\r\n\t\t//- this prevents lifecycle surprises from procedural helpers that mix\r\n\t\t//  implicit and explicit return statements (e.g.\r\n\t\t//  function foo() {if (cond) return m(\"div\")}\r\n\t\t//- it simplifies diffing code\r\n\t\tdata = dataToString(data);\r\n\t\tif (data.subtree === \"retain\") return cached;\r\n\t\tcached = makeCache(data, cached, index, parentIndex, parentCache);\r\n\t\treturn isArray(data) ? buildArray(data, cached, parentElement, index, parentTag, shouldReattach, editable, namespace, configs) :\r\n\t\t\tdata != null && isObject(data) ? buildObject(data, cached, editable, parentElement, index, shouldReattach, namespace, configs) :\r\n\t\t\t!isFunction(data) ? handleText(cached, data, index, parentElement, shouldReattach, editable, parentTag) :\r\n\t\t\tcached;\r\n\t}\r\n\tfunction sortChanges(a, b) { return a.action - b.action || a.index - b.index; }\r\n\tfunction setAttributes(node, tag, dataAttrs, cachedAttrs, namespace) {\r\n\t\tfor (var attrName in dataAttrs) {\r\n\t\t\tvar dataAttr = dataAttrs[attrName];\r\n\t\t\tvar cachedAttr = cachedAttrs[attrName];\r\n\t\t\tif (!(attrName in cachedAttrs) || (cachedAttr !== dataAttr)) {\r\n\t\t\t\tcachedAttrs[attrName] = dataAttr;\r\n\t\t\t\ttry {\r\n\t\t\t\t\t//`config` isn't a real attributes, so ignore it\r\n\t\t\t\t\tif (attrName === \"config\" || attrName === \"key\") continue;\r\n\t\t\t\t\t//hook event handlers to the auto-redrawing system\r\n\t\t\t\t\telse if (isFunction(dataAttr) && attrName.slice(0, 2) === \"on\") {\r\n\t\t\t\t\t\tnode[attrName] = autoredraw(dataAttr, node);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//handle `style: {...}`\r\n\t\t\t\t\telse if (attrName === \"style\" && dataAttr != null && isObject(dataAttr)) {\r\n\t\t\t\t\t\tfor (var rule in dataAttr) {\r\n\t\t\t\t\t\t\tif (cachedAttr == null || cachedAttr[rule] !== dataAttr[rule]) node.style[rule] = dataAttr[rule];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var rule in cachedAttr) {\r\n\t\t\t\t\t\t\tif (!(rule in dataAttr)) node.style[rule] = \"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//handle SVG\r\n\t\t\t\t\telse if (namespace != null) {\r\n\t\t\t\t\t\tif (attrName === \"href\") node.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", dataAttr);\r\n\t\t\t\t\t\telse node.setAttribute(attrName === \"className\" ? \"class\" : attrName, dataAttr);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//handle cases that are properties (but ignore cases where we should use setAttribute instead)\r\n\t\t\t\t\t//- list and form are typically used as strings, but are DOM element references in js\r\n\t\t\t\t\t//- when using CSS selectors (e.g. `m(\"[style='']\")`), style is used as a string, but it's an object in js\r\n\t\t\t\t\telse if (attrName in node && attrName !== \"list\" && attrName !== \"style\" && attrName !== \"form\" && attrName !== \"type\" && attrName !== \"width\" && attrName !== \"height\") {\r\n\t\t\t\t\t\t//#348 don't set the value if not needed otherwise cursor placement breaks in Chrome\r\n\t\t\t\t\t\tif (tag !== \"input\" || node[attrName] !== dataAttr) node[attrName] = dataAttr;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse node.setAttribute(attrName, dataAttr);\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\t//swallow IE's invalid argument errors to mimic HTML's fallback-to-doing-nothing-on-invalid-attributes behavior\r\n\t\t\t\t\tif (e.message.indexOf(\"Invalid argument\") < 0) throw e;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//#348 dataAttr may not be a string, so use loose comparison (double equal) instead of strict (triple equal)\r\n\t\t\telse if (attrName === \"value\" && tag === \"input\" && node.value != dataAttr) {\r\n\t\t\t\tnode.value = dataAttr;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cachedAttrs;\r\n\t}\r\n\tfunction clear(nodes, cached) {\r\n\t\tfor (var i = nodes.length - 1; i > -1; i--) {\r\n\t\t\tif (nodes[i] && nodes[i].parentNode) {\r\n\t\t\t\ttry { nodes[i].parentNode.removeChild(nodes[i]); }\r\n\t\t\t\tcatch (e) {} //ignore if this fails due to order of events (see http://stackoverflow.com/questions/21926083/failed-to-execute-removechild-on-node)\r\n\t\t\t\tcached = [].concat(cached);\r\n\t\t\t\tif (cached[i]) unload(cached[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//release memory if nodes is an array. This check should fail if nodes is a NodeList (see loop above)\r\n\t\tif (nodes.length) nodes.length = 0;\r\n\t}\r\n\tfunction unload(cached) {\r\n\t\tif (cached.configContext && isFunction(cached.configContext.onunload)) {\r\n\t\t\tcached.configContext.onunload();\r\n\t\t\tcached.configContext.onunload = null;\r\n\t\t}\r\n\t\tif (cached.controllers) {\r\n\t\t\tforEach(cached.controllers, function (controller) {\r\n\t\t\t\tif (isFunction(controller.onunload)) controller.onunload({preventDefault: noop});\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (cached.children) {\r\n\t\t\tif (isArray(cached.children)) forEach(cached.children, unload);\r\n\t\t\telse if (cached.children.tag) unload(cached.children);\r\n\t\t}\r\n\t}\r\n\tfunction injectHTML(parentElement, index, data) {\r\n\t\tvar nextSibling = parentElement.childNodes[index];\r\n\t\tif (nextSibling) {\r\n\t\t\tvar isElement = nextSibling.nodeType !== 1;\r\n\t\t\tvar placeholder = $document.createElement(\"span\");\r\n\t\t\tif (isElement) {\r\n\t\t\t\tparentElement.insertBefore(placeholder, nextSibling || null);\r\n\t\t\t\tplaceholder.insertAdjacentHTML(\"beforebegin\", data);\r\n\t\t\t\tparentElement.removeChild(placeholder);\r\n\t\t\t}\r\n\t\t\telse nextSibling.insertAdjacentHTML(\"beforebegin\", data);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (window.Range && window.Range.prototype.createContextualFragment) {\r\n\t\t\t\tparentElement.appendChild($document.createRange().createContextualFragment(data));\r\n\t\t\t}\r\n\t\t\telse parentElement.insertAdjacentHTML(\"beforeend\", data);\r\n\t\t}\r\n\t\tvar nodes = [];\r\n\t\twhile (parentElement.childNodes[index] !== nextSibling) {\r\n\t\t\tnodes.push(parentElement.childNodes[index]);\r\n\t\t\tindex++;\r\n\t\t}\r\n\t\treturn nodes;\r\n\t}\r\n\tfunction autoredraw(callback, object) {\r\n\t\treturn function(e) {\r\n\t\t\te = e || event;\r\n\t\t\tm.redraw.strategy(\"diff\");\r\n\t\t\tm.startComputation();\r\n\t\t\ttry { return callback.call(object, e); }\r\n\t\t\tfinally {\r\n\t\t\t\tendFirstComputation();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tvar html;\r\n\tvar documentNode = {\r\n\t\tappendChild: function(node) {\r\n\t\t\tif (html === undefined) html = $document.createElement(\"html\");\r\n\t\t\tif ($document.documentElement && $document.documentElement !== node) {\r\n\t\t\t\t$document.replaceChild(node, $document.documentElement);\r\n\t\t\t}\r\n\t\t\telse $document.appendChild(node);\r\n\t\t\tthis.childNodes = $document.childNodes;\r\n\t\t},\r\n\t\tinsertBefore: function(node) {\r\n\t\t\tthis.appendChild(node);\r\n\t\t},\r\n\t\tchildNodes: []\r\n\t};\r\n\tvar nodeCache = [], cellCache = {};\r\n\tm.render = function(root, cell, forceRecreation) {\r\n\t\tvar configs = [];\r\n\t\tif (!root) throw new Error(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\");\r\n\t\tvar id = getCellCacheKey(root);\r\n\t\tvar isDocumentRoot = root === $document;\r\n\t\tvar node = isDocumentRoot || root === $document.documentElement ? documentNode : root;\r\n\t\tif (isDocumentRoot && cell.tag !== \"html\") cell = {tag: \"html\", attrs: {}, children: cell};\r\n\t\tif (cellCache[id] === undefined) clear(node.childNodes);\r\n\t\tif (forceRecreation === true) reset(root);\r\n\t\tcellCache[id] = build(node, null, undefined, undefined, cell, cellCache[id], false, 0, null, undefined, configs);\r\n\t\tforEach(configs, function (config) { config(); });\r\n\t};\r\n\tfunction getCellCacheKey(element) {\r\n\t\tvar index = nodeCache.indexOf(element);\r\n\t\treturn index < 0 ? nodeCache.push(element) - 1 : index;\r\n\t}\r\n\r\n\tm.trust = function(value) {\r\n\t\tvalue = new String(value);\r\n\t\tvalue.$trusted = true;\r\n\t\treturn value;\r\n\t};\r\n\r\n\tfunction gettersetter(store) {\r\n\t\tvar prop = function() {\r\n\t\t\tif (arguments.length) store = arguments[0];\r\n\t\t\treturn store;\r\n\t\t};\r\n\r\n\t\tprop.toJSON = function() {\r\n\t\t\treturn store;\r\n\t\t};\r\n\r\n\t\treturn prop;\r\n\t}\r\n\r\n\tm.prop = function (store) {\r\n\t\t//note: using non-strict equality check here because we're checking if store is null OR undefined\r\n\t\tif ((store != null && isObject(store) || isFunction(store)) && isFunction(store.then)) {\r\n\t\t\treturn propify(store);\r\n\t\t}\r\n\r\n\t\treturn gettersetter(store);\r\n\t};\r\n\r\n\tvar roots = [], components = [], controllers = [], lastRedrawId = null, lastRedrawCallTime = 0, computePreRedrawHook = null, computePostRedrawHook = null, topComponent, unloaders = [];\r\n\tvar FRAME_BUDGET = 16; //60 frames per second = 1 call per 16 ms\r\n\tfunction parameterize(component, args) {\r\n\t\tvar controller = function() {\r\n\t\t\treturn (component.controller || noop).apply(this, args) || this;\r\n\t\t};\r\n\t\tif (component.controller) controller.prototype = component.controller.prototype;\r\n\t\tvar view = function(ctrl) {\r\n\t\t\tvar currentArgs = arguments.length > 1 ? args.concat([].slice.call(arguments, 1)) : args;\r\n\t\t\treturn component.view.apply(component, currentArgs ? [ctrl].concat(currentArgs) : [ctrl]);\r\n\t\t};\r\n\t\tview.$original = component.view;\r\n\t\tvar output = {controller: controller, view: view};\r\n\t\tif (args[0] && args[0].key != null) output.attrs = {key: args[0].key};\r\n\t\treturn output;\r\n\t}\r\n\tm.component = function(component) {\r\n\t\tfor (var args = [], i = 1; i < arguments.length; i++) args.push(arguments[i]);\r\n\t\treturn parameterize(component, args);\r\n\t};\r\n\tm.mount = m.module = function(root, component) {\r\n\t\tif (!root) throw new Error(\"Please ensure the DOM element exists before rendering a template into it.\");\r\n\t\tvar index = roots.indexOf(root);\r\n\t\tif (index < 0) index = roots.length;\r\n\r\n\t\tvar isPrevented = false;\r\n\t\tvar event = {preventDefault: function() {\r\n\t\t\tisPrevented = true;\r\n\t\t\tcomputePreRedrawHook = computePostRedrawHook = null;\r\n\t\t}};\r\n\r\n\t\tforEach(unloaders, function (unloader) {\r\n\t\t\tunloader.handler.call(unloader.controller, event);\r\n\t\t\tunloader.controller.onunload = null;\r\n\t\t});\r\n\r\n\t\tif (isPrevented) {\r\n\t\t\tforEach(unloaders, function (unloader) {\r\n\t\t\t\tunloader.controller.onunload = unloader.handler;\r\n\t\t\t});\r\n\t\t}\r\n\t\telse unloaders = [];\r\n\r\n\t\tif (controllers[index] && isFunction(controllers[index].onunload)) {\r\n\t\t\tcontrollers[index].onunload(event);\r\n\t\t}\r\n\r\n\t\tvar isNullComponent = component === null;\r\n\r\n\t\tif (!isPrevented) {\r\n\t\t\tm.redraw.strategy(\"all\");\r\n\t\t\tm.startComputation();\r\n\t\t\troots[index] = root;\r\n\t\t\tvar currentComponent = component ? (topComponent = component) : (topComponent = component = {controller: noop});\r\n\t\t\tvar controller = new (component.controller || noop)();\r\n\t\t\t//controllers may call m.mount recursively (via m.route redirects, for example)\r\n\t\t\t//this conditional ensures only the last recursive m.mount call is applied\r\n\t\t\tif (currentComponent === topComponent) {\r\n\t\t\t\tcontrollers[index] = controller;\r\n\t\t\t\tcomponents[index] = component;\r\n\t\t\t}\r\n\t\t\tendFirstComputation();\r\n\t\t\tif (isNullComponent) {\r\n\t\t\t\tremoveRootElement(root, index);\r\n\t\t\t}\r\n\t\t\treturn controllers[index];\r\n\t\t}\r\n\t\tif (isNullComponent) {\r\n\t\t\tremoveRootElement(root, index);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction removeRootElement(root, index) {\r\n\t\troots.splice(index, 1);\r\n\t\tcontrollers.splice(index, 1);\r\n\t\tcomponents.splice(index, 1);\r\n\t\treset(root);\r\n\t\tnodeCache.splice(getCellCacheKey(root), 1);\r\n\t}\r\n\r\n\tvar redrawing = false, forcing = false;\r\n\tm.redraw = function(force) {\r\n\t\tif (redrawing) return;\r\n\t\tredrawing = true;\r\n\t\tif (force) forcing = true;\r\n\t\ttry {\r\n\t\t\t//lastRedrawId is a positive number if a second redraw is requested before the next animation frame\r\n\t\t\t//lastRedrawID is null if it's the first redraw and not an event handler\r\n\t\t\tif (lastRedrawId && !force) {\r\n\t\t\t\t//when setTimeout: only reschedule redraw if time between now and previous redraw is bigger than a frame, otherwise keep currently scheduled timeout\r\n\t\t\t\t//when rAF: always reschedule redraw\r\n\t\t\t\tif ($requestAnimationFrame === window.requestAnimationFrame || new Date - lastRedrawCallTime > FRAME_BUDGET) {\r\n\t\t\t\t\tif (lastRedrawId > 0) $cancelAnimationFrame(lastRedrawId);\r\n\t\t\t\t\tlastRedrawId = $requestAnimationFrame(redraw, FRAME_BUDGET);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tredraw();\r\n\t\t\t\tlastRedrawId = $requestAnimationFrame(function() { lastRedrawId = null; }, FRAME_BUDGET);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\tredrawing = forcing = false;\r\n\t\t}\r\n\t};\r\n\tm.redraw.strategy = m.prop();\r\n\tfunction redraw() {\r\n\t\tif (computePreRedrawHook) {\r\n\t\t\tcomputePreRedrawHook();\r\n\t\t\tcomputePreRedrawHook = null;\r\n\t\t}\r\n\t\tforEach(roots, function (root, i) {\r\n\t\t\tvar component = components[i];\r\n\t\t\tif (controllers[i]) {\r\n\t\t\t\tvar args = [controllers[i]];\r\n\t\t\t\tm.render(root, component.view ? component.view(controllers[i], args) : \"\");\r\n\t\t\t}\r\n\t\t});\r\n\t\t//after rendering within a routed context, we need to scroll back to the top, and fetch the document title for history.pushState\r\n\t\tif (computePostRedrawHook) {\r\n\t\t\tcomputePostRedrawHook();\r\n\t\t\tcomputePostRedrawHook = null;\r\n\t\t}\r\n\t\tlastRedrawId = null;\r\n\t\tlastRedrawCallTime = new Date;\r\n\t\tm.redraw.strategy(\"diff\");\r\n\t}\r\n\r\n\tvar pendingRequests = 0;\r\n\tm.startComputation = function() { pendingRequests++; };\r\n\tm.endComputation = function() {\r\n\t\tif (pendingRequests > 1) pendingRequests--;\r\n\t\telse {\r\n\t\t\tpendingRequests = 0;\r\n\t\t\tm.redraw();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction endFirstComputation() {\r\n\t\tif (m.redraw.strategy() === \"none\") {\r\n\t\t\tpendingRequests--;\r\n\t\t\tm.redraw.strategy(\"diff\");\r\n\t\t}\r\n\t\telse m.endComputation();\r\n\t}\r\n\r\n\tm.withAttr = function(prop, withAttrCallback, callbackThis) {\r\n\t\treturn function(e) {\r\n\t\t\te = e || event;\r\n\t\t\tvar currentTarget = e.currentTarget || this;\r\n\t\t\tvar _this = callbackThis || this;\r\n\t\t\twithAttrCallback.call(_this, prop in currentTarget ? currentTarget[prop] : currentTarget.getAttribute(prop));\r\n\t\t};\r\n\t};\r\n\r\n\t//routing\r\n\tvar modes = {pathname: \"\", hash: \"#\", search: \"?\"};\r\n\tvar redirect = noop, routeParams, currentRoute, isDefaultRoute = false;\r\n\tm.route = function(root, arg1, arg2, vdom) {\r\n\t\t//m.route()\r\n\t\tif (arguments.length === 0) return currentRoute;\r\n\t\t//m.route(el, defaultRoute, routes)\r\n\t\telse if (arguments.length === 3 && isString(arg1)) {\r\n\t\t\tredirect = function(source) {\r\n\t\t\t\tvar path = currentRoute = normalizeRoute(source);\r\n\t\t\t\tif (!routeByValue(root, arg2, path)) {\r\n\t\t\t\t\tif (isDefaultRoute) throw new Error(\"Ensure the default route matches one of the routes defined in m.route\");\r\n\t\t\t\t\tisDefaultRoute = true;\r\n\t\t\t\t\tm.route(arg1, true);\r\n\t\t\t\t\tisDefaultRoute = false;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar listener = m.route.mode === \"hash\" ? \"onhashchange\" : \"onpopstate\";\r\n\t\t\twindow[listener] = function() {\r\n\t\t\t\tvar path = $location[m.route.mode];\r\n\t\t\t\tif (m.route.mode === \"pathname\") path += $location.search;\r\n\t\t\t\tif (currentRoute !== normalizeRoute(path)) redirect(path);\r\n\t\t\t};\r\n\r\n\t\t\tcomputePreRedrawHook = setScroll;\r\n\t\t\twindow[listener]();\r\n\t\t}\r\n\t\t//config: m.route\r\n\t\telse if (root.addEventListener || root.attachEvent) {\r\n\t\t\troot.href = (m.route.mode !== 'pathname' ? $location.pathname : '') + modes[m.route.mode] + vdom.attrs.href;\r\n\t\t\tif (root.addEventListener) {\r\n\t\t\t\troot.removeEventListener(\"click\", routeUnobtrusive);\r\n\t\t\t\troot.addEventListener(\"click\", routeUnobtrusive);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\troot.detachEvent(\"onclick\", routeUnobtrusive);\r\n\t\t\t\troot.attachEvent(\"onclick\", routeUnobtrusive);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//m.route(route, params, shouldReplaceHistoryEntry)\r\n\t\telse if (isString(root)) {\r\n\t\t\tvar oldRoute = currentRoute;\r\n\t\t\tcurrentRoute = root;\r\n\t\t\tvar args = arg1 || {};\r\n\t\t\tvar queryIndex = currentRoute.indexOf(\"?\");\r\n\t\t\tvar params = queryIndex > -1 ? parseQueryString(currentRoute.slice(queryIndex + 1)) : {};\r\n\t\t\tfor (var i in args) params[i] = args[i];\r\n\t\t\tvar querystring = buildQueryString(params);\r\n\t\t\tvar currentPath = queryIndex > -1 ? currentRoute.slice(0, queryIndex) : currentRoute;\r\n\t\t\tif (querystring) currentRoute = currentPath + (currentPath.indexOf(\"?\") === -1 ? \"?\" : \"&\") + querystring;\r\n\r\n\t\t\tvar shouldReplaceHistoryEntry = (arguments.length === 3 ? arg2 : arg1) === true || oldRoute === root;\r\n\r\n\t\t\tif (window.history.pushState) {\r\n\t\t\t\tcomputePreRedrawHook = setScroll;\r\n\t\t\t\tcomputePostRedrawHook = function() {\r\n\t\t\t\t\twindow.history[shouldReplaceHistoryEntry ? \"replaceState\" : \"pushState\"](null, $document.title, modes[m.route.mode] + currentRoute);\r\n\t\t\t\t};\r\n\t\t\t\tredirect(modes[m.route.mode] + currentRoute);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$location[m.route.mode] = currentRoute;\r\n\t\t\t\tredirect(modes[m.route.mode] + currentRoute);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tm.route.param = function(key) {\r\n\t\tif (!routeParams) throw new Error(\"You must call m.route(element, defaultRoute, routes) before calling m.route.param()\");\r\n\t\tif( !key ){\r\n\t\t\treturn routeParams;\r\n\t\t}\r\n\t\treturn routeParams[key];\r\n\t};\r\n\tm.route.mode = \"search\";\r\n\tfunction normalizeRoute(route) {\r\n\t\treturn route.slice(modes[m.route.mode].length);\r\n\t}\r\n\tfunction routeByValue(root, router, path) {\r\n\t\trouteParams = {};\r\n\r\n\t\tvar queryStart = path.indexOf(\"?\");\r\n\t\tif (queryStart !== -1) {\r\n\t\t\trouteParams = parseQueryString(path.substr(queryStart + 1, path.length));\r\n\t\t\tpath = path.substr(0, queryStart);\r\n\t\t}\r\n\r\n\t\t// Get all routes and check if there's\r\n\t\t// an exact match for the current path\r\n\t\tvar keys = Object.keys(router);\r\n\t\tvar index = keys.indexOf(path);\r\n\t\tif(index !== -1){\r\n\t\t\tm.mount(root, router[keys [index]]);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tfor (var route in router) {\r\n\t\t\tif (route === path) {\r\n\t\t\t\tm.mount(root, router[route]);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tvar matcher = new RegExp(\"^\" + route.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\").replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\");\r\n\r\n\t\t\tif (matcher.test(path)) {\r\n\t\t\t\tpath.replace(matcher, function() {\r\n\t\t\t\t\tvar keys = route.match(/:[^\\/]+/g) || [];\r\n\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2);\r\n\t\t\t\t\tforEach(keys, function (key, i) {\r\n\t\t\t\t\t\trouteParams[key.replace(/:|\\./g, \"\")] = decodeURIComponent(values[i]);\r\n\t\t\t\t\t})\r\n\t\t\t\t\tm.mount(root, router[route]);\r\n\t\t\t\t});\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfunction routeUnobtrusive(e) {\r\n\t\te = e || event;\r\n\r\n\t\tif (e.ctrlKey || e.metaKey || e.which === 2) return;\r\n\r\n\t\tif (e.preventDefault) e.preventDefault();\r\n\t\telse e.returnValue = false;\r\n\r\n\t\tvar currentTarget = e.currentTarget || e.srcElement;\r\n\t\tvar args = m.route.mode === \"pathname\" && currentTarget.search ? parseQueryString(currentTarget.search.slice(1)) : {};\r\n\t\twhile (currentTarget && currentTarget.nodeName.toUpperCase() !== \"A\") currentTarget = currentTarget.parentNode;\r\n\t\t// clear pendingRequests because we want an immediate route change\r\n\t\tpendingRequests = 0;\r\n\t\tm.route(currentTarget[m.route.mode].slice(modes[m.route.mode].length), args);\r\n\t}\r\n\tfunction setScroll() {\r\n\t\tif (m.route.mode !== \"hash\" && $location.hash) $location.hash = $location.hash;\r\n\t\telse window.scrollTo(0, 0);\r\n\t}\r\n\tfunction buildQueryString(object, prefix) {\r\n\t\tvar duplicates = {};\r\n\t\tvar str = [];\r\n\t\tfor (var prop in object) {\r\n\t\t\tvar key = prefix ? prefix + \"[\" + prop + \"]\" : prop;\r\n\t\t\tvar value = object[prop];\r\n\r\n\t\t\tif (value === null) {\r\n\t\t\t\tstr.push(encodeURIComponent(key));\r\n\t\t\t} else if (isObject(value)) {\r\n\t\t\t\tstr.push(buildQueryString(value, key));\r\n\t\t\t} else if (isArray(value)) {\r\n\t\t\t\tvar keys = [];\r\n\t\t\t\tduplicates[key] = duplicates[key] || {};\r\n\t\t\t\tforEach(value, function (item) {\r\n\t\t\t\t\tif (!duplicates[key][item]) {\r\n\t\t\t\t\t\tduplicates[key][item] = true;\r\n\t\t\t\t\t\tkeys.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(item));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tstr.push(keys.join(\"&\"));\r\n\t\t\t} else if (value !== undefined) {\r\n\t\t\t\tstr.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(value));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn str.join(\"&\");\r\n\t}\r\n\tfunction parseQueryString(str) {\r\n\t\tif (str === \"\" || str == null) return {};\r\n\t\tif (str.charAt(0) === \"?\") str = str.slice(1);\r\n\r\n\t\tvar pairs = str.split(\"&\"), params = {};\r\n\t\tforEach(pairs, function (string) {\r\n\t\t\tvar pair = string.split(\"=\");\r\n\t\t\tvar key = decodeURIComponent(pair[0]);\r\n\t\t\tvar value = pair.length === 2 ? decodeURIComponent(pair[1]) : null;\r\n\t\t\tif (params[key] != null) {\r\n\t\t\t\tif (!isArray(params[key])) params[key] = [params[key]];\r\n\t\t\t\tparams[key].push(value);\r\n\t\t\t}\r\n\t\t\telse params[key] = value;\r\n\t\t});\r\n\r\n\t\treturn params;\r\n\t}\r\n\tm.route.buildQueryString = buildQueryString;\r\n\tm.route.parseQueryString = parseQueryString;\r\n\r\n\tfunction reset(root) {\r\n\t\tvar cacheKey = getCellCacheKey(root);\r\n\t\tclear(root.childNodes, cellCache[cacheKey]);\r\n\t\tcellCache[cacheKey] = undefined;\r\n\t}\r\n\r\n\tm.deferred = function () {\r\n\t\tvar deferred = new Deferred();\r\n\t\tdeferred.promise = propify(deferred.promise);\r\n\t\treturn deferred;\r\n\t};\r\n\tfunction propify(promise, initialValue) {\r\n\t\tvar prop = m.prop(initialValue);\r\n\t\tpromise.then(prop);\r\n\t\tprop.then = function(resolve, reject) {\r\n\t\t\treturn propify(promise.then(resolve, reject), initialValue);\r\n\t\t};\r\n\t\tprop[\"catch\"] = prop.then.bind(null, null);\r\n\t\treturn prop;\r\n\t}\r\n\t//Promiz.mithril.js | Zolmeister | MIT\r\n\t//a modified version of Promiz.js, which does not conform to Promises/A+ for two reasons:\r\n\t//1) `then` callbacks are called synchronously (because setTimeout is too slow, and the setImmediate polyfill is too big\r\n\t//2) throwing subclasses of Error cause the error to be bubbled up instead of triggering rejection (because the spec does not account for the important use case of default browser error handling, i.e. message w/ line number)\r\n\tfunction Deferred(successCallback, failureCallback) {\r\n\t\tvar RESOLVING = 1, REJECTING = 2, RESOLVED = 3, REJECTED = 4;\r\n\t\tvar self = this, state = 0, promiseValue = 0, next = [];\r\n\r\n\t\tself.promise = {};\r\n\r\n\t\tself.resolve = function(value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value;\r\n\t\t\t\tstate = RESOLVING;\r\n\r\n\t\t\t\tfire();\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t};\r\n\r\n\t\tself.reject = function(value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value;\r\n\t\t\t\tstate = REJECTING;\r\n\r\n\t\t\t\tfire();\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t};\r\n\r\n\t\tself.promise.then = function(successCallback, failureCallback) {\r\n\t\t\tvar deferred = new Deferred(successCallback, failureCallback)\r\n\t\t\tif (state === RESOLVED) {\r\n\t\t\t\tdeferred.resolve(promiseValue);\r\n\t\t\t}\r\n\t\t\telse if (state === REJECTED) {\r\n\t\t\t\tdeferred.reject(promiseValue);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnext.push(deferred);\r\n\t\t\t}\r\n\t\t\treturn deferred.promise\r\n\t\t};\r\n\r\n\t\tfunction finish(type) {\r\n\t\t\tstate = type || REJECTED;\r\n\t\t\tnext.map(function(deferred) {\r\n\t\t\t\tstate === RESOLVED ? deferred.resolve(promiseValue) : deferred.reject(promiseValue);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction thennable(then, successCallback, failureCallback, notThennableCallback) {\r\n\t\t\tif (((promiseValue != null && isObject(promiseValue)) || isFunction(promiseValue)) && isFunction(then)) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// count protects against abuse calls from spec checker\r\n\t\t\t\t\tvar count = 0;\r\n\t\t\t\t\tthen.call(promiseValue, function(value) {\r\n\t\t\t\t\t\tif (count++) return;\r\n\t\t\t\t\t\tpromiseValue = value;\r\n\t\t\t\t\t\tsuccessCallback();\r\n\t\t\t\t\t}, function (value) {\r\n\t\t\t\t\t\tif (count++) return;\r\n\t\t\t\t\t\tpromiseValue = value;\r\n\t\t\t\t\t\tfailureCallback();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e);\r\n\t\t\t\t\tpromiseValue = e;\r\n\t\t\t\t\tfailureCallback();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnotThennableCallback();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction fire() {\r\n\t\t\t// check if it's a thenable\r\n\t\t\tvar then;\r\n\t\t\ttry {\r\n\t\t\t\tthen = promiseValue && promiseValue.then;\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tm.deferred.onerror(e);\r\n\t\t\t\tpromiseValue = e;\r\n\t\t\t\tstate = REJECTING;\r\n\t\t\t\treturn fire();\r\n\t\t\t}\r\n\r\n\t\t\tif (state === REJECTING) {\r\n\t\t\t\tm.deferred.onerror(promiseValue)\r\n\t\t\t}\r\n\r\n\t\t\tthennable(then, function () {\r\n\t\t\t\tstate = RESOLVING\r\n\t\t\t\tfire()\r\n\t\t\t}, function () {\r\n\t\t\t\tstate = REJECTING\r\n\t\t\t\tfire()\r\n\t\t\t}, function () {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (state === RESOLVING && isFunction(successCallback)) {\r\n\t\t\t\t\t\tpromiseValue = successCallback(promiseValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (state === REJECTING && isFunction(failureCallback)) {\r\n\t\t\t\t\t\tpromiseValue = failureCallback(promiseValue);\r\n\t\t\t\t\t\tstate = RESOLVING;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e);\r\n\t\t\t\t\tpromiseValue = e;\r\n\t\t\t\t\treturn finish();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (promiseValue === self) {\r\n\t\t\t\t\tpromiseValue = TypeError();\r\n\t\t\t\t\tfinish();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthennable(then, function () {\r\n\t\t\t\t\t\tfinish(RESOLVED);\r\n\t\t\t\t\t}, finish, function () {\r\n\t\t\t\t\t\tfinish(state === RESOLVING && RESOLVED);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tm.deferred.onerror = function(e) {\r\n\t\tif (type.call(e) === \"[object Error]\" && !e.constructor.toString().match(/ Error/)) {\r\n\t\t\tpendingRequests = 0;\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t};\r\n\r\n\tm.sync = function(args) {\r\n\t\tvar method = \"resolve\";\r\n\r\n\t\tfunction synchronizer(pos, resolved) {\r\n\t\t\treturn function(value) {\r\n\t\t\t\tresults[pos] = value;\r\n\t\t\t\tif (!resolved) method = \"reject\";\r\n\t\t\t\tif (--outstanding === 0) {\r\n\t\t\t\t\tdeferred.promise(results);\r\n\t\t\t\t\tdeferred[method](results);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar deferred = m.deferred();\r\n\t\tvar outstanding = args.length;\r\n\t\tvar results = new Array(outstanding);\r\n\t\tif (args.length > 0) {\r\n\t\t\tforEach(args, function (arg, i) {\r\n\t\t\t\targ.then(synchronizer(i, true), synchronizer(i, false));\r\n\t\t\t});\r\n\t\t}\r\n\t\telse deferred.resolve([]);\r\n\r\n\t\treturn deferred.promise;\r\n\t};\r\n\tfunction identity(value) { return value; }\r\n\r\n\tfunction ajax(options) {\r\n\t\tif (options.dataType && options.dataType.toLowerCase() === \"jsonp\") {\r\n\t\t\tvar callbackKey = \"mithril_callback_\" + new Date().getTime() + \"_\" + (Math.round(Math.random() * 1e16)).toString(36)\r\n\t\t\tvar script = $document.createElement(\"script\");\r\n\r\n\t\t\twindow[callbackKey] = function(resp) {\r\n\t\t\t\tscript.parentNode.removeChild(script);\r\n\t\t\t\toptions.onload({\r\n\t\t\t\t\ttype: \"load\",\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tresponseText: resp\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\twindow[callbackKey] = undefined;\r\n\t\t\t};\r\n\r\n\t\t\tscript.onerror = function() {\r\n\t\t\t\tscript.parentNode.removeChild(script);\r\n\r\n\t\t\t\toptions.onerror({\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tstatus: 500,\r\n\t\t\t\t\t\tresponseText: JSON.stringify({\r\n\t\t\t\t\t\t\terror: \"Error making jsonp request\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\twindow[callbackKey] = undefined;\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tscript.onload = function() {\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\r\n\t\t\tscript.src = options.url\r\n\t\t\t\t+ (options.url.indexOf(\"?\") > 0 ? \"&\" : \"?\")\r\n\t\t\t\t+ (options.callbackKey ? options.callbackKey : \"callback\")\r\n\t\t\t\t+ \"=\" + callbackKey\r\n\t\t\t\t+ \"&\" + buildQueryString(options.data || {});\r\n\t\t\t$document.body.appendChild(script);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar xhr = new window.XMLHttpRequest();\r\n\t\t\txhr.open(options.method, options.url, true, options.user, options.password);\r\n\t\t\txhr.onreadystatechange = function() {\r\n\t\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\t\tif (xhr.status >= 200 && xhr.status < 300) options.onload({type: \"load\", target: xhr});\r\n\t\t\t\t\telse options.onerror({type: \"error\", target: xhr});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (options.serialize === JSON.stringify && options.data && options.method !== \"GET\") {\r\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\");\r\n\t\t\t}\r\n\t\t\tif (options.deserialize === JSON.parse) {\r\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\");\r\n\t\t\t}\r\n\t\t\tif (isFunction(options.config)) {\r\n\t\t\t\tvar maybeXhr = options.config(xhr, options);\r\n\t\t\t\tif (maybeXhr != null) xhr = maybeXhr;\r\n\t\t\t}\r\n\r\n\t\t\tvar data = options.method === \"GET\" || !options.data ? \"\" : options.data;\r\n\t\t\tif (data && (!isString(data) && data.constructor !== window.FormData)) {\r\n\t\t\t\tthrow new Error(\"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`\");\r\n\t\t\t}\r\n\t\t\txhr.send(data);\r\n\t\t\treturn xhr;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction bindData(xhrOptions, data, serialize) {\r\n\t\tif (xhrOptions.method === \"GET\" && xhrOptions.dataType !== \"jsonp\") {\r\n\t\t\tvar prefix = xhrOptions.url.indexOf(\"?\") < 0 ? \"?\" : \"&\";\r\n\t\t\tvar querystring = buildQueryString(data);\r\n\t\t\txhrOptions.url = xhrOptions.url + (querystring ? prefix + querystring : \"\");\r\n\t\t}\r\n\t\telse xhrOptions.data = serialize(data);\r\n\t\treturn xhrOptions;\r\n\t}\r\n\r\n\tfunction parameterizeUrl(url, data) {\r\n\t\tvar tokens = url.match(/:[a-z]\\w+/gi);\r\n\t\tif (tokens && data) {\r\n\t\t\tforEach(tokens, function (token) {\r\n\t\t\t\tvar key = token.slice(1);\r\n\t\t\t\turl = url.replace(token, data[key]);\r\n\t\t\t\tdelete data[key];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\tm.request = function(xhrOptions) {\r\n\t\tif (xhrOptions.background !== true) m.startComputation();\r\n\t\tvar deferred = new Deferred();\r\n\t\tvar isJSONP = xhrOptions.dataType && xhrOptions.dataType.toLowerCase() === \"jsonp\"\r\n\t\tvar serialize = xhrOptions.serialize = isJSONP ? identity : xhrOptions.serialize || JSON.stringify;\r\n\t\tvar deserialize = xhrOptions.deserialize = isJSONP ? identity : xhrOptions.deserialize || JSON.parse;\r\n\t\tvar extract = isJSONP ? function(jsonp) { return jsonp.responseText } : xhrOptions.extract || function(xhr) {\r\n\t\t\tif (xhr.responseText.length === 0 && deserialize === JSON.parse) {\r\n\t\t\t\treturn null\r\n\t\t\t} else {\r\n\t\t\t\treturn xhr.responseText\r\n\t\t\t}\r\n\t\t};\r\n\t\txhrOptions.method = (xhrOptions.method || \"GET\").toUpperCase();\r\n\t\txhrOptions.url = parameterizeUrl(xhrOptions.url, xhrOptions.data);\r\n\t\txhrOptions = bindData(xhrOptions, xhrOptions.data, serialize);\r\n\t\txhrOptions.onload = xhrOptions.onerror = function(e) {\r\n\t\t\ttry {\r\n\t\t\t\te = e || event;\r\n\t\t\t\tvar unwrap = (e.type === \"load\" ? xhrOptions.unwrapSuccess : xhrOptions.unwrapError) || identity;\r\n\t\t\t\tvar response = unwrap(deserialize(extract(e.target, xhrOptions)), e.target);\r\n\t\t\t\tif (e.type === \"load\") {\r\n\t\t\t\t\tif (isArray(response) && xhrOptions.type) {\r\n\t\t\t\t\t\tforEach(response, function (res, i) {\r\n\t\t\t\t\t\t\tresponse[i] = new xhrOptions.type(res);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (xhrOptions.type) {\r\n\t\t\t\t\t\tresponse = new xhrOptions.type(response);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdeferred.resolve(response)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdeferred.reject(response)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdeferred[e.type === \"load\" ? \"resolve\" : \"reject\"](response);\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tdeferred.reject(e);\r\n\t\t\t}\r\n\t\t\tfinally {\r\n\t\t\t\tif (xhrOptions.background !== true) m.endComputation()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tajax(xhrOptions);\r\n\t\tdeferred.promise = propify(deferred.promise, xhrOptions.initialValue);\r\n\t\treturn deferred.promise;\r\n\t};\r\n\r\n\t//testing API\r\n\tm.deps = function(mock) {\r\n\t\tinitialize(window = mock || window);\r\n\t\treturn window;\r\n\t};\r\n\t//for internal testing only, do not use `m.deps.factory`\r\n\tm.deps.factory = app;\r\n\r\n\treturn m;\r\n})(typeof window !== \"undefined\" ? window : {});\r\n\r\nif (typeof module === \"object\" && module != null && module.exports) module.exports = m;\r\nelse if (typeof define === \"function\" && define.amd) define(function() { return m });\r\n\n},{}],88:[function(require,module,exports){\n// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],89:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\n},{}],90:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n\n},{}],91:[function(require,module,exports){\n'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n\n},{\"./decode\":89,\"./encode\":90}]},{},[1]);\n })();"],"sourceRoot":"/source/"}