window.mc4wpAjaxForms=function(a){"use strict";function b(c){return m=a(".mc4wp-ajax"),"boolean"==typeof c&&c&&!m.length?void a(document).ready(b):(n=m.find("form"),mc4wp_vars.ajaxloader.enabled&&n.find("input").bind("focus.mc4wp",d),void k())}function c(b){b.preventDefault();var c=a(this).serialize();return e(c,a(this)),a.ajax({type:"POST",url:mc4wp_vars.ajaxurl,success:g,error:h,data:c,dataType:"json"}),!1}function d(){a(".mc4wp-ajax-loader").css({"vertical-align":"middle",height:"16px",width:"16px",border:0,background:'url("'+mc4wp_vars.ajaxloader.imgurl+'") no-repeat center center'}),n.find("input").unbind("focus.mc4wp")}function e(a,b){var c,d,e;l=b.parent(".mc4wp-form"),l.removeClass("mc4wp-form-success"),l.removeClass("mc4wp-form-error"),l.find(".mc4wp-alert").remove(),d=b.find('[type="submit"], [type="image"]').last(),e=d.get(0),e.disabled=!0;var g=d.data("loading-text");g?(d.data("original-text",f(e)),f(e,g)):(c=l.find(".mc4wp-ajax-loader").get(0),e.parentNode.insertBefore(c,e.nextSibling),c.style.display="inline-block",(""===c.style.marginLeft||parseInt(c.style.marginLeft)<5)&&(c.style.marginLeft="5px")),l.trigger({type:"submit.mc4wp",formData:a})}function f(a,b){var c="BUTTON"===a.tagName;return"string"==typeof b&&(c?a.innerText=b:a.value=b),c?a.innerText:a.value}function g(a){var b,c;l.trigger({type:"ajaxSuccess.mc4wp",response:a}),l.find(".mc4wp-ajax-loader").get(0).style.display="none",l.find(".mc4wp-response").html(a.data.html),b=l.find('[type="submit"], [type="image"]').last(),c=b.get(0);var d=b.data("original-text");d&&f(c,d),c.disabled=!1,a.success?i(a.data.redirect,a.data.hide_form,a.data.data):j(a.data.error,a.data.data)}function h(a){l.trigger({type:"ajaxError.mc4wp",response:a}),o.log(a)}function i(a,b,c){var d=l.find("form");l.addClass("mc4wp-form-success"),d.trigger("reset"),a&&""!=a.url&&window.setTimeout(function(){window.location.replace(a.url)},a.delay),b&&(d.get(0).style.display="none"),l.trigger({type:"subscribe.mc4wp",formData:c})}function j(a,b){l.addClass("mc4wp-form-error"),l.trigger({type:"error.mc4wp",formData:b,error:a.type})}function k(){var b=function(b){"subscribe"===b.type&&(b.type="success");var c=b.namespace+"."+b.type;jQuery(document).trigger({type:c,form:a(this),formData:b.formData,error:b.error,response:b.response})};m.on("subscribe.mc4wp",b),m.on("error.mc4wp",b)}var l,m,n,o=window.console||{log:function(){}};b(!0),a(document).on("submit",".mc4wp-ajax form",c)}(window.jQuery);