window.mc4wpAjaxForms=function(a){"use strict";function b(c){if(l=a(".mc4wp-ajax"),"boolean"==typeof c&&c&&!l.length)return void a(document).ready(b);if(m=l.find("form"),mc4wp_vars.ajaxloader.enabled){var d=new Image;d.src=mc4wp_vars.ajaxloader.imgurl}j()}function c(b){b.preventDefault();var c=a(this).serialize();if("object"==typeof this.elements.EMAIL){this.elements.EMAIL.required=!0;var e=this.elements.EMAIL.value;if(""===e.trim())return!1}return d(c,a(this)),a.ajax({type:"POST",url:mc4wp_vars.ajaxurl,success:f,error:g,data:c,dataType:"json"}),!1}function d(b,c){var d,f;k=c.parent(".mc4wp-form"),k.removeClass("mc4wp-form-success"),k.removeClass("mc4wp-form-error"),k.find(".mc4wp-alert").remove(),d=c.find('[type="submit"], [type="image"]').last(),f=d.get(0),f.disabled=!0;var g=d.data("loading-text");if(g)d.data("original-text",e(f)),e(f,g);else{var h=a("<span />").addClass("mc4wp-ajax-loader").css({display:"inline-block","vertical-align":"middle",height:"16px",width:"16px",border:0,background:'url("'+mc4wp_vars.ajaxloader.imgurl+'") no-repeat center center'}).insertAfter(d);parseInt(h.css("margin-left"))<5&&h.css("margin-left","5px")}k.trigger({type:"submit.mc4wp",formData:b})}function e(a,b){var c="BUTTON"===a.tagName;return"string"==typeof b&&(c?a.innerText=b:a.value=b),c?a.innerText:a.value}function f(b){var c,d;k.trigger({type:"ajaxSuccess.mc4wp",response:b}),a(".mc4wp-ajax-loader").remove(),k.find(".mc4wp-response").html(b.data.html),c=k.find('[type="submit"], [type="image"]').last(),d=c.get(0);var f=c.data("original-text");f&&e(d,f),d.disabled=!1,b.success?h(b.data.redirect,b.data.hide_form,b.data.data):i(b.data.error,b.data.data)}function g(a){k.trigger({type:"ajaxError.mc4wp",response:a}),n.log(a)}function h(a,b,c){var d=k.find("form");k.addClass("mc4wp-form-success"),d.trigger("reset"),a&&""!=a.url&&window.setTimeout(function(){window.location.replace(a.url)},a.delay),b&&(d.get(0).style.display="none"),k.trigger({type:"subscribe.mc4wp",formData:c})}function i(a,b){k.addClass("mc4wp-form-error"),k.trigger({type:"error.mc4wp",formData:b,error:a.type})}function j(){var b=function(b){"subscribe"===b.type&&(b.type="success");var c=b.namespace+"."+b.type;jQuery(document).trigger({type:c,form:a(this),formData:b.formData,error:b.error,response:b.response})};l.on("subscribe.mc4wp",b),l.on("error.mc4wp",b)}var k,l,m,n=window.console||{log:function(){}};b(!0),a(document).on("submit",".mc4wp-ajax form",c)}(window.jQuery);